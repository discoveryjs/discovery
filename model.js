var bw=Object.create;var tu=Object.defineProperty;var ww=Object.getOwnPropertyDescriptor;var xw=Object.getOwnPropertyNames;var kw=Object.getPrototypeOf,Sw=Object.prototype.hasOwnProperty;var It=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Ye=(r,t)=>{for(var i in t)tu(r,i,{get:t[i],enumerable:!0})},Cw=(r,t,i,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of xw(t))!Sw.call(r,u)&&u!==i&&tu(r,u,{get:()=>t[u],enumerable:!(a=ww(t,u))||a.enumerable});return r};var Bn=(r,t,i)=>(i=r!=null?bw(kw(r)):{},Cw(t||!r||!r.__esModule?tu(i,"default",{value:r,enumerable:!0}):i,r));var Tr=It((au,lu)=>{(function(r,t){typeof au=="object"&&typeof lu<"u"?lu.exports=t():typeof define=="function"&&define.amd?define(t):(r=r||self,r.CodeMirror=t())})(au,function(){"use strict";var r=navigator.userAgent,t=navigator.platform,i=/gecko\/\d/i.test(r),a=/MSIE \d/.test(r),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),c=/Edge\/(\d+)/.exec(r),d=a||u||c,p=d&&(a?document.documentMode||6:+(c||u)[1]),m=!c&&/WebKit\//.test(r),w=m&&/Qt\/\d+\.\d+/.test(r),x=!c&&/Chrome\//.test(r),S=/Opera\//.test(r),T=/Apple Computer/.test(navigator.vendor),M=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),O=/PhantomJS/.test(r),L=T&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),A=/Android/.test(r),I=L||A||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),k=L||/Mac/.test(t),_=/\bCrOS\b/.test(r),P=/win/i.test(t),R=S&&r.match(/Version\/(\d*\.\d*)/);R&&(R=Number(R[1])),R&&R>=15&&(S=!1,m=!0);var j=k&&(w||S&&(R==null||R<12.11)),B=i||d&&p>=9;function K(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var H=function(e,n){var s=e.className,o=K(n).exec(s);if(o){var l=s.slice(o.index+o[0].length);e.className=s.slice(0,o.index)+(l?o[1]+l:"")}};function ie(e){for(var n=e.childNodes.length;n>0;--n)e.removeChild(e.firstChild);return e}function W(e,n){return ie(e).appendChild(n)}function q(e,n,s,o){var l=document.createElement(e);if(s&&(l.className=s),o&&(l.style.cssText=o),typeof n=="string")l.appendChild(document.createTextNode(n));else if(n)for(var f=0;f<n.length;++f)l.appendChild(n[f]);return l}function C(e,n,s,o){var l=q(e,n,s,o);return l.setAttribute("role","presentation"),l}var Z;document.createRange?Z=function(e,n,s,o){var l=document.createRange();return l.setEnd(o||e,s),l.setStart(e,n),l}:Z=function(e,n,s){var o=document.body.createTextRange();try{o.moveToElementText(e.parentNode)}catch{return o}return o.collapse(!0),o.moveEnd("character",s),o.moveStart("character",n),o};function X(e,n){if(n.nodeType==3&&(n=n.parentNode),e.contains)return e.contains(n);do if(n.nodeType==11&&(n=n.host),n==e)return!0;while(n=n.parentNode)}function ce(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function St(e,n){var s=e.className;K(n).test(s)||(e.className+=(s?" ":"")+n)}function Zt(e,n){for(var s=e.split(" "),o=0;o<s.length;o++)s[o]&&!K(s[o]).test(n)&&(n+=" "+s[o]);return n}var Mn=function(e){e.select()};L?Mn=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:d&&(Mn=function(e){try{e.select()}catch{}});function Kr(e){var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,n)}}function Xt(e,n,s){n||(n={});for(var o in e)e.hasOwnProperty(o)&&(s!==!1||!n.hasOwnProperty(o))&&(n[o]=e[o]);return n}function $t(e,n,s,o,l){n==null&&(n=e.search(/[^\s\u00a0]/),n==-1&&(n=e.length));for(var f=o||0,h=l||0;;){var g=e.indexOf("	",f);if(g<0||g>=n)return h+(n-f);h+=g-f,h+=s-h%s,f=g+1}}var Mt=function(){this.id=null,this.f=null,this.time=0,this.handler=Kr(this.onTimeout,this)};Mt.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},Mt.prototype.set=function(e,n){this.f=n;var s=+new Date+e;(!this.id||s<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=s)};function ge(e,n){for(var s=0;s<e.length;++s)if(e[s]==n)return s;return-1}var $e=50,et={toString:function(){return"CodeMirror.Pass"}},ft={scroll:!1},it={origin:"*mouse"},Ge={origin:"+move"};function Vt(e,n,s){for(var o=0,l=0;;){var f=e.indexOf("	",o);f==-1&&(f=e.length);var h=f-o;if(f==e.length||l+h>=n)return o+Math.min(h,n-l);if(l+=f-o,l+=s-l%s,o=f+1,l>=n)return o}}var Yn=[""];function Or(e){for(;Yn.length<=e;)Yn.push(tt(Yn)+" ");return Yn[e]}function tt(e){return e[e.length-1]}function gt(e,n){for(var s=[],o=0;o<e.length;o++)s[o]=n(e[o],o);return s}function Ut(e,n,s){for(var o=0,l=s(n);o<e.length&&s(e[o])<=l;)o++;e.splice(o,0,n)}function On(){}function Fn(e,n){var s;return Object.create?s=Object.create(e):(On.prototype=e,s=new On),n&&Xt(n,s),s}var Jr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ct(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Jr.test(e))}function $(e,n){return n?n.source.indexOf("\\w")>-1&&Ct(e)?!0:n.test(e):Ct(e)}function re(e){for(var n in e)if(e.hasOwnProperty(n)&&e[n])return!1;return!0}var G=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ot(e){return e.charCodeAt(0)>=768&&G.test(e)}function un(e,n,s){for(;(s<0?n>0:n<e.length)&&ot(e.charAt(n));)n+=s;return n}function or(e,n,s){for(var o=n>s?-1:1;;){if(n==s)return n;var l=(n+s)/2,f=o<0?Math.ceil(l):Math.floor(l);if(f==n)return e(f)?n:s;e(f)?s=f:n=f+o}}function ll(e,n,s,o){if(!e)return o(n,s,"ltr",0);for(var l=!1,f=0;f<e.length;++f){var h=e[f];(h.from<s&&h.to>n||n==s&&h.to==n)&&(o(Math.max(h.from,n),Math.min(h.to,s),h.level==1?"rtl":"ltr",f),l=!0)}l||o(n,s,"ltr")}var An=null;function _t(e,n,s){var o;An=null;for(var l=0;l<e.length;++l){var f=e[l];if(f.from<n&&f.to>n)return l;f.to==n&&(f.from!=f.to&&s=="before"?o=l:An=l),f.from==n&&(f.from!=f.to&&s!="before"?o=l:An=l)}return o??An}var Qr=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function s(y){return y<=247?e.charAt(y):1424<=y&&y<=1524?"R":1536<=y&&y<=1785?n.charAt(y-1536):1774<=y&&y<=2220?"r":8192<=y&&y<=8203?"w":y==8204?"b":"L"}var o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,l=/[stwN]/,f=/[LRr]/,h=/[Lb1n]/,g=/[1n]/;function v(y,E,N){this.level=y,this.from=E,this.to=N}return function(y,E){var N=E=="ltr"?"L":"R";if(y.length==0||E=="ltr"&&!o.test(y))return!1;for(var F=y.length,z=[],V=0;V<F;++V)z.push(s(y.charCodeAt(V)));for(var Q=0,ne=N;Q<F;++Q){var oe=z[Q];oe=="m"?z[Q]=ne:ne=oe}for(var ae=0,se=N;ae<F;++ae){var ue=z[ae];ue=="1"&&se=="r"?z[ae]="n":f.test(ue)&&(se=ue,ue=="r"&&(z[ae]="R"))}for(var Fe=1,me=z[0];Fe<F-1;++Fe){var Xe=z[Fe];Xe=="+"&&me=="1"&&z[Fe+1]=="1"?z[Fe]="1":Xe==","&&me==z[Fe+1]&&(me=="1"||me=="n")&&(z[Fe]=me),me=Xe}for(var Tt=0;Tt<F;++Tt){var Jt=z[Tt];if(Jt==",")z[Tt]="N";else if(Jt=="%"){var Pt=void 0;for(Pt=Tt+1;Pt<F&&z[Pt]=="%";++Pt);for(var Tn=Tt&&z[Tt-1]=="!"||Pt<F&&z[Pt]=="1"?"1":"N",vn=Tt;vn<Pt;++vn)z[vn]=Tn;Tt=Pt-1}}for(var Bt=0,yn=N;Bt<F;++Bt){var tn=z[Bt];yn=="L"&&tn=="1"?z[Bt]="L":f.test(tn)&&(yn=tn)}for(var qt=0;qt<F;++qt)if(l.test(z[qt])){var Wt=void 0;for(Wt=qt+1;Wt<F&&l.test(z[Wt]);++Wt);for(var zt=(qt?z[qt-1]:N)=="L",bn=(Wt<F?z[Wt]:N)=="L",$i=zt==bn?zt?"L":"R":N,Hr=qt;Hr<Wt;++Hr)z[Hr]=$i;qt=Wt-1}for(var an=[],pr,Qt=0;Qt<F;)if(h.test(z[Qt])){var Xl=Qt;for(++Qt;Qt<F&&h.test(z[Qt]);++Qt);an.push(new v(0,Xl,Qt))}else{var Cr=Qt,li=an.length,ui=E=="rtl"?1:0;for(++Qt;Qt<F&&z[Qt]!="L";++Qt);for(var fn=Cr;fn<Qt;)if(g.test(z[fn])){Cr<fn&&(an.splice(li,0,new v(1,Cr,fn)),li+=ui);var qi=fn;for(++fn;fn<Qt&&g.test(z[fn]);++fn);an.splice(li,0,new v(2,qi,fn)),li+=ui,Cr=fn}else++fn;Cr<Qt&&an.splice(li,0,new v(1,Cr,Qt))}return E=="ltr"&&(an[0].level==1&&(pr=y.match(/^\s+/))&&(an[0].from=pr[0].length,an.unshift(new v(0,0,pr[0].length))),tt(an).level==1&&(pr=y.match(/\s+$/))&&(tt(an).to-=pr[0].length,an.push(new v(0,F-pr[0].length,F)))),E=="rtl"?an.reverse():an}}();function kn(e,n){var s=e.order;return s==null&&(s=e.order=Qr(e.text,n)),s}var vr=[],Be=function(e,n,s){if(e.addEventListener)e.addEventListener(n,s,!1);else if(e.attachEvent)e.attachEvent("on"+n,s);else{var o=e._handlers||(e._handlers={});o[n]=(o[n]||vr).concat(s)}};function wi(e,n){return e._handlers&&e._handlers[n]||vr}function pn(e,n,s){if(e.removeEventListener)e.removeEventListener(n,s,!1);else if(e.detachEvent)e.detachEvent("on"+n,s);else{var o=e._handlers,l=o&&o[n];if(l){var f=ge(l,s);f>-1&&(o[n]=l.slice(0,f).concat(l.slice(f+1)))}}}function qe(e,n){var s=wi(e,n);if(!!s.length)for(var o=Array.prototype.slice.call(arguments,2),l=0;l<s.length;++l)s[l].apply(null,o)}function Ht(e,n,s){return typeof n=="string"&&(n={type:n,preventDefault:function(){this.defaultPrevented=!0}}),qe(e,s||n.type,e,n),Nn(n)||n.codemirrorIgnore}function xi(e){var n=e._handlers&&e._handlers.cursorActivity;if(!!n)for(var s=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),o=0;o<n.length;++o)ge(s,n[o])==-1&&s.push(n[o])}function en(e,n){return wi(e,n).length>0}function sr(e){e.prototype.on=function(n,s){Be(this,n,s)},e.prototype.off=function(n,s){pn(this,n,s)}}function rn(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ki(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Nn(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function Zr(e){rn(e),ki(e)}function Ar(e){return e.target||e.srcElement}function Ls(e){var n=e.which;return n==null&&(e.button&1?n=1:e.button&2?n=3:e.button&4&&(n=2)),k&&e.ctrlKey&&n==1&&(n=3),n}var co=function(){if(d&&p<9)return!1;var e=q("div");return"draggable"in e||"dragDrop"in e}(),hn;function Es(e){if(hn==null){var n=q("span","\u200B");W(e,q("span",[n,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(hn=n.offsetWidth<=1&&n.offsetHeight>2&&!(d&&p<8))}var s=hn?q("span","\u200B"):q("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return s.setAttribute("cm-text",""),s}var fo;function ar(e){if(fo!=null)return fo;var n=W(e,document.createTextNode("A\u062EA")),s=Z(n,0,1).getBoundingClientRect(),o=Z(n,1,2).getBoundingClientRect();return ie(e),!s||s.left==s.right?!1:fo=o.right-s.right<3}var po=`

b`.split(/\n/).length!=3?function(e){for(var n=0,s=[],o=e.length;n<=o;){var l=e.indexOf(`
`,n);l==-1&&(l=e.length);var f=e.slice(n,e.charAt(l-1)=="\r"?l-1:l),h=f.indexOf("\r");h!=-1?(s.push(f.slice(0,h)),n+=h+1):(s.push(f),n=l+1)}return s}:function(e){return e.split(/\r\n?|\n/)},Ms=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var n;try{n=e.ownerDocument.selection.createRange()}catch{}return!n||n.parentElement()!=e?!1:n.compareEndPoints("StartToEnd",n)!=0},Os=function(){var e=q("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),ho=null;function Nr(e){if(ho!=null)return ho;var n=W(e,q("span","x")),s=n.getBoundingClientRect(),o=Z(n,0,1).getBoundingClientRect();return ho=Math.abs(s.left-o.left)>1}var Hn={},Dn={};function As(e,n){arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Hn[e]=n}function yr(e,n){Dn[e]=n}function Si(e){if(typeof e=="string"&&Dn.hasOwnProperty(e))e=Dn[e];else if(e&&typeof e.name=="string"&&Dn.hasOwnProperty(e.name)){var n=Dn[e.name];typeof n=="string"&&(n={name:n}),e=Fn(n,e),e.name=n.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Si("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Si("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function Ci(e,n){n=Si(n);var s=Hn[n.name];if(!s)return Ci(e,"text/plain");var o=s(e,n);if(Kn.hasOwnProperty(n.name)){var l=Kn[n.name];for(var f in l)!l.hasOwnProperty(f)||(o.hasOwnProperty(f)&&(o["_"+f]=o[f]),o[f]=l[f])}if(o.name=n.name,n.helperType&&(o.helperType=n.helperType),n.modeProps)for(var h in n.modeProps)o[h]=n.modeProps[h];return o}var Kn={};function Jn(e,n){var s=Kn.hasOwnProperty(e)?Kn[e]:Kn[e]={};Xt(n,s)}function Pn(e,n){if(n===!0)return n;if(e.copyState)return e.copyState(n);var s={};for(var o in n){var l=n[o];l instanceof Array&&(l=l.concat([])),s[o]=l}return s}function go(e,n){for(var s;e.innerMode&&(s=e.innerMode(n),!(!s||s.mode==e));)n=s.state,e=s.mode;return s||{mode:e,state:n}}function mo(e,n,s){return e.startState?e.startState(n,s):!0}var Rt=function(e,n,s){this.pos=this.start=0,this.string=e,this.tabSize=n||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=s};Rt.prototype.eol=function(){return this.pos>=this.string.length},Rt.prototype.sol=function(){return this.pos==this.lineStart},Rt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Rt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Rt.prototype.eat=function(e){var n=this.string.charAt(this.pos),s;if(typeof e=="string"?s=n==e:s=n&&(e.test?e.test(n):e(n)),s)return++this.pos,n},Rt.prototype.eatWhile=function(e){for(var n=this.pos;this.eat(e););return this.pos>n},Rt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Rt.prototype.skipToEnd=function(){this.pos=this.string.length},Rt.prototype.skipTo=function(e){var n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0},Rt.prototype.backUp=function(e){this.pos-=e},Rt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=$t(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?$t(this.string,this.lineStart,this.tabSize):0)},Rt.prototype.indentation=function(){return $t(this.string,null,this.tabSize)-(this.lineStart?$t(this.string,this.lineStart,this.tabSize):0)},Rt.prototype.match=function(e,n,s){if(typeof e=="string"){var o=function(h){return s?h.toLowerCase():h},l=this.string.substr(this.pos,e.length);if(o(l)==o(e))return n!==!1&&(this.pos+=e.length),!0}else{var f=this.string.slice(this.pos).match(e);return f&&f.index>0?null:(f&&n!==!1&&(this.pos+=f[0].length),f)}},Rt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Rt.prototype.hideFirstChars=function(e,n){this.lineStart+=e;try{return n()}finally{this.lineStart-=e}},Rt.prototype.lookAhead=function(e){var n=this.lineOracle;return n&&n.lookAhead(e)},Rt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function pe(e,n){if(n-=e.first,n<0||n>=e.size)throw new Error("There is no line "+(n+e.first)+" in the document.");for(var s=e;!s.lines;)for(var o=0;;++o){var l=s.children[o],f=l.chunkSize();if(n<f){s=l;break}n-=f}return s.lines[n]}function lr(e,n,s){var o=[],l=n.line;return e.iter(n.line,s.line+1,function(f){var h=f.text;l==s.line&&(h=h.slice(0,s.ch)),l==n.line&&(h=h.slice(n.ch)),o.push(h),++l}),o}function vo(e,n,s){var o=[];return e.iter(n,s,function(l){o.push(l.text)}),o}function Sn(e,n){var s=n-e.height;if(s)for(var o=e;o;o=o.parent)o.height+=s}function mt(e){if(e.parent==null)return null;for(var n=e.parent,s=ge(n.lines,e),o=n.parent;o;n=o,o=o.parent)for(var l=0;o.children[l]!=n;++l)s+=o.children[l].chunkSize();return s+n.first}function ur(e,n){var s=e.first;e:do{for(var o=0;o<e.children.length;++o){var l=e.children[o],f=l.height;if(n<f){e=l;continue e}n-=f,s+=l.chunkSize()}return s}while(!e.lines);for(var h=0;h<e.lines.length;++h){var g=e.lines[h],v=g.height;if(n<v)break;n-=v}return s+h}function Xr(e,n){return n>=e.first&&n<e.first+e.size}function yo(e,n){return String(e.lineNumberFormatter(n+e.firstLineNumber))}function ee(e,n,s){if(s===void 0&&(s=null),!(this instanceof ee))return new ee(e,n,s);this.line=e,this.ch=n,this.sticky=s}function b(e,n){return e.line-n.line||e.ch-n.ch}function D(e,n){return e.sticky==n.sticky&&b(e,n)==0}function J(e){return ee(e.line,e.ch)}function te(e,n){return b(e,n)<0?n:e}function Ve(e,n){return b(e,n)<0?e:n}function ct(e,n){return Math.max(e.first,Math.min(n,e.first+e.size-1))}function le(e,n){if(n.line<e.first)return ee(e.first,0);var s=e.first+e.size-1;return n.line>s?ee(s,pe(e,s).text.length):on(n,pe(e,n.line).text.length)}function on(e,n){var s=e.ch;return s==null||s>n?ee(e.line,n):s<0?ee(e.line,0):e}function In(e,n){for(var s=[],o=0;o<n.length;o++)s[o]=le(e,n[o]);return s}var Ti=function(e,n){this.state=e,this.lookAhead=n},cr=function(e,n,s,o){this.state=n,this.doc=e,this.line=s,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};cr.prototype.lookAhead=function(e){var n=this.doc.getLine(this.line+e);return n!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),n},cr.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},cr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},cr.fromSaved=function(e,n,s){return n instanceof Ti?new cr(e,Pn(e.mode,n.state),s,n.lookAhead):new cr(e,Pn(e.mode,n),s)},cr.prototype.save=function(e){var n=e!==!1?Pn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ti(n,this.maxLookAhead):n};function vf(e,n,s,o){var l=[e.state.modeGen],f={};Sf(e,n.text,e.doc.mode,s,function(y,E){return l.push(y,E)},f,o);for(var h=s.state,g=function(y){s.baseTokens=l;var E=e.state.overlays[y],N=1,F=0;s.state=!0,Sf(e,n.text,E.mode,s,function(z,V){for(var Q=N;F<z;){var ne=l[N];ne>z&&l.splice(N,1,z,l[N+1],ne),N+=2,F=Math.min(z,ne)}if(!!V)if(E.opaque)l.splice(Q,N-Q,z,"overlay "+V),N=Q+2;else for(;Q<N;Q+=2){var oe=l[Q+1];l[Q+1]=(oe?oe+" ":"")+"overlay "+V}},f),s.state=h,s.baseTokens=null,s.baseTokenPos=1},v=0;v<e.state.overlays.length;++v)g(v);return{styles:l,classes:f.bgClass||f.textClass?f:null}}function yf(e,n,s){if(!n.styles||n.styles[0]!=e.state.modeGen){var o=bo(e,mt(n)),l=n.text.length>e.options.maxHighlightLength&&Pn(e.doc.mode,o.state),f=vf(e,n,o);l&&(o.state=l),n.stateAfter=o.save(!l),n.styles=f.styles,f.classes?n.styleClasses=f.classes:n.styleClasses&&(n.styleClasses=null),s===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return n.styles}function bo(e,n,s){var o=e.doc,l=e.display;if(!o.mode.startState)return new cr(o,!0,n);var f=xy(e,n,s),h=f>o.first&&pe(o,f-1).stateAfter,g=h?cr.fromSaved(o,h,f):new cr(o,mo(o.mode),f);return o.iter(f,n,function(v){ul(e,v.text,g);var y=g.line;v.stateAfter=y==n-1||y%5==0||y>=l.viewFrom&&y<l.viewTo?g.save():null,g.nextLine()}),s&&(o.modeFrontier=g.line),g}function ul(e,n,s,o){var l=e.doc.mode,f=new Rt(n,e.options.tabSize,s);for(f.start=f.pos=o||0,n==""&&bf(l,s.state);!f.eol();)cl(l,f,s.state),f.start=f.pos}function bf(e,n){if(e.blankLine)return e.blankLine(n);if(!!e.innerMode){var s=go(e,n);if(s.mode.blankLine)return s.mode.blankLine(s.state)}}function cl(e,n,s,o){for(var l=0;l<10;l++){o&&(o[0]=go(e,s).mode);var f=e.token(n,s);if(n.pos>n.start)return f}throw new Error("Mode "+e.name+" failed to advance stream.")}var wf=function(e,n,s){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=n||null,this.state=s};function xf(e,n,s,o){var l=e.doc,f=l.mode,h;n=le(l,n);var g=pe(l,n.line),v=bo(e,n.line,s),y=new Rt(g.text,e.options.tabSize,v),E;for(o&&(E=[]);(o||y.pos<n.ch)&&!y.eol();)y.start=y.pos,h=cl(f,y,v.state),o&&E.push(new wf(y,h,Pn(l.mode,v.state)));return o?E:new wf(y,h,v.state)}function kf(e,n){if(e)for(;;){var s=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!s)break;e=e.slice(0,s.index)+e.slice(s.index+s[0].length);var o=s[1]?"bgClass":"textClass";n[o]==null?n[o]=s[2]:new RegExp("(?:^|\\s)"+s[2]+"(?:$|\\s)").test(n[o])||(n[o]+=" "+s[2])}return e}function Sf(e,n,s,o,l,f,h){var g=s.flattenSpans;g==null&&(g=e.options.flattenSpans);var v=0,y=null,E=new Rt(n,e.options.tabSize,o),N,F=e.options.addModeClass&&[null];for(n==""&&kf(bf(s,o.state),f);!E.eol();){if(E.pos>e.options.maxHighlightLength?(g=!1,h&&ul(e,n,o,E.pos),E.pos=n.length,N=null):N=kf(cl(s,E,o.state,F),f),F){var z=F[0].name;z&&(N="m-"+(N?z+" "+N:z))}if(!g||y!=N){for(;v<E.start;)v=Math.min(E.start,v+5e3),l(v,y);y=N}E.start=E.pos}for(;v<E.pos;){var V=Math.min(E.pos,v+5e3);l(V,y),v=V}}function xy(e,n,s){for(var o,l,f=e.doc,h=s?-1:n-(e.doc.mode.innerMode?1e3:100),g=n;g>h;--g){if(g<=f.first)return f.first;var v=pe(f,g-1),y=v.stateAfter;if(y&&(!s||g+(y instanceof Ti?y.lookAhead:0)<=f.modeFrontier))return g;var E=$t(v.text,null,e.options.tabSize);(l==null||o>E)&&(l=g-1,o=E)}return l}function ky(e,n){if(e.modeFrontier=Math.min(e.modeFrontier,n),!(e.highlightFrontier<n-10)){for(var s=e.first,o=n-1;o>s;o--){var l=pe(e,o).stateAfter;if(l&&(!(l instanceof Ti)||o+l.lookAhead<n)){s=o+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,s)}}var Cf=!1,br=!1;function Sy(){Cf=!0}function Cy(){br=!0}function Ns(e,n,s){this.marker=e,this.from=n,this.to=s}function wo(e,n){if(e)for(var s=0;s<e.length;++s){var o=e[s];if(o.marker==n)return o}}function Ty(e,n){for(var s,o=0;o<e.length;++o)e[o]!=n&&(s||(s=[])).push(e[o]);return s}function Ly(e,n,s){var o=s&&window.WeakSet&&(s.markedSpans||(s.markedSpans=new WeakSet));o&&o.has(e.markedSpans)?e.markedSpans.push(n):(e.markedSpans=e.markedSpans?e.markedSpans.concat([n]):[n],o&&o.add(e.markedSpans)),n.marker.attachLine(e)}function Ey(e,n,s){var o;if(e)for(var l=0;l<e.length;++l){var f=e[l],h=f.marker,g=f.from==null||(h.inclusiveLeft?f.from<=n:f.from<n);if(g||f.from==n&&h.type=="bookmark"&&(!s||!f.marker.insertLeft)){var v=f.to==null||(h.inclusiveRight?f.to>=n:f.to>n);(o||(o=[])).push(new Ns(h,f.from,v?null:f.to))}}return o}function My(e,n,s){var o;if(e)for(var l=0;l<e.length;++l){var f=e[l],h=f.marker,g=f.to==null||(h.inclusiveRight?f.to>=n:f.to>n);if(g||f.from==n&&h.type=="bookmark"&&(!s||f.marker.insertLeft)){var v=f.from==null||(h.inclusiveLeft?f.from<=n:f.from<n);(o||(o=[])).push(new Ns(h,v?null:f.from-n,f.to==null?null:f.to-n))}}return o}function fl(e,n){if(n.full)return null;var s=Xr(e,n.from.line)&&pe(e,n.from.line).markedSpans,o=Xr(e,n.to.line)&&pe(e,n.to.line).markedSpans;if(!s&&!o)return null;var l=n.from.ch,f=n.to.ch,h=b(n.from,n.to)==0,g=Ey(s,l,h),v=My(o,f,h),y=n.text.length==1,E=tt(n.text).length+(y?l:0);if(g)for(var N=0;N<g.length;++N){var F=g[N];if(F.to==null){var z=wo(v,F.marker);z?y&&(F.to=z.to==null?null:z.to+E):F.to=l}}if(v)for(var V=0;V<v.length;++V){var Q=v[V];if(Q.to!=null&&(Q.to+=E),Q.from==null){var ne=wo(g,Q.marker);ne||(Q.from=E,y&&(g||(g=[])).push(Q))}else Q.from+=E,y&&(g||(g=[])).push(Q)}g&&(g=Tf(g)),v&&v!=g&&(v=Tf(v));var oe=[g];if(!y){var ae=n.text.length-2,se;if(ae>0&&g)for(var ue=0;ue<g.length;++ue)g[ue].to==null&&(se||(se=[])).push(new Ns(g[ue].marker,null,null));for(var Fe=0;Fe<ae;++Fe)oe.push(se);oe.push(v)}return oe}function Tf(e){for(var n=0;n<e.length;++n){var s=e[n];s.from!=null&&s.from==s.to&&s.marker.clearWhenEmpty!==!1&&e.splice(n--,1)}return e.length?e:null}function Oy(e,n,s){var o=null;if(e.iter(n.line,s.line+1,function(z){if(z.markedSpans)for(var V=0;V<z.markedSpans.length;++V){var Q=z.markedSpans[V].marker;Q.readOnly&&(!o||ge(o,Q)==-1)&&(o||(o=[])).push(Q)}}),!o)return null;for(var l=[{from:n,to:s}],f=0;f<o.length;++f)for(var h=o[f],g=h.find(0),v=0;v<l.length;++v){var y=l[v];if(!(b(y.to,g.from)<0||b(y.from,g.to)>0)){var E=[v,1],N=b(y.from,g.from),F=b(y.to,g.to);(N<0||!h.inclusiveLeft&&!N)&&E.push({from:y.from,to:g.from}),(F>0||!h.inclusiveRight&&!F)&&E.push({from:g.to,to:y.to}),l.splice.apply(l,E),v+=E.length-3}}return l}function Lf(e){var n=e.markedSpans;if(!!n){for(var s=0;s<n.length;++s)n[s].marker.detachLine(e);e.markedSpans=null}}function Ef(e,n){if(!!n){for(var s=0;s<n.length;++s)n[s].marker.attachLine(e);e.markedSpans=n}}function Ds(e){return e.inclusiveLeft?-1:0}function Ps(e){return e.inclusiveRight?1:0}function dl(e,n){var s=e.lines.length-n.lines.length;if(s!=0)return s;var o=e.find(),l=n.find(),f=b(o.from,l.from)||Ds(e)-Ds(n);if(f)return-f;var h=b(o.to,l.to)||Ps(e)-Ps(n);return h||n.id-e.id}function Mf(e,n){var s=br&&e.markedSpans,o;if(s)for(var l=void 0,f=0;f<s.length;++f)l=s[f],l.marker.collapsed&&(n?l.from:l.to)==null&&(!o||dl(o,l.marker)<0)&&(o=l.marker);return o}function Of(e){return Mf(e,!0)}function Is(e){return Mf(e,!1)}function Ay(e,n){var s=br&&e.markedSpans,o;if(s)for(var l=0;l<s.length;++l){var f=s[l];f.marker.collapsed&&(f.from==null||f.from<n)&&(f.to==null||f.to>n)&&(!o||dl(o,f.marker)<0)&&(o=f.marker)}return o}function Af(e,n,s,o,l){var f=pe(e,n),h=br&&f.markedSpans;if(h)for(var g=0;g<h.length;++g){var v=h[g];if(!!v.marker.collapsed){var y=v.marker.find(0),E=b(y.from,s)||Ds(v.marker)-Ds(l),N=b(y.to,o)||Ps(v.marker)-Ps(l);if(!(E>=0&&N<=0||E<=0&&N>=0)&&(E<=0&&(v.marker.inclusiveRight&&l.inclusiveLeft?b(y.to,s)>=0:b(y.to,s)>0)||E>=0&&(v.marker.inclusiveRight&&l.inclusiveLeft?b(y.from,o)<=0:b(y.from,o)<0)))return!0}}}function Qn(e){for(var n;n=Of(e);)e=n.find(-1,!0).line;return e}function Ny(e){for(var n;n=Is(e);)e=n.find(1,!0).line;return e}function Dy(e){for(var n,s;n=Is(e);)e=n.find(1,!0).line,(s||(s=[])).push(e);return s}function pl(e,n){var s=pe(e,n),o=Qn(s);return s==o?n:mt(o)}function Nf(e,n){if(n>e.lastLine())return n;var s=pe(e,n),o;if(!Dr(e,s))return n;for(;o=Is(s);)s=o.find(1,!0).line;return mt(s)+1}function Dr(e,n){var s=br&&n.markedSpans;if(s){for(var o=void 0,l=0;l<s.length;++l)if(o=s[l],!!o.marker.collapsed){if(o.from==null)return!0;if(!o.marker.widgetNode&&o.from==0&&o.marker.inclusiveLeft&&hl(e,n,o))return!0}}}function hl(e,n,s){if(s.to==null){var o=s.marker.find(1,!0);return hl(e,o.line,wo(o.line.markedSpans,s.marker))}if(s.marker.inclusiveRight&&s.to==n.text.length)return!0;for(var l=void 0,f=0;f<n.markedSpans.length;++f)if(l=n.markedSpans[f],l.marker.collapsed&&!l.marker.widgetNode&&l.from==s.to&&(l.to==null||l.to!=s.from)&&(l.marker.inclusiveLeft||s.marker.inclusiveRight)&&hl(e,n,l))return!0}function wr(e){e=Qn(e);for(var n=0,s=e.parent,o=0;o<s.lines.length;++o){var l=s.lines[o];if(l==e)break;n+=l.height}for(var f=s.parent;f;s=f,f=s.parent)for(var h=0;h<f.children.length;++h){var g=f.children[h];if(g==s)break;n+=g.height}return n}function _s(e){if(e.height==0)return 0;for(var n=e.text.length,s,o=e;s=Of(o);){var l=s.find(0,!0);o=l.from.line,n+=l.from.ch-l.to.ch}for(o=e;s=Is(o);){var f=s.find(0,!0);n-=o.text.length-f.from.ch,o=f.to.line,n+=o.text.length-f.to.ch}return n}function gl(e){var n=e.display,s=e.doc;n.maxLine=pe(s,s.first),n.maxLineLength=_s(n.maxLine),n.maxLineChanged=!0,s.iter(function(o){var l=_s(o);l>n.maxLineLength&&(n.maxLineLength=l,n.maxLine=o)})}var Li=function(e,n,s){this.text=e,Ef(this,n),this.height=s?s(this):1};Li.prototype.lineNo=function(){return mt(this)},sr(Li);function Py(e,n,s,o){e.text=n,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Lf(e),Ef(e,s);var l=o?o(e):1;l!=e.height&&Sn(e,l)}function Iy(e){e.parent=null,Lf(e)}var _y={},Ry={};function Df(e,n){if(!e||/^\s*$/.test(e))return null;var s=n.addModeClass?Ry:_y;return s[e]||(s[e]=e.replace(/\S+/g,"cm-$&"))}function Pf(e,n){var s=C("span",null,null,m?"padding-right: .1px":null),o={pre:C("pre",[s],"CodeMirror-line"),content:s,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};n.measure={};for(var l=0;l<=(n.rest?n.rest.length:0);l++){var f=l?n.rest[l-1]:n.line,h=void 0;o.pos=0,o.addToken=jy,ar(e.display.measure)&&(h=kn(f,e.doc.direction))&&(o.addToken=Hy(o.addToken,h)),o.map=[];var g=n!=e.display.externalMeasured&&mt(f);By(f,o,yf(e,f,g)),f.styleClasses&&(f.styleClasses.bgClass&&(o.bgClass=Zt(f.styleClasses.bgClass,o.bgClass||"")),f.styleClasses.textClass&&(o.textClass=Zt(f.styleClasses.textClass,o.textClass||""))),o.map.length==0&&o.map.push(0,0,o.content.appendChild(Es(e.display.measure))),l==0?(n.measure.map=o.map,n.measure.cache={}):((n.measure.maps||(n.measure.maps=[])).push(o.map),(n.measure.caches||(n.measure.caches=[])).push({}))}if(m){var v=o.content.lastChild;(/\bcm-tab\b/.test(v.className)||v.querySelector&&v.querySelector(".cm-tab"))&&(o.content.className="cm-tab-wrap-hack")}return qe(e,"renderLine",e,n.line,o.pre),o.pre.className&&(o.textClass=Zt(o.pre.className,o.textClass||"")),o}function zy(e){var n=q("span","\u2022","cm-invalidchar");return n.title="\\u"+e.charCodeAt(0).toString(16),n.setAttribute("aria-label",n.title),n}function jy(e,n,s,o,l,f,h){if(!!n){var g=e.splitSpaces?Fy(n,e.trailingSpace):n,v=e.cm.state.specialChars,y=!1,E;if(!v.test(n))e.col+=n.length,E=document.createTextNode(g),e.map.push(e.pos,e.pos+n.length,E),d&&p<9&&(y=!0),e.pos+=n.length;else{E=document.createDocumentFragment();for(var N=0;;){v.lastIndex=N;var F=v.exec(n),z=F?F.index-N:n.length-N;if(z){var V=document.createTextNode(g.slice(N,N+z));d&&p<9?E.appendChild(q("span",[V])):E.appendChild(V),e.map.push(e.pos,e.pos+z,V),e.col+=z,e.pos+=z}if(!F)break;N+=z+1;var Q=void 0;if(F[0]=="	"){var ne=e.cm.options.tabSize,oe=ne-e.col%ne;Q=E.appendChild(q("span",Or(oe),"cm-tab")),Q.setAttribute("role","presentation"),Q.setAttribute("cm-text","	"),e.col+=oe}else F[0]=="\r"||F[0]==`
`?(Q=E.appendChild(q("span",F[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),Q.setAttribute("cm-text",F[0]),e.col+=1):(Q=e.cm.options.specialCharPlaceholder(F[0]),Q.setAttribute("cm-text",F[0]),d&&p<9?E.appendChild(q("span",[Q])):E.appendChild(Q),e.col+=1);e.map.push(e.pos,e.pos+1,Q),e.pos++}}if(e.trailingSpace=g.charCodeAt(n.length-1)==32,s||o||l||y||f||h){var ae=s||"";o&&(ae+=o),l&&(ae+=l);var se=q("span",[E],ae,f);if(h)for(var ue in h)h.hasOwnProperty(ue)&&ue!="style"&&ue!="class"&&se.setAttribute(ue,h[ue]);return e.content.appendChild(se)}e.content.appendChild(E)}}function Fy(e,n){if(e.length>1&&!/  /.test(e))return e;for(var s=n,o="",l=0;l<e.length;l++){var f=e.charAt(l);f==" "&&s&&(l==e.length-1||e.charCodeAt(l+1)==32)&&(f="\xA0"),o+=f,s=f==" "}return o}function Hy(e,n){return function(s,o,l,f,h,g,v){l=l?l+" cm-force-border":"cm-force-border";for(var y=s.pos,E=y+o.length;;){for(var N=void 0,F=0;F<n.length&&(N=n[F],!(N.to>y&&N.from<=y));F++);if(N.to>=E)return e(s,o,l,f,h,g,v);e(s,o.slice(0,N.to-y),l,f,null,g,v),f=null,o=o.slice(N.to-y),y=N.to}}}function If(e,n,s,o){var l=!o&&s.widgetNode;l&&e.map.push(e.pos,e.pos+n,l),!o&&e.cm.display.input.needsContentAttribute&&(l||(l=e.content.appendChild(document.createElement("span"))),l.setAttribute("cm-marker",s.id)),l&&(e.cm.display.input.setUneditable(l),e.content.appendChild(l)),e.pos+=n,e.trailingSpace=!1}function By(e,n,s){var o=e.markedSpans,l=e.text,f=0;if(!o){for(var h=1;h<s.length;h+=2)n.addToken(n,l.slice(f,f=s[h]),Df(s[h+1],n.cm.options));return}for(var g=l.length,v=0,y=1,E="",N,F,z=0,V,Q,ne,oe,ae;;){if(z==v){V=Q=ne=F="",ae=null,oe=null,z=1/0;for(var se=[],ue=void 0,Fe=0;Fe<o.length;++Fe){var me=o[Fe],Xe=me.marker;if(Xe.type=="bookmark"&&me.from==v&&Xe.widgetNode)se.push(Xe);else if(me.from<=v&&(me.to==null||me.to>v||Xe.collapsed&&me.to==v&&me.from==v)){if(me.to!=null&&me.to!=v&&z>me.to&&(z=me.to,Q=""),Xe.className&&(V+=" "+Xe.className),Xe.css&&(F=(F?F+";":"")+Xe.css),Xe.startStyle&&me.from==v&&(ne+=" "+Xe.startStyle),Xe.endStyle&&me.to==z&&(ue||(ue=[])).push(Xe.endStyle,me.to),Xe.title&&((ae||(ae={})).title=Xe.title),Xe.attributes)for(var Tt in Xe.attributes)(ae||(ae={}))[Tt]=Xe.attributes[Tt];Xe.collapsed&&(!oe||dl(oe.marker,Xe)<0)&&(oe=me)}else me.from>v&&z>me.from&&(z=me.from)}if(ue)for(var Jt=0;Jt<ue.length;Jt+=2)ue[Jt+1]==z&&(Q+=" "+ue[Jt]);if(!oe||oe.from==v)for(var Pt=0;Pt<se.length;++Pt)If(n,0,se[Pt]);if(oe&&(oe.from||0)==v){if(If(n,(oe.to==null?g+1:oe.to)-v,oe.marker,oe.from==null),oe.to==null)return;oe.to==v&&(oe=!1)}}if(v>=g)break;for(var Tn=Math.min(g,z);;){if(E){var vn=v+E.length;if(!oe){var Bt=vn>Tn?E.slice(0,Tn-v):E;n.addToken(n,Bt,N?N+V:V,ne,v+Bt.length==z?Q:"",F,ae)}if(vn>=Tn){E=E.slice(Tn-v),v=Tn;break}v=vn,ne=""}E=l.slice(f,f=s[y++]),N=Df(s[y++],n.cm.options)}}}function _f(e,n,s){this.line=n,this.rest=Dy(n),this.size=this.rest?mt(tt(this.rest))-s+1:1,this.node=this.text=null,this.hidden=Dr(e,n)}function Rs(e,n,s){for(var o=[],l,f=n;f<s;f=l){var h=new _f(e.doc,pe(e.doc,f),f);l=f+h.size,o.push(h)}return o}var Ei=null;function Wy(e){Ei?Ei.ops.push(e):e.ownsGroup=Ei={ops:[e],delayedCallbacks:[]}}function $y(e){var n=e.delayedCallbacks,s=0;do{for(;s<n.length;s++)n[s].call(null);for(var o=0;o<e.ops.length;o++){var l=e.ops[o];if(l.cursorActivityHandlers)for(;l.cursorActivityCalled<l.cursorActivityHandlers.length;)l.cursorActivityHandlers[l.cursorActivityCalled++].call(null,l.cm)}}while(s<n.length)}function qy(e,n){var s=e.ownsGroup;if(!!s)try{$y(s)}finally{Ei=null,n(s)}}var xo=null;function Gt(e,n){var s=wi(e,n);if(!!s.length){var o=Array.prototype.slice.call(arguments,2),l;Ei?l=Ei.delayedCallbacks:xo?l=xo:(l=xo=[],setTimeout(Vy,0));for(var f=function(g){l.push(function(){return s[g].apply(null,o)})},h=0;h<s.length;++h)f(h)}}function Vy(){var e=xo;xo=null;for(var n=0;n<e.length;++n)e[n]()}function Rf(e,n,s,o){for(var l=0;l<n.changes.length;l++){var f=n.changes[l];f=="text"?Gy(e,n):f=="gutter"?jf(e,n,s,o):f=="class"?ml(e,n):f=="widget"&&Yy(e,n,o)}n.changes=null}function ko(e){return e.node==e.text&&(e.node=q("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),d&&p<8&&(e.node.style.zIndex=2)),e.node}function Uy(e,n){var s=n.bgClass?n.bgClass+" "+(n.line.bgClass||""):n.line.bgClass;if(s&&(s+=" CodeMirror-linebackground"),n.background)s?n.background.className=s:(n.background.parentNode.removeChild(n.background),n.background=null);else if(s){var o=ko(n);n.background=o.insertBefore(q("div",null,s),o.firstChild),e.display.input.setUneditable(n.background)}}function zf(e,n){var s=e.display.externalMeasured;return s&&s.line==n.line?(e.display.externalMeasured=null,n.measure=s.measure,s.built):Pf(e,n)}function Gy(e,n){var s=n.text.className,o=zf(e,n);n.text==n.node&&(n.node=o.pre),n.text.parentNode.replaceChild(o.pre,n.text),n.text=o.pre,o.bgClass!=n.bgClass||o.textClass!=n.textClass?(n.bgClass=o.bgClass,n.textClass=o.textClass,ml(e,n)):s&&(n.text.className=s)}function ml(e,n){Uy(e,n),n.line.wrapClass?ko(n).className=n.line.wrapClass:n.node!=n.text&&(n.node.className="");var s=n.textClass?n.textClass+" "+(n.line.textClass||""):n.line.textClass;n.text.className=s||""}function jf(e,n,s,o){if(n.gutter&&(n.node.removeChild(n.gutter),n.gutter=null),n.gutterBackground&&(n.node.removeChild(n.gutterBackground),n.gutterBackground=null),n.line.gutterClass){var l=ko(n);n.gutterBackground=q("div",null,"CodeMirror-gutter-background "+n.line.gutterClass,"left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),e.display.input.setUneditable(n.gutterBackground),l.insertBefore(n.gutterBackground,n.text)}var f=n.line.gutterMarkers;if(e.options.lineNumbers||f){var h=ko(n),g=n.gutter=q("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(g.setAttribute("aria-hidden","true"),e.display.input.setUneditable(g),h.insertBefore(g,n.text),n.line.gutterClass&&(g.className+=" "+n.line.gutterClass),e.options.lineNumbers&&(!f||!f["CodeMirror-linenumbers"])&&(n.lineNumber=g.appendChild(q("div",yo(e.options,s),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),f)for(var v=0;v<e.display.gutterSpecs.length;++v){var y=e.display.gutterSpecs[v].className,E=f.hasOwnProperty(y)&&f[y];E&&g.appendChild(q("div",[E],"CodeMirror-gutter-elt","left: "+o.gutterLeft[y]+"px; width: "+o.gutterWidth[y]+"px"))}}}function Yy(e,n,s){n.alignable&&(n.alignable=null);for(var o=K("CodeMirror-linewidget"),l=n.node.firstChild,f=void 0;l;l=f)f=l.nextSibling,o.test(l.className)&&n.node.removeChild(l);Ff(e,n,s)}function Ky(e,n,s,o){var l=zf(e,n);return n.text=n.node=l.pre,l.bgClass&&(n.bgClass=l.bgClass),l.textClass&&(n.textClass=l.textClass),ml(e,n),jf(e,n,s,o),Ff(e,n,o),n.node}function Ff(e,n,s){if(Hf(e,n.line,n,s,!0),n.rest)for(var o=0;o<n.rest.length;o++)Hf(e,n.rest[o],n,s,!1)}function Hf(e,n,s,o,l){if(!!n.widgets)for(var f=ko(s),h=0,g=n.widgets;h<g.length;++h){var v=g[h],y=q("div",[v.node],"CodeMirror-linewidget"+(v.className?" "+v.className:""));v.handleMouseEvents||y.setAttribute("cm-ignore-events","true"),Jy(v,y,s,o),e.display.input.setUneditable(y),l&&v.above?f.insertBefore(y,s.gutter||s.text):f.appendChild(y),Gt(v,"redraw")}}function Jy(e,n,s,o){if(e.noHScroll){(s.alignable||(s.alignable=[])).push(n);var l=o.wrapperWidth;n.style.left=o.fixedPos+"px",e.coverGutter||(l-=o.gutterTotalWidth,n.style.paddingLeft=o.gutterTotalWidth+"px"),n.style.width=l+"px"}e.coverGutter&&(n.style.zIndex=5,n.style.position="relative",e.noHScroll||(n.style.marginLeft=-o.gutterTotalWidth+"px"))}function So(e){if(e.height!=null)return e.height;var n=e.doc.cm;if(!n)return 0;if(!X(document.body,e.node)){var s="position: relative;";e.coverGutter&&(s+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),e.noHScroll&&(s+="width: "+n.display.wrapper.clientWidth+"px;"),W(n.display.measure,q("div",[e.node],null,s))}return e.height=e.node.parentNode.offsetHeight}function xr(e,n){for(var s=Ar(n);s!=e.wrapper;s=s.parentNode)if(!s||s.nodeType==1&&s.getAttribute("cm-ignore-events")=="true"||s.parentNode==e.sizer&&s!=e.mover)return!0}function zs(e){return e.lineSpace.offsetTop}function vl(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Bf(e){if(e.cachedPaddingH)return e.cachedPaddingH;var n=W(e.measure,q("pre","x","CodeMirror-line-like")),s=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,o={left:parseInt(s.paddingLeft),right:parseInt(s.paddingRight)};return!isNaN(o.left)&&!isNaN(o.right)&&(e.cachedPaddingH=o),o}function fr(e){return $e-e.display.nativeBarWidth}function ei(e){return e.display.scroller.clientWidth-fr(e)-e.display.barWidth}function yl(e){return e.display.scroller.clientHeight-fr(e)-e.display.barHeight}function Qy(e,n,s){var o=e.options.lineWrapping,l=o&&ei(e);if(!n.measure.heights||o&&n.measure.width!=l){var f=n.measure.heights=[];if(o){n.measure.width=l;for(var h=n.text.firstChild.getClientRects(),g=0;g<h.length-1;g++){var v=h[g],y=h[g+1];Math.abs(v.bottom-y.bottom)>2&&f.push((v.bottom+y.top)/2-s.top)}}f.push(s.bottom-s.top)}}function Wf(e,n,s){if(e.line==n)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var o=0;o<e.rest.length;o++)if(e.rest[o]==n)return{map:e.measure.maps[o],cache:e.measure.caches[o]};for(var l=0;l<e.rest.length;l++)if(mt(e.rest[l])>s)return{map:e.measure.maps[l],cache:e.measure.caches[l],before:!0}}}function Zy(e,n){n=Qn(n);var s=mt(n),o=e.display.externalMeasured=new _f(e.doc,n,s);o.lineN=s;var l=o.built=Pf(e,o);return o.text=l.pre,W(e.display.lineMeasure,l.pre),o}function $f(e,n,s,o){return dr(e,Mi(e,n),s,o)}function bl(e,n){if(n>=e.display.viewFrom&&n<e.display.viewTo)return e.display.view[ri(e,n)];var s=e.display.externalMeasured;if(s&&n>=s.lineN&&n<s.lineN+s.size)return s}function Mi(e,n){var s=mt(n),o=bl(e,s);o&&!o.text?o=null:o&&o.changes&&(Rf(e,o,s,Cl(e)),e.curOp.forceUpdate=!0),o||(o=Zy(e,n));var l=Wf(o,n,s);return{line:n,view:o,rect:null,map:l.map,cache:l.cache,before:l.before,hasHeights:!1}}function dr(e,n,s,o,l){n.before&&(s=-1);var f=s+(o||""),h;return n.cache.hasOwnProperty(f)?h=n.cache[f]:(n.rect||(n.rect=n.view.text.getBoundingClientRect()),n.hasHeights||(Qy(e,n.view,n.rect),n.hasHeights=!0),h=eb(e,n,s,o),h.bogus||(n.cache[f]=h)),{left:h.left,right:h.right,top:l?h.rtop:h.top,bottom:l?h.rbottom:h.bottom}}var qf={left:0,right:0,top:0,bottom:0};function Vf(e,n,s){for(var o,l,f,h,g,v,y=0;y<e.length;y+=3)if(g=e[y],v=e[y+1],n<g?(l=0,f=1,h="left"):n<v?(l=n-g,f=l+1):(y==e.length-3||n==v&&e[y+3]>n)&&(f=v-g,l=f-1,n>=v&&(h="right")),l!=null){if(o=e[y+2],g==v&&s==(o.insertLeft?"left":"right")&&(h=s),s=="left"&&l==0)for(;y&&e[y-2]==e[y-3]&&e[y-1].insertLeft;)o=e[(y-=3)+2],h="left";if(s=="right"&&l==v-g)for(;y<e.length-3&&e[y+3]==e[y+4]&&!e[y+5].insertLeft;)o=e[(y+=3)+2],h="right";break}return{node:o,start:l,end:f,collapse:h,coverStart:g,coverEnd:v}}function Xy(e,n){var s=qf;if(n=="left")for(var o=0;o<e.length&&(s=e[o]).left==s.right;o++);else for(var l=e.length-1;l>=0&&(s=e[l]).left==s.right;l--);return s}function eb(e,n,s,o){var l=Vf(n.map,s,o),f=l.node,h=l.start,g=l.end,v=l.collapse,y;if(f.nodeType==3){for(var E=0;E<4;E++){for(;h&&ot(n.line.text.charAt(l.coverStart+h));)--h;for(;l.coverStart+g<l.coverEnd&&ot(n.line.text.charAt(l.coverStart+g));)++g;if(d&&p<9&&h==0&&g==l.coverEnd-l.coverStart?y=f.parentNode.getBoundingClientRect():y=Xy(Z(f,h,g).getClientRects(),o),y.left||y.right||h==0)break;g=h,h=h-1,v="right"}d&&p<11&&(y=tb(e.display.measure,y))}else{h>0&&(v=o="right");var N;e.options.lineWrapping&&(N=f.getClientRects()).length>1?y=N[o=="right"?N.length-1:0]:y=f.getBoundingClientRect()}if(d&&p<9&&!h&&(!y||!y.left&&!y.right)){var F=f.parentNode.getClientRects()[0];F?y={left:F.left,right:F.left+Ai(e.display),top:F.top,bottom:F.bottom}:y=qf}for(var z=y.top-n.rect.top,V=y.bottom-n.rect.top,Q=(z+V)/2,ne=n.view.measure.heights,oe=0;oe<ne.length-1&&!(Q<ne[oe]);oe++);var ae=oe?ne[oe-1]:0,se=ne[oe],ue={left:(v=="right"?y.right:y.left)-n.rect.left,right:(v=="left"?y.left:y.right)-n.rect.left,top:ae,bottom:se};return!y.left&&!y.right&&(ue.bogus=!0),e.options.singleCursorHeightPerLine||(ue.rtop=z,ue.rbottom=V),ue}function tb(e,n){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Nr(e))return n;var s=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*s,right:n.right*s,top:n.top*o,bottom:n.bottom*o}}function Uf(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var n=0;n<e.rest.length;n++)e.measure.caches[n]={}}function Gf(e){e.display.externalMeasure=null,ie(e.display.lineMeasure);for(var n=0;n<e.display.view.length;n++)Uf(e.display.view[n])}function Co(e){Gf(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Yf(){return x&&A?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Kf(){return x&&A?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function wl(e){var n=Qn(e),s=n.widgets,o=0;if(s)for(var l=0;l<s.length;++l)s[l].above&&(o+=So(s[l]));return o}function js(e,n,s,o,l){if(!l){var f=wl(n);s.top+=f,s.bottom+=f}if(o=="line")return s;o||(o="local");var h=wr(n);if(o=="local"?h+=zs(e.display):h-=e.display.viewOffset,o=="page"||o=="window"){var g=e.display.lineSpace.getBoundingClientRect();h+=g.top+(o=="window"?0:Kf());var v=g.left+(o=="window"?0:Yf());s.left+=v,s.right+=v}return s.top+=h,s.bottom+=h,s}function Jf(e,n,s){if(s=="div")return n;var o=n.left,l=n.top;if(s=="page")o-=Yf(),l-=Kf();else if(s=="local"||!s){var f=e.display.sizer.getBoundingClientRect();o+=f.left,l+=f.top}var h=e.display.lineSpace.getBoundingClientRect();return{left:o-h.left,top:l-h.top}}function Fs(e,n,s,o,l){return o||(o=pe(e.doc,n.line)),js(e,o,$f(e,o,n.ch,l),s)}function Zn(e,n,s,o,l,f){o=o||pe(e.doc,n.line),l||(l=Mi(e,o));function h(V,Q){var ne=dr(e,l,V,Q?"right":"left",f);return Q?ne.left=ne.right:ne.right=ne.left,js(e,o,ne,s)}var g=kn(o,e.doc.direction),v=n.ch,y=n.sticky;if(v>=o.text.length?(v=o.text.length,y="before"):v<=0&&(v=0,y="after"),!g)return h(y=="before"?v-1:v,y=="before");function E(V,Q,ne){var oe=g[Q],ae=oe.level==1;return h(ne?V-1:V,ae!=ne)}var N=_t(g,v,y),F=An,z=E(v,N,y=="before");return F!=null&&(z.other=E(v,F,y!="before")),z}function Qf(e,n){var s=0;n=le(e.doc,n),e.options.lineWrapping||(s=Ai(e.display)*n.ch);var o=pe(e.doc,n.line),l=wr(o)+zs(e.display);return{left:s,right:s,top:l,bottom:l+o.height}}function xl(e,n,s,o,l){var f=ee(e,n,s);return f.xRel=l,o&&(f.outside=o),f}function kl(e,n,s){var o=e.doc;if(s+=e.display.viewOffset,s<0)return xl(o.first,0,null,-1,-1);var l=ur(o,s),f=o.first+o.size-1;if(l>f)return xl(o.first+o.size-1,pe(o,f).text.length,null,1,1);n<0&&(n=0);for(var h=pe(o,l);;){var g=nb(e,h,l,n,s),v=Ay(h,g.ch+(g.xRel>0||g.outside>0?1:0));if(!v)return g;var y=v.find(1);if(y.line==l)return y;h=pe(o,l=y.line)}}function Zf(e,n,s,o){o-=wl(n);var l=n.text.length,f=or(function(h){return dr(e,s,h-1).bottom<=o},l,0);return l=or(function(h){return dr(e,s,h).top>o},f,l),{begin:f,end:l}}function Xf(e,n,s,o){s||(s=Mi(e,n));var l=js(e,n,dr(e,s,o),"line").top;return Zf(e,n,s,l)}function Sl(e,n,s,o){return e.bottom<=s?!1:e.top>s?!0:(o?e.left:e.right)>n}function nb(e,n,s,o,l){l-=wr(n);var f=Mi(e,n),h=wl(n),g=0,v=n.text.length,y=!0,E=kn(n,e.doc.direction);if(E){var N=(e.options.lineWrapping?ib:rb)(e,n,s,f,E,o,l);y=N.level!=1,g=y?N.from:N.to-1,v=y?N.to:N.from-1}var F=null,z=null,V=or(function(Fe){var me=dr(e,f,Fe);return me.top+=h,me.bottom+=h,Sl(me,o,l,!1)?(me.top<=l&&me.left<=o&&(F=Fe,z=me),!0):!1},g,v),Q,ne,oe=!1;if(z){var ae=o-z.left<z.right-o,se=ae==y;V=F+(se?0:1),ne=se?"after":"before",Q=ae?z.left:z.right}else{!y&&(V==v||V==g)&&V++,ne=V==0?"after":V==n.text.length?"before":dr(e,f,V-(y?1:0)).bottom+h<=l==y?"after":"before";var ue=Zn(e,ee(s,V,ne),"line",n,f);Q=ue.left,oe=l<ue.top?-1:l>=ue.bottom?1:0}return V=un(n.text,V,1),xl(s,V,ne,oe,o-Q)}function rb(e,n,s,o,l,f,h){var g=or(function(N){var F=l[N],z=F.level!=1;return Sl(Zn(e,ee(s,z?F.to:F.from,z?"before":"after"),"line",n,o),f,h,!0)},0,l.length-1),v=l[g];if(g>0){var y=v.level!=1,E=Zn(e,ee(s,y?v.from:v.to,y?"after":"before"),"line",n,o);Sl(E,f,h,!0)&&E.top>h&&(v=l[g-1])}return v}function ib(e,n,s,o,l,f,h){var g=Zf(e,n,o,h),v=g.begin,y=g.end;/\s/.test(n.text.charAt(y-1))&&y--;for(var E=null,N=null,F=0;F<l.length;F++){var z=l[F];if(!(z.from>=y||z.to<=v)){var V=z.level!=1,Q=dr(e,o,V?Math.min(y,z.to)-1:Math.max(v,z.from)).right,ne=Q<f?f-Q+1e9:Q-f;(!E||N>ne)&&(E=z,N=ne)}}return E||(E=l[l.length-1]),E.from<v&&(E={from:v,to:E.to,level:E.level}),E.to>y&&(E={from:E.from,to:y,level:E.level}),E}var ti;function Oi(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(ti==null){ti=q("pre",null,"CodeMirror-line-like");for(var n=0;n<49;++n)ti.appendChild(document.createTextNode("x")),ti.appendChild(q("br"));ti.appendChild(document.createTextNode("x"))}W(e.measure,ti);var s=ti.offsetHeight/50;return s>3&&(e.cachedTextHeight=s),ie(e.measure),s||1}function Ai(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var n=q("span","xxxxxxxxxx"),s=q("pre",[n],"CodeMirror-line-like");W(e.measure,s);var o=n.getBoundingClientRect(),l=(o.right-o.left)/10;return l>2&&(e.cachedCharWidth=l),l||10}function Cl(e){for(var n=e.display,s={},o={},l=n.gutters.clientLeft,f=n.gutters.firstChild,h=0;f;f=f.nextSibling,++h){var g=e.display.gutterSpecs[h].className;s[g]=f.offsetLeft+f.clientLeft+l,o[g]=f.clientWidth}return{fixedPos:Tl(n),gutterTotalWidth:n.gutters.offsetWidth,gutterLeft:s,gutterWidth:o,wrapperWidth:n.wrapper.clientWidth}}function Tl(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ed(e){var n=Oi(e.display),s=e.options.lineWrapping,o=s&&Math.max(5,e.display.scroller.clientWidth/Ai(e.display)-3);return function(l){if(Dr(e.doc,l))return 0;var f=0;if(l.widgets)for(var h=0;h<l.widgets.length;h++)l.widgets[h].height&&(f+=l.widgets[h].height);return s?f+(Math.ceil(l.text.length/o)||1)*n:f+n}}function Ll(e){var n=e.doc,s=ed(e);n.iter(function(o){var l=s(o);l!=o.height&&Sn(o,l)})}function ni(e,n,s,o){var l=e.display;if(!s&&Ar(n).getAttribute("cm-not-content")=="true")return null;var f,h,g=l.lineSpace.getBoundingClientRect();try{f=n.clientX-g.left,h=n.clientY-g.top}catch{return null}var v=kl(e,f,h),y;if(o&&v.xRel>0&&(y=pe(e.doc,v.line).text).length==v.ch){var E=$t(y,y.length,e.options.tabSize)-y.length;v=ee(v.line,Math.max(0,Math.round((f-Bf(e.display).left)/Ai(e.display))-E))}return v}function ri(e,n){if(n>=e.display.viewTo||(n-=e.display.viewFrom,n<0))return null;for(var s=e.display.view,o=0;o<s.length;o++)if(n-=s[o].size,n<0)return o}function gn(e,n,s,o){n==null&&(n=e.doc.first),s==null&&(s=e.doc.first+e.doc.size),o||(o=0);var l=e.display;if(o&&s<l.viewTo&&(l.updateLineNumbers==null||l.updateLineNumbers>n)&&(l.updateLineNumbers=n),e.curOp.viewChanged=!0,n>=l.viewTo)br&&pl(e.doc,n)<l.viewTo&&Ir(e);else if(s<=l.viewFrom)br&&Nf(e.doc,s+o)>l.viewFrom?Ir(e):(l.viewFrom+=o,l.viewTo+=o);else if(n<=l.viewFrom&&s>=l.viewTo)Ir(e);else if(n<=l.viewFrom){var f=Hs(e,s,s+o,1);f?(l.view=l.view.slice(f.index),l.viewFrom=f.lineN,l.viewTo+=o):Ir(e)}else if(s>=l.viewTo){var h=Hs(e,n,n,-1);h?(l.view=l.view.slice(0,h.index),l.viewTo=h.lineN):Ir(e)}else{var g=Hs(e,n,n,-1),v=Hs(e,s,s+o,1);g&&v?(l.view=l.view.slice(0,g.index).concat(Rs(e,g.lineN,v.lineN)).concat(l.view.slice(v.index)),l.viewTo+=o):Ir(e)}var y=l.externalMeasured;y&&(s<y.lineN?y.lineN+=o:n<y.lineN+y.size&&(l.externalMeasured=null))}function Pr(e,n,s){e.curOp.viewChanged=!0;var o=e.display,l=e.display.externalMeasured;if(l&&n>=l.lineN&&n<l.lineN+l.size&&(o.externalMeasured=null),!(n<o.viewFrom||n>=o.viewTo)){var f=o.view[ri(e,n)];if(f.node!=null){var h=f.changes||(f.changes=[]);ge(h,s)==-1&&h.push(s)}}}function Ir(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Hs(e,n,s,o){var l=ri(e,n),f,h=e.display.view;if(!br||s==e.doc.first+e.doc.size)return{index:l,lineN:s};for(var g=e.display.viewFrom,v=0;v<l;v++)g+=h[v].size;if(g!=n){if(o>0){if(l==h.length-1)return null;f=g+h[l].size-n,l++}else f=g-n;n+=f,s+=f}for(;pl(e.doc,s)!=s;){if(l==(o<0?0:h.length-1))return null;s+=o*h[l-(o<0?1:0)].size,l+=o}return{index:l,lineN:s}}function ob(e,n,s){var o=e.display,l=o.view;l.length==0||n>=o.viewTo||s<=o.viewFrom?(o.view=Rs(e,n,s),o.viewFrom=n):(o.viewFrom>n?o.view=Rs(e,n,o.viewFrom).concat(o.view):o.viewFrom<n&&(o.view=o.view.slice(ri(e,n))),o.viewFrom=n,o.viewTo<s?o.view=o.view.concat(Rs(e,o.viewTo,s)):o.viewTo>s&&(o.view=o.view.slice(0,ri(e,s)))),o.viewTo=s}function td(e){for(var n=e.display.view,s=0,o=0;o<n.length;o++){var l=n[o];!l.hidden&&(!l.node||l.changes)&&++s}return s}function To(e){e.display.input.showSelection(e.display.input.prepareSelection())}function nd(e,n){n===void 0&&(n=!0);var s=e.doc,o={},l=o.cursors=document.createDocumentFragment(),f=o.selection=document.createDocumentFragment(),h=e.options.$customCursor;h&&(n=!0);for(var g=0;g<s.sel.ranges.length;g++)if(!(!n&&g==s.sel.primIndex)){var v=s.sel.ranges[g];if(!(v.from().line>=e.display.viewTo||v.to().line<e.display.viewFrom)){var y=v.empty();if(h){var E=h(e,v);E&&El(e,E,l)}else(y||e.options.showCursorWhenSelecting)&&El(e,v.head,l);y||sb(e,v,f)}}return o}function El(e,n,s){var o=Zn(e,n,"div",null,null,!e.options.singleCursorHeightPerLine),l=s.appendChild(q("div","\xA0","CodeMirror-cursor"));if(l.style.left=o.left+"px",l.style.top=o.top+"px",l.style.height=Math.max(0,o.bottom-o.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var f=Fs(e,n,"div",null,null),h=f.right-f.left;l.style.width=(h>0?h:e.defaultCharWidth())+"px"}if(o.other){var g=s.appendChild(q("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));g.style.display="",g.style.left=o.other.left+"px",g.style.top=o.other.top+"px",g.style.height=(o.other.bottom-o.other.top)*.85+"px"}}function Bs(e,n){return e.top-n.top||e.left-n.left}function sb(e,n,s){var o=e.display,l=e.doc,f=document.createDocumentFragment(),h=Bf(e.display),g=h.left,v=Math.max(o.sizerWidth,ei(e)-o.sizer.offsetLeft)-h.right,y=l.direction=="ltr";function E(se,ue,Fe,me){ue<0&&(ue=0),ue=Math.round(ue),me=Math.round(me),f.appendChild(q("div",null,"CodeMirror-selected","position: absolute; left: "+se+`px;
                             top: `+ue+"px; width: "+(Fe??v-se)+`px;
                             height: `+(me-ue)+"px"))}function N(se,ue,Fe){var me=pe(l,se),Xe=me.text.length,Tt,Jt;function Pt(Bt,yn){return Fs(e,ee(se,Bt),"div",me,yn)}function Tn(Bt,yn,tn){var qt=Xf(e,me,null,Bt),Wt=yn=="ltr"==(tn=="after")?"left":"right",zt=tn=="after"?qt.begin:qt.end-(/\s/.test(me.text.charAt(qt.end-1))?2:1);return Pt(zt,Wt)[Wt]}var vn=kn(me,l.direction);return ll(vn,ue||0,Fe??Xe,function(Bt,yn,tn,qt){var Wt=tn=="ltr",zt=Pt(Bt,Wt?"left":"right"),bn=Pt(yn-1,Wt?"right":"left"),$i=ue==null&&Bt==0,Hr=Fe==null&&yn==Xe,an=qt==0,pr=!vn||qt==vn.length-1;if(bn.top-zt.top<=3){var Qt=(y?$i:Hr)&&an,Xl=(y?Hr:$i)&&pr,Cr=Qt?g:(Wt?zt:bn).left,li=Xl?v:(Wt?bn:zt).right;E(Cr,zt.top,li-Cr,zt.bottom)}else{var ui,fn,qi,eu;Wt?(ui=y&&$i&&an?g:zt.left,fn=y?v:Tn(Bt,tn,"before"),qi=y?g:Tn(yn,tn,"after"),eu=y&&Hr&&pr?v:bn.right):(ui=y?Tn(Bt,tn,"before"):g,fn=!y&&$i&&an?v:zt.right,qi=!y&&Hr&&pr?g:bn.left,eu=y?Tn(yn,tn,"after"):v),E(ui,zt.top,fn-ui,zt.bottom),zt.bottom<bn.top&&E(g,zt.bottom,null,bn.top),E(qi,bn.top,eu-qi,bn.bottom)}(!Tt||Bs(zt,Tt)<0)&&(Tt=zt),Bs(bn,Tt)<0&&(Tt=bn),(!Jt||Bs(zt,Jt)<0)&&(Jt=zt),Bs(bn,Jt)<0&&(Jt=bn)}),{start:Tt,end:Jt}}var F=n.from(),z=n.to();if(F.line==z.line)N(F.line,F.ch,z.ch);else{var V=pe(l,F.line),Q=pe(l,z.line),ne=Qn(V)==Qn(Q),oe=N(F.line,F.ch,ne?V.text.length+1:null).end,ae=N(z.line,ne?0:null,z.ch).start;ne&&(oe.top<ae.top-2?(E(oe.right,oe.top,null,oe.bottom),E(g,ae.top,ae.left,ae.bottom)):E(oe.right,oe.top,ae.left-oe.right,oe.bottom)),oe.bottom<ae.top&&E(g,oe.bottom,null,ae.top)}s.appendChild(f)}function Ml(e){if(!!e.state.focused){var n=e.display;clearInterval(n.blinker);var s=!0;n.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?n.blinker=setInterval(function(){e.hasFocus()||Ni(e),n.cursorDiv.style.visibility=(s=!s)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(n.cursorDiv.style.visibility="hidden")}}function rd(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Al(e))}function Ol(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Ni(e))},100)}function Al(e,n){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(qe(e,"focus",e,n),e.state.focused=!0,St(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),m&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Ml(e))}function Ni(e,n){e.state.delayingBlurEvent||(e.state.focused&&(qe(e,"blur",e,n),e.state.focused=!1,H(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ws(e){for(var n=e.display,s=n.lineDiv.offsetTop,o=Math.max(0,n.scroller.getBoundingClientRect().top),l=n.lineDiv.getBoundingClientRect().top,f=0,h=0;h<n.view.length;h++){var g=n.view[h],v=e.options.lineWrapping,y=void 0,E=0;if(!g.hidden){if(l+=g.line.height,d&&p<8){var N=g.node.offsetTop+g.node.offsetHeight;y=N-s,s=N}else{var F=g.node.getBoundingClientRect();y=F.bottom-F.top,!v&&g.text.firstChild&&(E=g.text.firstChild.getBoundingClientRect().right-F.left-1)}var z=g.line.height-y;if((z>.005||z<-.005)&&(l<o&&(f-=z),Sn(g.line,y),id(g.line),g.rest))for(var V=0;V<g.rest.length;V++)id(g.rest[V]);if(E>e.display.sizerWidth){var Q=Math.ceil(E/Ai(e.display));Q>e.display.maxLineLength&&(e.display.maxLineLength=Q,e.display.maxLine=g.line,e.display.maxLineChanged=!0)}}}Math.abs(f)>2&&(n.scroller.scrollTop+=f)}function id(e){if(e.widgets)for(var n=0;n<e.widgets.length;++n){var s=e.widgets[n],o=s.node.parentNode;o&&(s.height=o.offsetHeight)}}function $s(e,n,s){var o=s&&s.top!=null?Math.max(0,s.top):e.scroller.scrollTop;o=Math.floor(o-zs(e));var l=s&&s.bottom!=null?s.bottom:o+e.wrapper.clientHeight,f=ur(n,o),h=ur(n,l);if(s&&s.ensure){var g=s.ensure.from.line,v=s.ensure.to.line;g<f?(f=g,h=ur(n,wr(pe(n,g))+e.wrapper.clientHeight)):Math.min(v,n.lastLine())>=h&&(f=ur(n,wr(pe(n,v))-e.wrapper.clientHeight),h=v)}return{from:f,to:Math.max(h,f+1)}}function ab(e,n){if(!Ht(e,"scrollCursorIntoView")){var s=e.display,o=s.sizer.getBoundingClientRect(),l=null;if(n.top+o.top<0?l=!0:n.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),l!=null&&!O){var f=q("div","\u200B",null,`position: absolute;
                         top: `+(n.top-s.viewOffset-zs(e.display))+`px;
                         height: `+(n.bottom-n.top+fr(e)+s.barHeight)+`px;
                         left: `+n.left+"px; width: "+Math.max(2,n.right-n.left)+"px;");e.display.lineSpace.appendChild(f),f.scrollIntoView(l),e.display.lineSpace.removeChild(f)}}}function lb(e,n,s,o){o==null&&(o=0);var l;!e.options.lineWrapping&&n==s&&(s=n.sticky=="before"?ee(n.line,n.ch+1,"before"):n,n=n.ch?ee(n.line,n.sticky=="before"?n.ch-1:n.ch,"after"):n);for(var f=0;f<5;f++){var h=!1,g=Zn(e,n),v=!s||s==n?g:Zn(e,s);l={left:Math.min(g.left,v.left),top:Math.min(g.top,v.top)-o,right:Math.max(g.left,v.left),bottom:Math.max(g.bottom,v.bottom)+o};var y=Nl(e,l),E=e.doc.scrollTop,N=e.doc.scrollLeft;if(y.scrollTop!=null&&(Eo(e,y.scrollTop),Math.abs(e.doc.scrollTop-E)>1&&(h=!0)),y.scrollLeft!=null&&(ii(e,y.scrollLeft),Math.abs(e.doc.scrollLeft-N)>1&&(h=!0)),!h)break}return l}function ub(e,n){var s=Nl(e,n);s.scrollTop!=null&&Eo(e,s.scrollTop),s.scrollLeft!=null&&ii(e,s.scrollLeft)}function Nl(e,n){var s=e.display,o=Oi(e.display);n.top<0&&(n.top=0);var l=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:s.scroller.scrollTop,f=yl(e),h={};n.bottom-n.top>f&&(n.bottom=n.top+f);var g=e.doc.height+vl(s),v=n.top<o,y=n.bottom>g-o;if(n.top<l)h.scrollTop=v?0:n.top;else if(n.bottom>l+f){var E=Math.min(n.top,(y?g:n.bottom)-f);E!=l&&(h.scrollTop=E)}var N=e.options.fixedGutter?0:s.gutters.offsetWidth,F=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:s.scroller.scrollLeft-N,z=ei(e)-s.gutters.offsetWidth,V=n.right-n.left>z;return V&&(n.right=n.left+z),n.left<10?h.scrollLeft=0:n.left<F?h.scrollLeft=Math.max(0,n.left+N-(V?0:10)):n.right>z+F-3&&(h.scrollLeft=n.right+(V?0:10)-z),h}function Dl(e,n){n!=null&&(qs(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Di(e){qs(e);var n=e.getCursor();e.curOp.scrollToPos={from:n,to:n,margin:e.options.cursorScrollMargin}}function Lo(e,n,s){(n!=null||s!=null)&&qs(e),n!=null&&(e.curOp.scrollLeft=n),s!=null&&(e.curOp.scrollTop=s)}function cb(e,n){qs(e),e.curOp.scrollToPos=n}function qs(e){var n=e.curOp.scrollToPos;if(n){e.curOp.scrollToPos=null;var s=Qf(e,n.from),o=Qf(e,n.to);od(e,s,o,n.margin)}}function od(e,n,s,o){var l=Nl(e,{left:Math.min(n.left,s.left),top:Math.min(n.top,s.top)-o,right:Math.max(n.right,s.right),bottom:Math.max(n.bottom,s.bottom)+o});Lo(e,l.scrollLeft,l.scrollTop)}function Eo(e,n){Math.abs(e.doc.scrollTop-n)<2||(i||Il(e,{top:n}),sd(e,n,!0),i&&Il(e),Ao(e,100))}function sd(e,n,s){n=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,n)),!(e.display.scroller.scrollTop==n&&!s)&&(e.doc.scrollTop=n,e.display.scrollbars.setScrollTop(n),e.display.scroller.scrollTop!=n&&(e.display.scroller.scrollTop=n))}function ii(e,n,s,o){n=Math.max(0,Math.min(n,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((s?n==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-n)<2)&&!o)&&(e.doc.scrollLeft=n,fd(e),e.display.scroller.scrollLeft!=n&&(e.display.scroller.scrollLeft=n),e.display.scrollbars.setScrollLeft(n))}function Mo(e){var n=e.display,s=n.gutters.offsetWidth,o=Math.round(e.doc.height+vl(e.display));return{clientHeight:n.scroller.clientHeight,viewHeight:n.wrapper.clientHeight,scrollWidth:n.scroller.scrollWidth,clientWidth:n.scroller.clientWidth,viewWidth:n.wrapper.clientWidth,barLeft:e.options.fixedGutter?s:0,docHeight:o,scrollHeight:o+fr(e)+n.barHeight,nativeBarWidth:n.nativeBarWidth,gutterWidth:s}}var oi=function(e,n,s){this.cm=s;var o=this.vert=q("div",[q("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),l=this.horiz=q("div",[q("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=l.tabIndex=-1,e(o),e(l),Be(o,"scroll",function(){o.clientHeight&&n(o.scrollTop,"vertical")}),Be(l,"scroll",function(){l.clientWidth&&n(l.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,d&&p<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};oi.prototype.update=function(e){var n=e.scrollWidth>e.clientWidth+1,s=e.scrollHeight>e.clientHeight+1,o=e.nativeBarWidth;if(s){this.vert.style.display="block",this.vert.style.bottom=n?o+"px":"0";var l=e.viewHeight-(n?o:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+l)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(n){this.horiz.style.display="block",this.horiz.style.right=s?o+"px":"0",this.horiz.style.left=e.barLeft+"px";var f=e.viewWidth-e.barLeft-(s?o:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+f)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(o==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:s?o:0,bottom:n?o:0}},oi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},oi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},oi.prototype.zeroWidthHack=function(){var e=k&&!M?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Mt,this.disableVert=new Mt},oi.prototype.enableZeroWidthBar=function(e,n,s){e.style.pointerEvents="auto";function o(){var l=e.getBoundingClientRect(),f=s=="vert"?document.elementFromPoint(l.right-1,(l.top+l.bottom)/2):document.elementFromPoint((l.right+l.left)/2,l.bottom-1);f!=e?e.style.pointerEvents="none":n.set(1e3,o)}n.set(1e3,o)},oi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Oo=function(){};Oo.prototype.update=function(){return{bottom:0,right:0}},Oo.prototype.setScrollLeft=function(){},Oo.prototype.setScrollTop=function(){},Oo.prototype.clear=function(){};function Pi(e,n){n||(n=Mo(e));var s=e.display.barWidth,o=e.display.barHeight;ad(e,n);for(var l=0;l<4&&s!=e.display.barWidth||o!=e.display.barHeight;l++)s!=e.display.barWidth&&e.options.lineWrapping&&Ws(e),ad(e,Mo(e)),s=e.display.barWidth,o=e.display.barHeight}function ad(e,n){var s=e.display,o=s.scrollbars.update(n);s.sizer.style.paddingRight=(s.barWidth=o.right)+"px",s.sizer.style.paddingBottom=(s.barHeight=o.bottom)+"px",s.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(s.scrollbarFiller.style.display="block",s.scrollbarFiller.style.height=o.bottom+"px",s.scrollbarFiller.style.width=o.right+"px"):s.scrollbarFiller.style.display="",o.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(s.gutterFiller.style.display="block",s.gutterFiller.style.height=o.bottom+"px",s.gutterFiller.style.width=n.gutterWidth+"px"):s.gutterFiller.style.display=""}var ld={native:oi,null:Oo};function ud(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&H(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ld[e.options.scrollbarStyle](function(n){e.display.wrapper.insertBefore(n,e.display.scrollbarFiller),Be(n,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),n.setAttribute("cm-not-content","true")},function(n,s){s=="horizontal"?ii(e,n):Eo(e,n)},e),e.display.scrollbars.addClass&&St(e.display.wrapper,e.display.scrollbars.addClass)}var fb=0;function si(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++fb,markArrays:null},Wy(e.curOp)}function ai(e){var n=e.curOp;n&&qy(n,function(s){for(var o=0;o<s.ops.length;o++)s.ops[o].cm.curOp=null;db(s)})}function db(e){for(var n=e.ops,s=0;s<n.length;s++)pb(n[s]);for(var o=0;o<n.length;o++)hb(n[o]);for(var l=0;l<n.length;l++)gb(n[l]);for(var f=0;f<n.length;f++)mb(n[f]);for(var h=0;h<n.length;h++)vb(n[h])}function pb(e){var n=e.cm,s=n.display;bb(n),e.updateMaxLine&&gl(n),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<s.viewFrom||e.scrollToPos.to.line>=s.viewTo)||s.maxLineChanged&&n.options.lineWrapping,e.update=e.mustUpdate&&new Vs(n,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function hb(e){e.updatedDisplay=e.mustUpdate&&Pl(e.cm,e.update)}function gb(e){var n=e.cm,s=n.display;e.updatedDisplay&&Ws(n),e.barMeasure=Mo(n),s.maxLineChanged&&!n.options.lineWrapping&&(e.adjustWidthTo=$f(n,s.maxLine,s.maxLine.text.length).left+3,n.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(s.scroller.clientWidth,s.sizer.offsetLeft+e.adjustWidthTo+fr(n)+n.display.barWidth),e.maxScrollLeft=Math.max(0,s.sizer.offsetLeft+e.adjustWidthTo-ei(n))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=s.input.prepareSelection())}function mb(e){var n=e.cm;e.adjustWidthTo!=null&&(n.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<n.doc.scrollLeft&&ii(n,Math.min(n.display.scroller.scrollLeft,e.maxScrollLeft),!0),n.display.maxLineChanged=!1);var s=e.focus&&e.focus==ce();e.preparedSelection&&n.display.input.showSelection(e.preparedSelection,s),(e.updatedDisplay||e.startHeight!=n.doc.height)&&Pi(n,e.barMeasure),e.updatedDisplay&&Rl(n,e.barMeasure),e.selectionChanged&&Ml(n),n.state.focused&&e.updateInput&&n.display.input.reset(e.typing),s&&rd(e.cm)}function vb(e){var n=e.cm,s=n.display,o=n.doc;if(e.updatedDisplay&&cd(n,e.update),s.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(s.wheelStartX=s.wheelStartY=null),e.scrollTop!=null&&sd(n,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&ii(n,e.scrollLeft,!0,!0),e.scrollToPos){var l=lb(n,le(o,e.scrollToPos.from),le(o,e.scrollToPos.to),e.scrollToPos.margin);ab(n,l)}var f=e.maybeHiddenMarkers,h=e.maybeUnhiddenMarkers;if(f)for(var g=0;g<f.length;++g)f[g].lines.length||qe(f[g],"hide");if(h)for(var v=0;v<h.length;++v)h[v].lines.length&&qe(h[v],"unhide");s.wrapper.offsetHeight&&(o.scrollTop=n.display.scroller.scrollTop),e.changeObjs&&qe(n,"changes",n,e.changeObjs),e.update&&e.update.finish()}function Cn(e,n){if(e.curOp)return n();si(e);try{return n()}finally{ai(e)}}function Yt(e,n){return function(){if(e.curOp)return n.apply(e,arguments);si(e);try{return n.apply(e,arguments)}finally{ai(e)}}}function cn(e){return function(){if(this.curOp)return e.apply(this,arguments);si(this);try{return e.apply(this,arguments)}finally{ai(this)}}}function Kt(e){return function(){var n=this.cm;if(!n||n.curOp)return e.apply(this,arguments);si(n);try{return e.apply(this,arguments)}finally{ai(n)}}}function Ao(e,n){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(n,Kr(yb,e))}function yb(e){var n=e.doc;if(!(n.highlightFrontier>=e.display.viewTo)){var s=+new Date+e.options.workTime,o=bo(e,n.highlightFrontier),l=[];n.iter(o.line,Math.min(n.first+n.size,e.display.viewTo+500),function(f){if(o.line>=e.display.viewFrom){var h=f.styles,g=f.text.length>e.options.maxHighlightLength?Pn(n.mode,o.state):null,v=vf(e,f,o,!0);g&&(o.state=g),f.styles=v.styles;var y=f.styleClasses,E=v.classes;E?f.styleClasses=E:y&&(f.styleClasses=null);for(var N=!h||h.length!=f.styles.length||y!=E&&(!y||!E||y.bgClass!=E.bgClass||y.textClass!=E.textClass),F=0;!N&&F<h.length;++F)N=h[F]!=f.styles[F];N&&l.push(o.line),f.stateAfter=o.save(),o.nextLine()}else f.text.length<=e.options.maxHighlightLength&&ul(e,f.text,o),f.stateAfter=o.line%5==0?o.save():null,o.nextLine();if(+new Date>s)return Ao(e,e.options.workDelay),!0}),n.highlightFrontier=o.line,n.modeFrontier=Math.max(n.modeFrontier,o.line),l.length&&Cn(e,function(){for(var f=0;f<l.length;f++)Pr(e,l[f],"text")})}}var Vs=function(e,n,s){var o=e.display;this.viewport=n,this.visible=$s(o,e.doc,n),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=ei(e),this.force=s,this.dims=Cl(e),this.events=[]};Vs.prototype.signal=function(e,n){en(e,n)&&this.events.push(arguments)},Vs.prototype.finish=function(){for(var e=0;e<this.events.length;e++)qe.apply(null,this.events[e])};function bb(e){var n=e.display;!n.scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=fr(e)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=fr(e)+"px",n.scrollbarsClipped=!0)}function wb(e){if(e.hasFocus())return null;var n=ce();if(!n||!X(e.display.lineDiv,n))return null;var s={activeElt:n};if(window.getSelection){var o=window.getSelection();o.anchorNode&&o.extend&&X(e.display.lineDiv,o.anchorNode)&&(s.anchorNode=o.anchorNode,s.anchorOffset=o.anchorOffset,s.focusNode=o.focusNode,s.focusOffset=o.focusOffset)}return s}function xb(e){if(!(!e||!e.activeElt||e.activeElt==ce())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&X(document.body,e.anchorNode)&&X(document.body,e.focusNode))){var n=window.getSelection(),s=document.createRange();s.setEnd(e.anchorNode,e.anchorOffset),s.collapse(!1),n.removeAllRanges(),n.addRange(s),n.extend(e.focusNode,e.focusOffset)}}function Pl(e,n){var s=e.display,o=e.doc;if(n.editorIsHidden)return Ir(e),!1;if(!n.force&&n.visible.from>=s.viewFrom&&n.visible.to<=s.viewTo&&(s.updateLineNumbers==null||s.updateLineNumbers>=s.viewTo)&&s.renderedView==s.view&&td(e)==0)return!1;dd(e)&&(Ir(e),n.dims=Cl(e));var l=o.first+o.size,f=Math.max(n.visible.from-e.options.viewportMargin,o.first),h=Math.min(l,n.visible.to+e.options.viewportMargin);s.viewFrom<f&&f-s.viewFrom<20&&(f=Math.max(o.first,s.viewFrom)),s.viewTo>h&&s.viewTo-h<20&&(h=Math.min(l,s.viewTo)),br&&(f=pl(e.doc,f),h=Nf(e.doc,h));var g=f!=s.viewFrom||h!=s.viewTo||s.lastWrapHeight!=n.wrapperHeight||s.lastWrapWidth!=n.wrapperWidth;ob(e,f,h),s.viewOffset=wr(pe(e.doc,s.viewFrom)),e.display.mover.style.top=s.viewOffset+"px";var v=td(e);if(!g&&v==0&&!n.force&&s.renderedView==s.view&&(s.updateLineNumbers==null||s.updateLineNumbers>=s.viewTo))return!1;var y=wb(e);return v>4&&(s.lineDiv.style.display="none"),kb(e,s.updateLineNumbers,n.dims),v>4&&(s.lineDiv.style.display=""),s.renderedView=s.view,xb(y),ie(s.cursorDiv),ie(s.selectionDiv),s.gutters.style.height=s.sizer.style.minHeight=0,g&&(s.lastWrapHeight=n.wrapperHeight,s.lastWrapWidth=n.wrapperWidth,Ao(e,400)),s.updateLineNumbers=null,!0}function cd(e,n){for(var s=n.viewport,o=!0;;o=!1){if(!o||!e.options.lineWrapping||n.oldDisplayWidth==ei(e)){if(s&&s.top!=null&&(s={top:Math.min(e.doc.height+vl(e.display)-yl(e),s.top)}),n.visible=$s(e.display,e.doc,s),n.visible.from>=e.display.viewFrom&&n.visible.to<=e.display.viewTo)break}else o&&(n.visible=$s(e.display,e.doc,s));if(!Pl(e,n))break;Ws(e);var l=Mo(e);To(e),Pi(e,l),Rl(e,l),n.force=!1}n.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(n.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Il(e,n){var s=new Vs(e,n);if(Pl(e,s)){Ws(e),cd(e,s);var o=Mo(e);To(e),Pi(e,o),Rl(e,o),s.finish()}}function kb(e,n,s){var o=e.display,l=e.options.lineNumbers,f=o.lineDiv,h=f.firstChild;function g(V){var Q=V.nextSibling;return m&&k&&e.display.currentWheelTarget==V?V.style.display="none":V.parentNode.removeChild(V),Q}for(var v=o.view,y=o.viewFrom,E=0;E<v.length;E++){var N=v[E];if(!N.hidden)if(!N.node||N.node.parentNode!=f){var F=Ky(e,N,y,s);f.insertBefore(F,h)}else{for(;h!=N.node;)h=g(h);var z=l&&n!=null&&n<=y&&N.lineNumber;N.changes&&(ge(N.changes,"gutter")>-1&&(z=!1),Rf(e,N,y,s)),z&&(ie(N.lineNumber),N.lineNumber.appendChild(document.createTextNode(yo(e.options,y)))),h=N.node.nextSibling}y+=N.size}for(;h;)h=g(h)}function _l(e){var n=e.gutters.offsetWidth;e.sizer.style.marginLeft=n+"px",Gt(e,"gutterChanged",e)}function Rl(e,n){e.display.sizer.style.minHeight=n.docHeight+"px",e.display.heightForcer.style.top=n.docHeight+"px",e.display.gutters.style.height=n.docHeight+e.display.barHeight+fr(e)+"px"}function fd(e){var n=e.display,s=n.view;if(!(!n.alignWidgets&&(!n.gutters.firstChild||!e.options.fixedGutter))){for(var o=Tl(n)-n.scroller.scrollLeft+e.doc.scrollLeft,l=n.gutters.offsetWidth,f=o+"px",h=0;h<s.length;h++)if(!s[h].hidden){e.options.fixedGutter&&(s[h].gutter&&(s[h].gutter.style.left=f),s[h].gutterBackground&&(s[h].gutterBackground.style.left=f));var g=s[h].alignable;if(g)for(var v=0;v<g.length;v++)g[v].style.left=f}e.options.fixedGutter&&(n.gutters.style.left=o+l+"px")}}function dd(e){if(!e.options.lineNumbers)return!1;var n=e.doc,s=yo(e.options,n.first+n.size-1),o=e.display;if(s.length!=o.lineNumChars){var l=o.measure.appendChild(q("div",[q("div",s)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=l.firstChild.offsetWidth,h=l.offsetWidth-f;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(f,o.lineGutter.offsetWidth-h)+1,o.lineNumWidth=o.lineNumInnerWidth+h,o.lineNumChars=o.lineNumInnerWidth?s.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",_l(e.display),!0}return!1}function zl(e,n){for(var s=[],o=!1,l=0;l<e.length;l++){var f=e[l],h=null;if(typeof f!="string"&&(h=f.style,f=f.className),f=="CodeMirror-linenumbers")if(n)o=!0;else continue;s.push({className:f,style:h})}return n&&!o&&s.push({className:"CodeMirror-linenumbers",style:null}),s}function pd(e){var n=e.gutters,s=e.gutterSpecs;ie(n),e.lineGutter=null;for(var o=0;o<s.length;++o){var l=s[o],f=l.className,h=l.style,g=n.appendChild(q("div",null,"CodeMirror-gutter "+f));h&&(g.style.cssText=h),f=="CodeMirror-linenumbers"&&(e.lineGutter=g,g.style.width=(e.lineNumWidth||1)+"px")}n.style.display=s.length?"":"none",_l(e)}function No(e){pd(e.display),gn(e),fd(e)}function Sb(e,n,s,o){var l=this;this.input=s,l.scrollbarFiller=q("div",null,"CodeMirror-scrollbar-filler"),l.scrollbarFiller.setAttribute("cm-not-content","true"),l.gutterFiller=q("div",null,"CodeMirror-gutter-filler"),l.gutterFiller.setAttribute("cm-not-content","true"),l.lineDiv=C("div",null,"CodeMirror-code"),l.selectionDiv=q("div",null,null,"position: relative; z-index: 1"),l.cursorDiv=q("div",null,"CodeMirror-cursors"),l.measure=q("div",null,"CodeMirror-measure"),l.lineMeasure=q("div",null,"CodeMirror-measure"),l.lineSpace=C("div",[l.measure,l.lineMeasure,l.selectionDiv,l.cursorDiv,l.lineDiv],null,"position: relative; outline: none");var f=C("div",[l.lineSpace],"CodeMirror-lines");l.mover=q("div",[f],null,"position: relative"),l.sizer=q("div",[l.mover],"CodeMirror-sizer"),l.sizerWidth=null,l.heightForcer=q("div",null,null,"position: absolute; height: "+$e+"px; width: 1px;"),l.gutters=q("div",null,"CodeMirror-gutters"),l.lineGutter=null,l.scroller=q("div",[l.sizer,l.heightForcer,l.gutters],"CodeMirror-scroll"),l.scroller.setAttribute("tabIndex","-1"),l.wrapper=q("div",[l.scrollbarFiller,l.gutterFiller,l.scroller],"CodeMirror"),l.wrapper.setAttribute("translate","no"),d&&p<8&&(l.gutters.style.zIndex=-1,l.scroller.style.paddingRight=0),!m&&!(i&&I)&&(l.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(l.wrapper):e(l.wrapper)),l.viewFrom=l.viewTo=n.first,l.reportedViewFrom=l.reportedViewTo=n.first,l.view=[],l.renderedView=null,l.externalMeasured=null,l.viewOffset=0,l.lastWrapHeight=l.lastWrapWidth=0,l.updateLineNumbers=null,l.nativeBarWidth=l.barHeight=l.barWidth=0,l.scrollbarsClipped=!1,l.lineNumWidth=l.lineNumInnerWidth=l.lineNumChars=null,l.alignWidgets=!1,l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.maxLine=null,l.maxLineLength=0,l.maxLineChanged=!1,l.wheelDX=l.wheelDY=l.wheelStartX=l.wheelStartY=null,l.shift=!1,l.selForContextMenu=null,l.activeTouch=null,l.gutterSpecs=zl(o.gutters,o.lineNumbers),pd(l),s.init(l)}var Us=0,kr=null;d?kr=-.53:i?kr=15:x?kr=-.7:T&&(kr=-1/3);function hd(e){var n=e.wheelDeltaX,s=e.wheelDeltaY;return n==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),s==null&&e.detail&&e.axis==e.VERTICAL_AXIS?s=e.detail:s==null&&(s=e.wheelDelta),{x:n,y:s}}function Cb(e){var n=hd(e);return n.x*=kr,n.y*=kr,n}function gd(e,n){var s=hd(n),o=s.x,l=s.y,f=kr;n.deltaMode===0&&(o=n.deltaX,l=n.deltaY,f=1);var h=e.display,g=h.scroller,v=g.scrollWidth>g.clientWidth,y=g.scrollHeight>g.clientHeight;if(!!(o&&v||l&&y)){if(l&&k&&m){e:for(var E=n.target,N=h.view;E!=g;E=E.parentNode)for(var F=0;F<N.length;F++)if(N[F].node==E){e.display.currentWheelTarget=E;break e}}if(o&&!i&&!S&&f!=null){l&&y&&Eo(e,Math.max(0,g.scrollTop+l*f)),ii(e,Math.max(0,g.scrollLeft+o*f)),(!l||l&&y)&&rn(n),h.wheelStartX=null;return}if(l&&f!=null){var z=l*f,V=e.doc.scrollTop,Q=V+h.wrapper.clientHeight;z<0?V=Math.max(0,V+z-50):Q=Math.min(e.doc.height,Q+z+50),Il(e,{top:V,bottom:Q})}Us<20&&n.deltaMode!==0&&(h.wheelStartX==null?(h.wheelStartX=g.scrollLeft,h.wheelStartY=g.scrollTop,h.wheelDX=o,h.wheelDY=l,setTimeout(function(){if(h.wheelStartX!=null){var ne=g.scrollLeft-h.wheelStartX,oe=g.scrollTop-h.wheelStartY,ae=oe&&h.wheelDY&&oe/h.wheelDY||ne&&h.wheelDX&&ne/h.wheelDX;h.wheelStartX=h.wheelStartY=null,ae&&(kr=(kr*Us+ae)/(Us+1),++Us)}},200)):(h.wheelDX+=o,h.wheelDY+=l))}}var _n=function(e,n){this.ranges=e,this.primIndex=n};_n.prototype.primary=function(){return this.ranges[this.primIndex]},_n.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var s=this.ranges[n],o=e.ranges[n];if(!D(s.anchor,o.anchor)||!D(s.head,o.head))return!1}return!0},_n.prototype.deepCopy=function(){for(var e=[],n=0;n<this.ranges.length;n++)e[n]=new vt(J(this.ranges[n].anchor),J(this.ranges[n].head));return new _n(e,this.primIndex)},_n.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},_n.prototype.contains=function(e,n){n||(n=e);for(var s=0;s<this.ranges.length;s++){var o=this.ranges[s];if(b(n,o.from())>=0&&b(e,o.to())<=0)return s}return-1};var vt=function(e,n){this.anchor=e,this.head=n};vt.prototype.from=function(){return Ve(this.anchor,this.head)},vt.prototype.to=function(){return te(this.anchor,this.head)},vt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Xn(e,n,s){var o=e&&e.options.selectionsMayTouch,l=n[s];n.sort(function(F,z){return b(F.from(),z.from())}),s=ge(n,l);for(var f=1;f<n.length;f++){var h=n[f],g=n[f-1],v=b(g.to(),h.from());if(o&&!h.empty()?v>0:v>=0){var y=Ve(g.from(),h.from()),E=te(g.to(),h.to()),N=g.empty()?h.from()==h.head:g.from()==g.head;f<=s&&--s,n.splice(--f,2,new vt(N?E:y,N?y:E))}}return new _n(n,s)}function _r(e,n){return new _n([new vt(e,n||e)],0)}function Rr(e){return e.text?ee(e.from.line+e.text.length-1,tt(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function md(e,n){if(b(e,n.from)<0)return e;if(b(e,n.to)<=0)return Rr(n);var s=e.line+n.text.length-(n.to.line-n.from.line)-1,o=e.ch;return e.line==n.to.line&&(o+=Rr(n).ch-n.to.ch),ee(s,o)}function jl(e,n){for(var s=[],o=0;o<e.sel.ranges.length;o++){var l=e.sel.ranges[o];s.push(new vt(md(l.anchor,n),md(l.head,n)))}return Xn(e.cm,s,e.sel.primIndex)}function vd(e,n,s){return e.line==n.line?ee(s.line,e.ch-n.ch+s.ch):ee(s.line+(e.line-n.line),e.ch)}function Tb(e,n,s){for(var o=[],l=ee(e.first,0),f=l,h=0;h<n.length;h++){var g=n[h],v=vd(g.from,l,f),y=vd(Rr(g),l,f);if(l=g.to,f=y,s=="around"){var E=e.sel.ranges[h],N=b(E.head,E.anchor)<0;o[h]=new vt(N?y:v,N?v:y)}else o[h]=new vt(v,v)}return new _n(o,e.sel.primIndex)}function Fl(e){e.doc.mode=Ci(e.options,e.doc.modeOption),Do(e)}function Do(e){e.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Ao(e,100),e.state.modeGen++,e.curOp&&gn(e)}function yd(e,n){return n.from.ch==0&&n.to.ch==0&&tt(n.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Hl(e,n,s,o){function l(ae){return s?s[ae]:null}function f(ae,se,ue){Py(ae,se,ue,o),Gt(ae,"change",ae,n)}function h(ae,se){for(var ue=[],Fe=ae;Fe<se;++Fe)ue.push(new Li(y[Fe],l(Fe),o));return ue}var g=n.from,v=n.to,y=n.text,E=pe(e,g.line),N=pe(e,v.line),F=tt(y),z=l(y.length-1),V=v.line-g.line;if(n.full)e.insert(0,h(0,y.length)),e.remove(y.length,e.size-y.length);else if(yd(e,n)){var Q=h(0,y.length-1);f(N,N.text,z),V&&e.remove(g.line,V),Q.length&&e.insert(g.line,Q)}else if(E==N)if(y.length==1)f(E,E.text.slice(0,g.ch)+F+E.text.slice(v.ch),z);else{var ne=h(1,y.length-1);ne.push(new Li(F+E.text.slice(v.ch),z,o)),f(E,E.text.slice(0,g.ch)+y[0],l(0)),e.insert(g.line+1,ne)}else if(y.length==1)f(E,E.text.slice(0,g.ch)+y[0]+N.text.slice(v.ch),l(0)),e.remove(g.line+1,V);else{f(E,E.text.slice(0,g.ch)+y[0],l(0)),f(N,F+N.text.slice(v.ch),z);var oe=h(1,y.length-1);V>1&&e.remove(g.line+1,V-1),e.insert(g.line+1,oe)}Gt(e,"change",e,n)}function zr(e,n,s){function o(l,f,h){if(l.linked)for(var g=0;g<l.linked.length;++g){var v=l.linked[g];if(v.doc!=f){var y=h&&v.sharedHist;s&&!y||(n(v.doc,y),o(v.doc,l,y))}}}o(e,null,!0)}function bd(e,n){if(n.cm)throw new Error("This document is already in use.");e.doc=n,n.cm=e,Ll(e),Fl(e),wd(e),e.options.direction=n.direction,e.options.lineWrapping||gl(e),e.options.mode=n.modeOption,gn(e)}function wd(e){(e.doc.direction=="rtl"?St:H)(e.display.lineDiv,"CodeMirror-rtl")}function Lb(e){Cn(e,function(){wd(e),gn(e)})}function Gs(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Bl(e,n){var s={from:J(n.from),to:Rr(n),text:lr(e,n.from,n.to)};return Sd(e,s,n.from.line,n.to.line+1),zr(e,function(o){return Sd(o,s,n.from.line,n.to.line+1)},!0),s}function xd(e){for(;e.length;){var n=tt(e);if(n.ranges)e.pop();else break}}function Eb(e,n){if(n)return xd(e.done),tt(e.done);if(e.done.length&&!tt(e.done).ranges)return tt(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),tt(e.done)}function kd(e,n,s,o){var l=e.history;l.undone.length=0;var f=+new Date,h,g;if((l.lastOp==o||l.lastOrigin==n.origin&&n.origin&&(n.origin.charAt(0)=="+"&&l.lastModTime>f-(e.cm?e.cm.options.historyEventDelay:500)||n.origin.charAt(0)=="*"))&&(h=Eb(l,l.lastOp==o)))g=tt(h.changes),b(n.from,n.to)==0&&b(n.from,g.to)==0?g.to=Rr(n):h.changes.push(Bl(e,n));else{var v=tt(l.done);for((!v||!v.ranges)&&Ys(e.sel,l.done),h={changes:[Bl(e,n)],generation:l.generation},l.done.push(h);l.done.length>l.undoDepth;)l.done.shift(),l.done[0].ranges||l.done.shift()}l.done.push(s),l.generation=++l.maxGeneration,l.lastModTime=l.lastSelTime=f,l.lastOp=l.lastSelOp=o,l.lastOrigin=l.lastSelOrigin=n.origin,g||qe(e,"historyAdded")}function Mb(e,n,s,o){var l=n.charAt(0);return l=="*"||l=="+"&&s.ranges.length==o.ranges.length&&s.somethingSelected()==o.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ob(e,n,s,o){var l=e.history,f=o&&o.origin;s==l.lastSelOp||f&&l.lastSelOrigin==f&&(l.lastModTime==l.lastSelTime&&l.lastOrigin==f||Mb(e,f,tt(l.done),n))?l.done[l.done.length-1]=n:Ys(n,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=f,l.lastSelOp=s,o&&o.clearRedo!==!1&&xd(l.undone)}function Ys(e,n){var s=tt(n);s&&s.ranges&&s.equals(e)||n.push(e)}function Sd(e,n,s,o){var l=n["spans_"+e.id],f=0;e.iter(Math.max(e.first,s),Math.min(e.first+e.size,o),function(h){h.markedSpans&&((l||(l=n["spans_"+e.id]={}))[f]=h.markedSpans),++f})}function Ab(e){if(!e)return null;for(var n,s=0;s<e.length;++s)e[s].marker.explicitlyCleared?n||(n=e.slice(0,s)):n&&n.push(e[s]);return n?n.length?n:null:e}function Nb(e,n){var s=n["spans_"+e.id];if(!s)return null;for(var o=[],l=0;l<n.text.length;++l)o.push(Ab(s[l]));return o}function Cd(e,n){var s=Nb(e,n),o=fl(e,n);if(!s)return o;if(!o)return s;for(var l=0;l<s.length;++l){var f=s[l],h=o[l];if(f&&h){e:for(var g=0;g<h.length;++g){for(var v=h[g],y=0;y<f.length;++y)if(f[y].marker==v.marker)continue e;f.push(v)}}else h&&(s[l]=h)}return s}function Ii(e,n,s){for(var o=[],l=0;l<e.length;++l){var f=e[l];if(f.ranges){o.push(s?_n.prototype.deepCopy.call(f):f);continue}var h=f.changes,g=[];o.push({changes:g});for(var v=0;v<h.length;++v){var y=h[v],E=void 0;if(g.push({from:y.from,to:y.to,text:y.text}),n)for(var N in y)(E=N.match(/^spans_(\d+)$/))&&ge(n,Number(E[1]))>-1&&(tt(g)[N]=y[N],delete y[N])}}return o}function Wl(e,n,s,o){if(o){var l=e.anchor;if(s){var f=b(n,l)<0;f!=b(s,l)<0?(l=n,n=s):f!=b(n,s)<0&&(n=s)}return new vt(l,n)}else return new vt(s||n,n)}function Ks(e,n,s,o,l){l==null&&(l=e.cm&&(e.cm.display.shift||e.extend)),sn(e,new _n([Wl(e.sel.primary(),n,s,l)],0),o)}function Td(e,n,s){for(var o=[],l=e.cm&&(e.cm.display.shift||e.extend),f=0;f<e.sel.ranges.length;f++)o[f]=Wl(e.sel.ranges[f],n[f],null,l);var h=Xn(e.cm,o,e.sel.primIndex);sn(e,h,s)}function $l(e,n,s,o){var l=e.sel.ranges.slice(0);l[n]=s,sn(e,Xn(e.cm,l,e.sel.primIndex),o)}function Ld(e,n,s,o){sn(e,_r(n,s),o)}function Db(e,n,s){var o={ranges:n.ranges,update:function(l){this.ranges=[];for(var f=0;f<l.length;f++)this.ranges[f]=new vt(le(e,l[f].anchor),le(e,l[f].head))},origin:s&&s.origin};return qe(e,"beforeSelectionChange",e,o),e.cm&&qe(e.cm,"beforeSelectionChange",e.cm,o),o.ranges!=n.ranges?Xn(e.cm,o.ranges,o.ranges.length-1):n}function Ed(e,n,s){var o=e.history.done,l=tt(o);l&&l.ranges?(o[o.length-1]=n,Js(e,n,s)):sn(e,n,s)}function sn(e,n,s){Js(e,n,s),Ob(e,e.sel,e.cm?e.cm.curOp.id:NaN,s)}function Js(e,n,s){(en(e,"beforeSelectionChange")||e.cm&&en(e.cm,"beforeSelectionChange"))&&(n=Db(e,n,s));var o=s&&s.bias||(b(n.primary().head,e.sel.primary().head)<0?-1:1);Md(e,Ad(e,n,o,!0)),!(s&&s.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Di(e.cm)}function Md(e,n){n.equals(e.sel)||(e.sel=n,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,xi(e.cm)),Gt(e,"cursorActivity",e))}function Od(e){Md(e,Ad(e,e.sel,null,!1))}function Ad(e,n,s,o){for(var l,f=0;f<n.ranges.length;f++){var h=n.ranges[f],g=n.ranges.length==e.sel.ranges.length&&e.sel.ranges[f],v=Qs(e,h.anchor,g&&g.anchor,s,o),y=Qs(e,h.head,g&&g.head,s,o);(l||v!=h.anchor||y!=h.head)&&(l||(l=n.ranges.slice(0,f)),l[f]=new vt(v,y))}return l?Xn(e.cm,l,n.primIndex):n}function _i(e,n,s,o,l){var f=pe(e,n.line);if(f.markedSpans)for(var h=0;h<f.markedSpans.length;++h){var g=f.markedSpans[h],v=g.marker,y="selectLeft"in v?!v.selectLeft:v.inclusiveLeft,E="selectRight"in v?!v.selectRight:v.inclusiveRight;if((g.from==null||(y?g.from<=n.ch:g.from<n.ch))&&(g.to==null||(E?g.to>=n.ch:g.to>n.ch))){if(l&&(qe(v,"beforeCursorEnter"),v.explicitlyCleared))if(f.markedSpans){--h;continue}else break;if(!v.atomic)continue;if(s){var N=v.find(o<0?1:-1),F=void 0;if((o<0?E:y)&&(N=Nd(e,N,-o,N&&N.line==n.line?f:null)),N&&N.line==n.line&&(F=b(N,s))&&(o<0?F<0:F>0))return _i(e,N,n,o,l)}var z=v.find(o<0?-1:1);return(o<0?y:E)&&(z=Nd(e,z,o,z.line==n.line?f:null)),z?_i(e,z,n,o,l):null}}return n}function Qs(e,n,s,o,l){var f=o||1,h=_i(e,n,s,f,l)||!l&&_i(e,n,s,f,!0)||_i(e,n,s,-f,l)||!l&&_i(e,n,s,-f,!0);return h||(e.cantEdit=!0,ee(e.first,0))}function Nd(e,n,s,o){return s<0&&n.ch==0?n.line>e.first?le(e,ee(n.line-1)):null:s>0&&n.ch==(o||pe(e,n.line)).text.length?n.line<e.first+e.size-1?ee(n.line+1,0):null:new ee(n.line,n.ch+s)}function Dd(e){e.setSelection(ee(e.firstLine(),0),ee(e.lastLine()),ft)}function Pd(e,n,s){var o={canceled:!1,from:n.from,to:n.to,text:n.text,origin:n.origin,cancel:function(){return o.canceled=!0}};return s&&(o.update=function(l,f,h,g){l&&(o.from=le(e,l)),f&&(o.to=le(e,f)),h&&(o.text=h),g!==void 0&&(o.origin=g)}),qe(e,"beforeChange",e,o),e.cm&&qe(e.cm,"beforeChange",e.cm,o),o.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Ri(e,n,s){if(e.cm){if(!e.cm.curOp)return Yt(e.cm,Ri)(e,n,s);if(e.cm.state.suppressEdits)return}if(!((en(e,"beforeChange")||e.cm&&en(e.cm,"beforeChange"))&&(n=Pd(e,n,!0),!n))){var o=Cf&&!s&&Oy(e,n.from,n.to);if(o)for(var l=o.length-1;l>=0;--l)Id(e,{from:o[l].from,to:o[l].to,text:l?[""]:n.text,origin:n.origin});else Id(e,n)}}function Id(e,n){if(!(n.text.length==1&&n.text[0]==""&&b(n.from,n.to)==0)){var s=jl(e,n);kd(e,n,s,e.cm?e.cm.curOp.id:NaN),Po(e,n,s,fl(e,n));var o=[];zr(e,function(l,f){!f&&ge(o,l.history)==-1&&(jd(l.history,n),o.push(l.history)),Po(l,n,null,fl(l,n))})}}function Zs(e,n,s){var o=e.cm&&e.cm.state.suppressEdits;if(!(o&&!s)){for(var l=e.history,f,h=e.sel,g=n=="undo"?l.done:l.undone,v=n=="undo"?l.undone:l.done,y=0;y<g.length&&(f=g[y],!(s?f.ranges&&!f.equals(e.sel):!f.ranges));y++);if(y!=g.length){for(l.lastOrigin=l.lastSelOrigin=null;;)if(f=g.pop(),f.ranges){if(Ys(f,v),s&&!f.equals(e.sel)){sn(e,f,{clearRedo:!1});return}h=f}else if(o){g.push(f);return}else break;var E=[];Ys(h,v),v.push({changes:E,generation:l.generation}),l.generation=f.generation||++l.maxGeneration;for(var N=en(e,"beforeChange")||e.cm&&en(e.cm,"beforeChange"),F=function(Q){var ne=f.changes[Q];if(ne.origin=n,N&&!Pd(e,ne,!1))return g.length=0,{};E.push(Bl(e,ne));var oe=Q?jl(e,ne):tt(g);Po(e,ne,oe,Cd(e,ne)),!Q&&e.cm&&e.cm.scrollIntoView({from:ne.from,to:Rr(ne)});var ae=[];zr(e,function(se,ue){!ue&&ge(ae,se.history)==-1&&(jd(se.history,ne),ae.push(se.history)),Po(se,ne,null,Cd(se,ne))})},z=f.changes.length-1;z>=0;--z){var V=F(z);if(V)return V.v}}}}function _d(e,n){if(n!=0&&(e.first+=n,e.sel=new _n(gt(e.sel.ranges,function(l){return new vt(ee(l.anchor.line+n,l.anchor.ch),ee(l.head.line+n,l.head.ch))}),e.sel.primIndex),e.cm)){gn(e.cm,e.first,e.first-n,n);for(var s=e.cm.display,o=s.viewFrom;o<s.viewTo;o++)Pr(e.cm,o,"gutter")}}function Po(e,n,s,o){if(e.cm&&!e.cm.curOp)return Yt(e.cm,Po)(e,n,s,o);if(n.to.line<e.first){_d(e,n.text.length-1-(n.to.line-n.from.line));return}if(!(n.from.line>e.lastLine())){if(n.from.line<e.first){var l=n.text.length-1-(e.first-n.from.line);_d(e,l),n={from:ee(e.first,0),to:ee(n.to.line+l,n.to.ch),text:[tt(n.text)],origin:n.origin}}var f=e.lastLine();n.to.line>f&&(n={from:n.from,to:ee(f,pe(e,f).text.length),text:[n.text[0]],origin:n.origin}),n.removed=lr(e,n.from,n.to),s||(s=jl(e,n)),e.cm?Pb(e.cm,n,o):Hl(e,n,o),Js(e,s,ft),e.cantEdit&&Qs(e,ee(e.firstLine(),0))&&(e.cantEdit=!1)}}function Pb(e,n,s){var o=e.doc,l=e.display,f=n.from,h=n.to,g=!1,v=f.line;e.options.lineWrapping||(v=mt(Qn(pe(o,f.line))),o.iter(v,h.line+1,function(z){if(z==l.maxLine)return g=!0,!0})),o.sel.contains(n.from,n.to)>-1&&xi(e),Hl(o,n,s,ed(e)),e.options.lineWrapping||(o.iter(v,f.line+n.text.length,function(z){var V=_s(z);V>l.maxLineLength&&(l.maxLine=z,l.maxLineLength=V,l.maxLineChanged=!0,g=!1)}),g&&(e.curOp.updateMaxLine=!0)),ky(o,f.line),Ao(e,400);var y=n.text.length-(h.line-f.line)-1;n.full?gn(e):f.line==h.line&&n.text.length==1&&!yd(e.doc,n)?Pr(e,f.line,"text"):gn(e,f.line,h.line+1,y);var E=en(e,"changes"),N=en(e,"change");if(N||E){var F={from:f,to:h,text:n.text,removed:n.removed,origin:n.origin};N&&Gt(e,"change",e,F),E&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(F)}e.display.selForContextMenu=null}function zi(e,n,s,o,l){var f;o||(o=s),b(o,s)<0&&(f=[o,s],s=f[0],o=f[1]),typeof n=="string"&&(n=e.splitLines(n)),Ri(e,{from:s,to:o,text:n,origin:l})}function Rd(e,n,s,o){s<e.line?e.line+=o:n<e.line&&(e.line=n,e.ch=0)}function zd(e,n,s,o){for(var l=0;l<e.length;++l){var f=e[l],h=!0;if(f.ranges){f.copied||(f=e[l]=f.deepCopy(),f.copied=!0);for(var g=0;g<f.ranges.length;g++)Rd(f.ranges[g].anchor,n,s,o),Rd(f.ranges[g].head,n,s,o);continue}for(var v=0;v<f.changes.length;++v){var y=f.changes[v];if(s<y.from.line)y.from=ee(y.from.line+o,y.from.ch),y.to=ee(y.to.line+o,y.to.ch);else if(n<=y.to.line){h=!1;break}}h||(e.splice(0,l+1),l=0)}}function jd(e,n){var s=n.from.line,o=n.to.line,l=n.text.length-(o-s)-1;zd(e.done,s,o,l),zd(e.undone,s,o,l)}function Io(e,n,s,o){var l=n,f=n;return typeof n=="number"?f=pe(e,ct(e,n)):l=mt(n),l==null?null:(o(f,l)&&e.cm&&Pr(e.cm,l,s),f)}function _o(e){this.lines=e,this.parent=null;for(var n=0,s=0;s<e.length;++s)e[s].parent=this,n+=e[s].height;this.height=n}_o.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,n){for(var s=e,o=e+n;s<o;++s){var l=this.lines[s];this.height-=l.height,Iy(l),Gt(l,"delete")}this.lines.splice(e,n)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,n,s){this.height+=s,this.lines=this.lines.slice(0,e).concat(n).concat(this.lines.slice(e));for(var o=0;o<n.length;++o)n[o].parent=this},iterN:function(e,n,s){for(var o=e+n;e<o;++e)if(s(this.lines[e]))return!0}};function Ro(e){this.children=e;for(var n=0,s=0,o=0;o<e.length;++o){var l=e[o];n+=l.chunkSize(),s+=l.height,l.parent=this}this.size=n,this.height=s,this.parent=null}Ro.prototype={chunkSize:function(){return this.size},removeInner:function(e,n){this.size-=n;for(var s=0;s<this.children.length;++s){var o=this.children[s],l=o.chunkSize();if(e<l){var f=Math.min(n,l-e),h=o.height;if(o.removeInner(e,f),this.height-=h-o.height,l==f&&(this.children.splice(s--,1),o.parent=null),(n-=f)==0)break;e=0}else e-=l}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof _o))){var g=[];this.collapse(g),this.children=[new _o(g)],this.children[0].parent=this}},collapse:function(e){for(var n=0;n<this.children.length;++n)this.children[n].collapse(e)},insertInner:function(e,n,s){this.size+=n.length,this.height+=s;for(var o=0;o<this.children.length;++o){var l=this.children[o],f=l.chunkSize();if(e<=f){if(l.insertInner(e,n,s),l.lines&&l.lines.length>50){for(var h=l.lines.length%25+25,g=h;g<l.lines.length;){var v=new _o(l.lines.slice(g,g+=25));l.height-=v.height,this.children.splice(++o,0,v),v.parent=this}l.lines=l.lines.slice(0,h),this.maybeSpill()}break}e-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=e.children.splice(e.children.length-5,5),s=new Ro(n);if(e.parent){e.size-=s.size,e.height-=s.height;var l=ge(e.parent.children,e);e.parent.children.splice(l+1,0,s)}else{var o=new Ro(e.children);o.parent=e,e.children=[o,s],e=o}s.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,n,s){for(var o=0;o<this.children.length;++o){var l=this.children[o],f=l.chunkSize();if(e<f){var h=Math.min(n,f-e);if(l.iterN(e,h,s))return!0;if((n-=h)==0)break;e=0}else e-=f}}};var zo=function(e,n,s){if(s)for(var o in s)s.hasOwnProperty(o)&&(this[o]=s[o]);this.doc=e,this.node=n};zo.prototype.clear=function(){var e=this.doc.cm,n=this.line.widgets,s=this.line,o=mt(s);if(!(o==null||!n)){for(var l=0;l<n.length;++l)n[l]==this&&n.splice(l--,1);n.length||(s.widgets=null);var f=So(this);Sn(s,Math.max(0,s.height-f)),e&&(Cn(e,function(){Fd(e,s,-f),Pr(e,o,"widget")}),Gt(e,"lineWidgetCleared",e,this,o))}},zo.prototype.changed=function(){var e=this,n=this.height,s=this.doc.cm,o=this.line;this.height=null;var l=So(this)-n;!l||(Dr(this.doc,o)||Sn(o,o.height+l),s&&Cn(s,function(){s.curOp.forceUpdate=!0,Fd(s,o,l),Gt(s,"lineWidgetChanged",s,e,mt(o))}))},sr(zo);function Fd(e,n,s){wr(n)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Dl(e,s)}function Ib(e,n,s,o){var l=new zo(e,s,o),f=e.cm;return f&&l.noHScroll&&(f.display.alignWidgets=!0),Io(e,n,"widget",function(h){var g=h.widgets||(h.widgets=[]);if(l.insertAt==null?g.push(l):g.splice(Math.min(g.length,Math.max(0,l.insertAt)),0,l),l.line=h,f&&!Dr(e,h)){var v=wr(h)<e.scrollTop;Sn(h,h.height+So(l)),v&&Dl(f,l.height),f.curOp.forceUpdate=!0}return!0}),f&&Gt(f,"lineWidgetAdded",f,l,typeof n=="number"?n:mt(n)),l}var Hd=0,jr=function(e,n){this.lines=[],this.type=n,this.doc=e,this.id=++Hd};jr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,n=e&&!e.curOp;if(n&&si(e),en(this,"clear")){var s=this.find();s&&Gt(this,"clear",s.from,s.to)}for(var o=null,l=null,f=0;f<this.lines.length;++f){var h=this.lines[f],g=wo(h.markedSpans,this);e&&!this.collapsed?Pr(e,mt(h),"text"):e&&(g.to!=null&&(l=mt(h)),g.from!=null&&(o=mt(h))),h.markedSpans=Ty(h.markedSpans,g),g.from==null&&this.collapsed&&!Dr(this.doc,h)&&e&&Sn(h,Oi(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var v=0;v<this.lines.length;++v){var y=Qn(this.lines[v]),E=_s(y);E>e.display.maxLineLength&&(e.display.maxLine=y,e.display.maxLineLength=E,e.display.maxLineChanged=!0)}o!=null&&e&&this.collapsed&&gn(e,o,l+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Od(e.doc)),e&&Gt(e,"markerCleared",e,this,o,l),n&&ai(e),this.parent&&this.parent.clear()}},jr.prototype.find=function(e,n){e==null&&this.type=="bookmark"&&(e=1);for(var s,o,l=0;l<this.lines.length;++l){var f=this.lines[l],h=wo(f.markedSpans,this);if(h.from!=null&&(s=ee(n?f:mt(f),h.from),e==-1))return s;if(h.to!=null&&(o=ee(n?f:mt(f),h.to),e==1))return o}return s&&{from:s,to:o}},jr.prototype.changed=function(){var e=this,n=this.find(-1,!0),s=this,o=this.doc.cm;!n||!o||Cn(o,function(){var l=n.line,f=mt(n.line),h=bl(o,f);if(h&&(Uf(h),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!Dr(s.doc,l)&&s.height!=null){var g=s.height;s.height=null;var v=So(s)-g;v&&Sn(l,l.height+v)}Gt(o,"markerChanged",o,e)})},jr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(!n.maybeHiddenMarkers||ge(n.maybeHiddenMarkers,this)==-1)&&(n.maybeUnhiddenMarkers||(n.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},jr.prototype.detachLine=function(e){if(this.lines.splice(ge(this.lines,e),1),!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(n.maybeHiddenMarkers||(n.maybeHiddenMarkers=[])).push(this)}},sr(jr);function ji(e,n,s,o,l){if(o&&o.shared)return _b(e,n,s,o,l);if(e.cm&&!e.cm.curOp)return Yt(e.cm,ji)(e,n,s,o,l);var f=new jr(e,l),h=b(n,s);if(o&&Xt(o,f,!1),h>0||h==0&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=C("span",[f.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(Af(e,n.line,n,s,f)||n.line!=s.line&&Af(e,s.line,n,s,f))throw new Error("Inserting collapsed marker partially overlapping an existing one");Cy()}f.addToHistory&&kd(e,{from:n,to:s,origin:"markText"},e.sel,NaN);var g=n.line,v=e.cm,y;if(e.iter(g,s.line+1,function(N){v&&f.collapsed&&!v.options.lineWrapping&&Qn(N)==v.display.maxLine&&(y=!0),f.collapsed&&g!=n.line&&Sn(N,0),Ly(N,new Ns(f,g==n.line?n.ch:null,g==s.line?s.ch:null),e.cm&&e.cm.curOp),++g}),f.collapsed&&e.iter(n.line,s.line+1,function(N){Dr(e,N)&&Sn(N,0)}),f.clearOnEnter&&Be(f,"beforeCursorEnter",function(){return f.clear()}),f.readOnly&&(Sy(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),f.collapsed&&(f.id=++Hd,f.atomic=!0),v){if(y&&(v.curOp.updateMaxLine=!0),f.collapsed)gn(v,n.line,s.line+1);else if(f.className||f.startStyle||f.endStyle||f.css||f.attributes||f.title)for(var E=n.line;E<=s.line;E++)Pr(v,E,"text");f.atomic&&Od(v.doc),Gt(v,"markerAdded",v,f)}return f}var jo=function(e,n){this.markers=e,this.primary=n;for(var s=0;s<e.length;++s)e[s].parent=this};jo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Gt(this,"clear")}},jo.prototype.find=function(e,n){return this.primary.find(e,n)},sr(jo);function _b(e,n,s,o,l){o=Xt(o),o.shared=!1;var f=[ji(e,n,s,o,l)],h=f[0],g=o.widgetNode;return zr(e,function(v){g&&(o.widgetNode=g.cloneNode(!0)),f.push(ji(v,le(v,n),le(v,s),o,l));for(var y=0;y<v.linked.length;++y)if(v.linked[y].isParent)return;h=tt(f)}),new jo(f,h)}function Bd(e){return e.findMarks(ee(e.first,0),e.clipPos(ee(e.lastLine())),function(n){return n.parent})}function Rb(e,n){for(var s=0;s<n.length;s++){var o=n[s],l=o.find(),f=e.clipPos(l.from),h=e.clipPos(l.to);if(b(f,h)){var g=ji(e,f,h,o.primary,o.primary.type);o.markers.push(g),g.parent=o}}}function zb(e){for(var n=function(o){var l=e[o],f=[l.primary.doc];zr(l.primary.doc,function(v){return f.push(v)});for(var h=0;h<l.markers.length;h++){var g=l.markers[h];ge(f,g.doc)==-1&&(g.parent=null,l.markers.splice(h--,1))}},s=0;s<e.length;s++)n(s)}var jb=0,mn=function(e,n,s,o,l){if(!(this instanceof mn))return new mn(e,n,s,o,l);s==null&&(s=0),Ro.call(this,[new _o([new Li("",null)])]),this.first=s,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=s;var f=ee(s,0);this.sel=_r(f),this.history=new Gs(null),this.id=++jb,this.modeOption=n,this.lineSep=o,this.direction=l=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Hl(this,{from:f,to:f,text:e}),sn(this,_r(f),ft)};mn.prototype=Fn(Ro.prototype,{constructor:mn,iter:function(e,n,s){s?this.iterN(e-this.first,n-e,s):this.iterN(this.first,this.first+this.size,e)},insert:function(e,n){for(var s=0,o=0;o<n.length;++o)s+=n[o].height;this.insertInner(e-this.first,n,s)},remove:function(e,n){this.removeInner(e-this.first,n)},getValue:function(e){var n=vo(this,this.first,this.first+this.size);return e===!1?n:n.join(e||this.lineSeparator())},setValue:Kt(function(e){var n=ee(this.first,0),s=this.first+this.size-1;Ri(this,{from:n,to:ee(s,pe(this,s).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Lo(this.cm,0,0),sn(this,_r(n),ft)}),replaceRange:function(e,n,s,o){n=le(this,n),s=s?le(this,s):n,zi(this,e,n,s,o)},getRange:function(e,n,s){var o=lr(this,le(this,e),le(this,n));return s===!1?o:s===""?o.join(""):o.join(s||this.lineSeparator())},getLine:function(e){var n=this.getLineHandle(e);return n&&n.text},getLineHandle:function(e){if(Xr(this,e))return pe(this,e)},getLineNumber:function(e){return mt(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=pe(this,e)),Qn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return le(this,e)},getCursor:function(e){var n=this.sel.primary(),s;return e==null||e=="head"?s=n.head:e=="anchor"?s=n.anchor:e=="end"||e=="to"||e===!1?s=n.to():s=n.from(),s},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Kt(function(e,n,s){Ld(this,le(this,typeof e=="number"?ee(e,n||0):e),null,s)}),setSelection:Kt(function(e,n,s){Ld(this,le(this,e),le(this,n||e),s)}),extendSelection:Kt(function(e,n,s){Ks(this,le(this,e),n&&le(this,n),s)}),extendSelections:Kt(function(e,n){Td(this,In(this,e),n)}),extendSelectionsBy:Kt(function(e,n){var s=gt(this.sel.ranges,e);Td(this,In(this,s),n)}),setSelections:Kt(function(e,n,s){if(!!e.length){for(var o=[],l=0;l<e.length;l++)o[l]=new vt(le(this,e[l].anchor),le(this,e[l].head||e[l].anchor));n==null&&(n=Math.min(e.length-1,this.sel.primIndex)),sn(this,Xn(this.cm,o,n),s)}}),addSelection:Kt(function(e,n,s){var o=this.sel.ranges.slice(0);o.push(new vt(le(this,e),le(this,n||e))),sn(this,Xn(this.cm,o,o.length-1),s)}),getSelection:function(e){for(var n=this.sel.ranges,s,o=0;o<n.length;o++){var l=lr(this,n[o].from(),n[o].to());s=s?s.concat(l):l}return e===!1?s:s.join(e||this.lineSeparator())},getSelections:function(e){for(var n=[],s=this.sel.ranges,o=0;o<s.length;o++){var l=lr(this,s[o].from(),s[o].to());e!==!1&&(l=l.join(e||this.lineSeparator())),n[o]=l}return n},replaceSelection:function(e,n,s){for(var o=[],l=0;l<this.sel.ranges.length;l++)o[l]=e;this.replaceSelections(o,n,s||"+input")},replaceSelections:Kt(function(e,n,s){for(var o=[],l=this.sel,f=0;f<l.ranges.length;f++){var h=l.ranges[f];o[f]={from:h.from(),to:h.to(),text:this.splitLines(e[f]),origin:s}}for(var g=n&&n!="end"&&Tb(this,o,n),v=o.length-1;v>=0;v--)Ri(this,o[v]);g?Ed(this,g):this.cm&&Di(this.cm)}),undo:Kt(function(){Zs(this,"undo")}),redo:Kt(function(){Zs(this,"redo")}),undoSelection:Kt(function(){Zs(this,"undo",!0)}),redoSelection:Kt(function(){Zs(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,n=0,s=0,o=0;o<e.done.length;o++)e.done[o].ranges||++n;for(var l=0;l<e.undone.length;l++)e.undone[l].ranges||++s;return{undo:n,redo:s}},clearHistory:function(){var e=this;this.history=new Gs(this.history),zr(this,function(n){return n.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ii(this.history.done),undone:Ii(this.history.undone)}},setHistory:function(e){var n=this.history=new Gs(this.history);n.done=Ii(e.done.slice(0),null,!0),n.undone=Ii(e.undone.slice(0),null,!0)},setGutterMarker:Kt(function(e,n,s){return Io(this,e,"gutter",function(o){var l=o.gutterMarkers||(o.gutterMarkers={});return l[n]=s,!s&&re(l)&&(o.gutterMarkers=null),!0})}),clearGutter:Kt(function(e){var n=this;this.iter(function(s){s.gutterMarkers&&s.gutterMarkers[e]&&Io(n,s,"gutter",function(){return s.gutterMarkers[e]=null,re(s.gutterMarkers)&&(s.gutterMarkers=null),!0})})}),lineInfo:function(e){var n;if(typeof e=="number"){if(!Xr(this,e)||(n=e,e=pe(this,e),!e))return null}else if(n=mt(e),n==null)return null;return{line:n,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Kt(function(e,n,s){return Io(this,e,n=="gutter"?"gutter":"class",function(o){var l=n=="text"?"textClass":n=="background"?"bgClass":n=="gutter"?"gutterClass":"wrapClass";if(!o[l])o[l]=s;else{if(K(s).test(o[l]))return!1;o[l]+=" "+s}return!0})}),removeLineClass:Kt(function(e,n,s){return Io(this,e,n=="gutter"?"gutter":"class",function(o){var l=n=="text"?"textClass":n=="background"?"bgClass":n=="gutter"?"gutterClass":"wrapClass",f=o[l];if(f)if(s==null)o[l]=null;else{var h=f.match(K(s));if(!h)return!1;var g=h.index+h[0].length;o[l]=f.slice(0,h.index)+(!h.index||g==f.length?"":" ")+f.slice(g)||null}else return!1;return!0})}),addLineWidget:Kt(function(e,n,s){return Ib(this,e,n,s)}),removeLineWidget:function(e){e.clear()},markText:function(e,n,s){return ji(this,le(this,e),le(this,n),s,s&&s.type||"range")},setBookmark:function(e,n){var s={replacedWith:n&&(n.nodeType==null?n.widget:n),insertLeft:n&&n.insertLeft,clearWhenEmpty:!1,shared:n&&n.shared,handleMouseEvents:n&&n.handleMouseEvents};return e=le(this,e),ji(this,e,e,s,"bookmark")},findMarksAt:function(e){e=le(this,e);var n=[],s=pe(this,e.line).markedSpans;if(s)for(var o=0;o<s.length;++o){var l=s[o];(l.from==null||l.from<=e.ch)&&(l.to==null||l.to>=e.ch)&&n.push(l.marker.parent||l.marker)}return n},findMarks:function(e,n,s){e=le(this,e),n=le(this,n);var o=[],l=e.line;return this.iter(e.line,n.line+1,function(f){var h=f.markedSpans;if(h)for(var g=0;g<h.length;g++){var v=h[g];!(v.to!=null&&l==e.line&&e.ch>=v.to||v.from==null&&l!=e.line||v.from!=null&&l==n.line&&v.from>=n.ch)&&(!s||s(v.marker))&&o.push(v.marker.parent||v.marker)}++l}),o},getAllMarks:function(){var e=[];return this.iter(function(n){var s=n.markedSpans;if(s)for(var o=0;o<s.length;++o)s[o].from!=null&&e.push(s[o].marker)}),e},posFromIndex:function(e){var n,s=this.first,o=this.lineSeparator().length;return this.iter(function(l){var f=l.text.length+o;if(f>e)return n=e,!0;e-=f,++s}),le(this,ee(s,n))},indexFromPos:function(e){e=le(this,e);var n=e.ch;if(e.line<this.first||e.ch<0)return 0;var s=this.lineSeparator().length;return this.iter(this.first,e.line,function(o){n+=o.text.length+s}),n},copy:function(e){var n=new mn(vo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return n.scrollTop=this.scrollTop,n.scrollLeft=this.scrollLeft,n.sel=this.sel,n.extend=!1,e&&(n.history.undoDepth=this.history.undoDepth,n.setHistory(this.getHistory())),n},linkedDoc:function(e){e||(e={});var n=this.first,s=this.first+this.size;e.from!=null&&e.from>n&&(n=e.from),e.to!=null&&e.to<s&&(s=e.to);var o=new mn(vo(this,n,s),e.mode||this.modeOption,n,this.lineSep,this.direction);return e.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:e.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Rb(o,Bd(this)),o},unlinkDoc:function(e){if(e instanceof Dt&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){var s=this.linked[n];if(s.doc==e){this.linked.splice(n,1),e.unlinkDoc(this),zb(Bd(this));break}}if(e.history==this.history){var o=[e.id];zr(e,function(l){return o.push(l.id)},!0),e.history=new Gs(null),e.history.done=Ii(this.history.done,o),e.history.undone=Ii(this.history.undone,o)}},iterLinkedDocs:function(e){zr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):po(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Kt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(n){return n.order=null}),this.cm&&Lb(this.cm))})}),mn.prototype.eachLine=mn.prototype.iter;var Wd=0;function Fb(e){var n=this;if($d(n),!(Ht(n,e)||xr(n.display,e))){rn(e),d&&(Wd=+new Date);var s=ni(n,e,!0),o=e.dataTransfer.files;if(!(!s||n.isReadOnly()))if(o&&o.length&&window.FileReader&&window.File)for(var l=o.length,f=Array(l),h=0,g=function(){++h==l&&Yt(n,function(){s=le(n.doc,s);var z={from:s,to:s,text:n.doc.splitLines(f.filter(function(V){return V!=null}).join(n.doc.lineSeparator())),origin:"paste"};Ri(n.doc,z),Ed(n.doc,_r(le(n.doc,s),le(n.doc,Rr(z))))})()},v=function(z,V){if(n.options.allowDropFileTypes&&ge(n.options.allowDropFileTypes,z.type)==-1){g();return}var Q=new FileReader;Q.onerror=function(){return g()},Q.onload=function(){var ne=Q.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ne)){g();return}f[V]=ne,g()},Q.readAsText(z)},y=0;y<o.length;y++)v(o[y],y);else{if(n.state.draggingText&&n.doc.sel.contains(s)>-1){n.state.draggingText(e),setTimeout(function(){return n.display.input.focus()},20);return}try{var E=e.dataTransfer.getData("Text");if(E){var N;if(n.state.draggingText&&!n.state.draggingText.copy&&(N=n.listSelections()),Js(n.doc,_r(s,s)),N)for(var F=0;F<N.length;++F)zi(n.doc,"",N[F].anchor,N[F].head,"drag");n.replaceSelection(E,"around","paste"),n.display.input.focus()}}catch{}}}}function Hb(e,n){if(d&&(!e.state.draggingText||+new Date-Wd<100)){Zr(n);return}if(!(Ht(e,n)||xr(e.display,n))&&(n.dataTransfer.setData("Text",e.getSelection()),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage&&!T)){var s=q("img",null,null,"position: fixed; left: 0; top: 0;");s.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",S&&(s.width=s.height=1,e.display.wrapper.appendChild(s),s._top=s.offsetTop),n.dataTransfer.setDragImage(s,0,0),S&&s.parentNode.removeChild(s)}}function Bb(e,n){var s=ni(e,n);if(!!s){var o=document.createDocumentFragment();El(e,s,o),e.display.dragCursor||(e.display.dragCursor=q("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),W(e.display.dragCursor,o)}}function $d(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function qd(e){if(!!document.getElementsByClassName){for(var n=document.getElementsByClassName("CodeMirror"),s=[],o=0;o<n.length;o++){var l=n[o].CodeMirror;l&&s.push(l)}s.length&&s[0].operation(function(){for(var f=0;f<s.length;f++)e(s[f])})}}var Vd=!1;function Wb(){Vd||($b(),Vd=!0)}function $b(){var e;Be(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,qd(qb)},100))}),Be(window,"blur",function(){return qd(Ni)})}function qb(e){var n=e.display;n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.scrollbarsClipped=!1,e.setSize()}for(var Fr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Fo=0;Fo<10;Fo++)Fr[Fo+48]=Fr[Fo+96]=String(Fo);for(var Xs=65;Xs<=90;Xs++)Fr[Xs]=String.fromCharCode(Xs);for(var Ho=1;Ho<=12;Ho++)Fr[Ho+111]=Fr[Ho+63235]="F"+Ho;var Sr={};Sr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Sr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Sr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Sr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Sr.default=k?Sr.macDefault:Sr.pcDefault;function Vb(e){var n=e.split(/-(?!$)/);e=n[n.length-1];for(var s,o,l,f,h=0;h<n.length-1;h++){var g=n[h];if(/^(cmd|meta|m)$/i.test(g))f=!0;else if(/^a(lt)?$/i.test(g))s=!0;else if(/^(c|ctrl|control)$/i.test(g))o=!0;else if(/^s(hift)?$/i.test(g))l=!0;else throw new Error("Unrecognized modifier name: "+g)}return s&&(e="Alt-"+e),o&&(e="Ctrl-"+e),f&&(e="Cmd-"+e),l&&(e="Shift-"+e),e}function Ub(e){var n={};for(var s in e)if(e.hasOwnProperty(s)){var o=e[s];if(/^(name|fallthrough|(de|at)tach)$/.test(s))continue;if(o=="..."){delete e[s];continue}for(var l=gt(s.split(" "),Vb),f=0;f<l.length;f++){var h=void 0,g=void 0;f==l.length-1?(g=l.join(" "),h=o):(g=l.slice(0,f+1).join(" "),h="...");var v=n[g];if(!v)n[g]=h;else if(v!=h)throw new Error("Inconsistent bindings for "+g)}delete e[s]}for(var y in n)e[y]=n[y];return e}function Fi(e,n,s,o){n=ea(n);var l=n.call?n.call(e,o):n[e];if(l===!1)return"nothing";if(l==="...")return"multi";if(l!=null&&s(l))return"handled";if(n.fallthrough){if(Object.prototype.toString.call(n.fallthrough)!="[object Array]")return Fi(e,n.fallthrough,s,o);for(var f=0;f<n.fallthrough.length;f++){var h=Fi(e,n.fallthrough[f],s,o);if(h)return h}}}function Ud(e){var n=typeof e=="string"?e:Fr[e.keyCode];return n=="Ctrl"||n=="Alt"||n=="Shift"||n=="Mod"}function Gd(e,n,s){var o=e;return n.altKey&&o!="Alt"&&(e="Alt-"+e),(j?n.metaKey:n.ctrlKey)&&o!="Ctrl"&&(e="Ctrl-"+e),(j?n.ctrlKey:n.metaKey)&&o!="Mod"&&(e="Cmd-"+e),!s&&n.shiftKey&&o!="Shift"&&(e="Shift-"+e),e}function Yd(e,n){if(S&&e.keyCode==34&&e.char)return!1;var s=Fr[e.keyCode];return s==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(s=e.code),Gd(s,e,n))}function ea(e){return typeof e=="string"?Sr[e]:e}function Hi(e,n){for(var s=e.doc.sel.ranges,o=[],l=0;l<s.length;l++){for(var f=n(s[l]);o.length&&b(f.from,tt(o).to)<=0;){var h=o.pop();if(b(h.from,f.from)<0){f.from=h.from;break}}o.push(f)}Cn(e,function(){for(var g=o.length-1;g>=0;g--)zi(e.doc,"",o[g].from,o[g].to,"+delete");Di(e)})}function ql(e,n,s){var o=un(e.text,n+s,s);return o<0||o>e.text.length?null:o}function Vl(e,n,s){var o=ql(e,n.ch,s);return o==null?null:new ee(n.line,o,s<0?"after":"before")}function Ul(e,n,s,o,l){if(e){n.doc.direction=="rtl"&&(l=-l);var f=kn(s,n.doc.direction);if(f){var h=l<0?tt(f):f[0],g=l<0==(h.level==1),v=g?"after":"before",y;if(h.level>0||n.doc.direction=="rtl"){var E=Mi(n,s);y=l<0?s.text.length-1:0;var N=dr(n,E,y).top;y=or(function(F){return dr(n,E,F).top==N},l<0==(h.level==1)?h.from:h.to-1,y),v=="before"&&(y=ql(s,y,1))}else y=l<0?h.to:h.from;return new ee(o,y,v)}}return new ee(o,l<0?s.text.length:0,l<0?"before":"after")}function Gb(e,n,s,o){var l=kn(n,e.doc.direction);if(!l)return Vl(n,s,o);s.ch>=n.text.length?(s.ch=n.text.length,s.sticky="before"):s.ch<=0&&(s.ch=0,s.sticky="after");var f=_t(l,s.ch,s.sticky),h=l[f];if(e.doc.direction=="ltr"&&h.level%2==0&&(o>0?h.to>s.ch:h.from<s.ch))return Vl(n,s,o);var g=function(oe,ae){return ql(n,oe instanceof ee?oe.ch:oe,ae)},v,y=function(oe){return e.options.lineWrapping?(v=v||Mi(e,n),Xf(e,n,v,oe)):{begin:0,end:n.text.length}},E=y(s.sticky=="before"?g(s,-1):s.ch);if(e.doc.direction=="rtl"||h.level==1){var N=h.level==1==o<0,F=g(s,N?1:-1);if(F!=null&&(N?F<=h.to&&F<=E.end:F>=h.from&&F>=E.begin)){var z=N?"before":"after";return new ee(s.line,F,z)}}var V=function(oe,ae,se){for(var ue=function(Tt,Jt){return Jt?new ee(s.line,g(Tt,1),"before"):new ee(s.line,Tt,"after")};oe>=0&&oe<l.length;oe+=ae){var Fe=l[oe],me=ae>0==(Fe.level!=1),Xe=me?se.begin:g(se.end,-1);if(Fe.from<=Xe&&Xe<Fe.to||(Xe=me?Fe.from:g(Fe.to,-1),se.begin<=Xe&&Xe<se.end))return ue(Xe,me)}},Q=V(f+o,o,E);if(Q)return Q;var ne=o>0?E.end:g(E.begin,-1);return ne!=null&&!(o>0&&ne==n.text.length)&&(Q=V(o>0?0:l.length-1,o,y(ne)),Q)?Q:null}var Bo={selectAll:Dd,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ft)},killLine:function(e){return Hi(e,function(n){if(n.empty()){var s=pe(e.doc,n.head.line).text.length;return n.head.ch==s&&n.head.line<e.lastLine()?{from:n.head,to:ee(n.head.line+1,0)}:{from:n.head,to:ee(n.head.line,s)}}else return{from:n.from(),to:n.to()}})},deleteLine:function(e){return Hi(e,function(n){return{from:ee(n.from().line,0),to:le(e.doc,ee(n.to().line+1,0))}})},delLineLeft:function(e){return Hi(e,function(n){return{from:ee(n.from().line,0),to:n.from()}})},delWrappedLineLeft:function(e){return Hi(e,function(n){var s=e.charCoords(n.head,"div").top+5,o=e.coordsChar({left:0,top:s},"div");return{from:o,to:n.from()}})},delWrappedLineRight:function(e){return Hi(e,function(n){var s=e.charCoords(n.head,"div").top+5,o=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:s},"div");return{from:n.from(),to:o}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ee(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ee(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(n){return Kd(e,n.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(n){return Jd(e,n.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(n){return Yb(e,n.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(n){var s=e.cursorCoords(n.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:s},"div")},Ge)},goLineLeft:function(e){return e.extendSelectionsBy(function(n){var s=e.cursorCoords(n.head,"div").top+5;return e.coordsChar({left:0,top:s},"div")},Ge)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(n){var s=e.cursorCoords(n.head,"div").top+5,o=e.coordsChar({left:0,top:s},"div");return o.ch<e.getLine(o.line).search(/\S/)?Jd(e,n.head):o},Ge)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var n=[],s=e.listSelections(),o=e.options.tabSize,l=0;l<s.length;l++){var f=s[l].from(),h=$t(e.getLine(f.line),f.ch,o);n.push(Or(o-h%o))}e.replaceSelections(n)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Cn(e,function(){for(var n=e.listSelections(),s=[],o=0;o<n.length;o++)if(!!n[o].empty()){var l=n[o].head,f=pe(e.doc,l.line).text;if(f){if(l.ch==f.length&&(l=new ee(l.line,l.ch-1)),l.ch>0)l=new ee(l.line,l.ch+1),e.replaceRange(f.charAt(l.ch-1)+f.charAt(l.ch-2),ee(l.line,l.ch-2),l,"+transpose");else if(l.line>e.doc.first){var h=pe(e.doc,l.line-1).text;h&&(l=new ee(l.line,1),e.replaceRange(f.charAt(0)+e.doc.lineSeparator()+h.charAt(h.length-1),ee(l.line-1,h.length-1),l,"+transpose"))}}s.push(new vt(l,l))}e.setSelections(s)})},newlineAndIndent:function(e){return Cn(e,function(){for(var n=e.listSelections(),s=n.length-1;s>=0;s--)e.replaceRange(e.doc.lineSeparator(),n[s].anchor,n[s].head,"+input");n=e.listSelections();for(var o=0;o<n.length;o++)e.indentLine(n[o].from().line,null,!0);Di(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Kd(e,n){var s=pe(e.doc,n),o=Qn(s);return o!=s&&(n=mt(o)),Ul(!0,e,o,n,1)}function Yb(e,n){var s=pe(e.doc,n),o=Ny(s);return o!=s&&(n=mt(o)),Ul(!0,e,s,n,-1)}function Jd(e,n){var s=Kd(e,n.line),o=pe(e.doc,s.line),l=kn(o,e.doc.direction);if(!l||l[0].level==0){var f=Math.max(s.ch,o.text.search(/\S/)),h=n.line==s.line&&n.ch<=f&&n.ch;return ee(s.line,h?0:f,s.sticky)}return s}function ta(e,n,s){if(typeof n=="string"&&(n=Bo[n],!n))return!1;e.display.input.ensurePolled();var o=e.display.shift,l=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),s&&(e.display.shift=!1),l=n(e)!=et}finally{e.display.shift=o,e.state.suppressEdits=!1}return l}function Kb(e,n,s){for(var o=0;o<e.state.keyMaps.length;o++){var l=Fi(n,e.state.keyMaps[o],s,e);if(l)return l}return e.options.extraKeys&&Fi(n,e.options.extraKeys,s,e)||Fi(n,e.options.keyMap,s,e)}var Jb=new Mt;function Wo(e,n,s,o){var l=e.state.keySeq;if(l){if(Ud(n))return"handled";if(/\'$/.test(n)?e.state.keySeq=null:Jb.set(50,function(){e.state.keySeq==l&&(e.state.keySeq=null,e.display.input.reset())}),Qd(e,l+" "+n,s,o))return!0}return Qd(e,n,s,o)}function Qd(e,n,s,o){var l=Kb(e,n,o);return l=="multi"&&(e.state.keySeq=n),l=="handled"&&Gt(e,"keyHandled",e,n,s),(l=="handled"||l=="multi")&&(rn(s),Ml(e)),!!l}function Zd(e,n){var s=Yd(n,!0);return s?n.shiftKey&&!e.state.keySeq?Wo(e,"Shift-"+s,n,function(o){return ta(e,o,!0)})||Wo(e,s,n,function(o){if(typeof o=="string"?/^go[A-Z]/.test(o):o.motion)return ta(e,o)}):Wo(e,s,n,function(o){return ta(e,o)}):!1}function Qb(e,n,s){return Wo(e,"'"+s+"'",n,function(o){return ta(e,o,!0)})}var Gl=null;function Xd(e){var n=this;if(!(e.target&&e.target!=n.display.input.getField())&&(n.curOp.focus=ce(),!Ht(n,e))){d&&p<11&&e.keyCode==27&&(e.returnValue=!1);var s=e.keyCode;n.display.shift=s==16||e.shiftKey;var o=Zd(n,e);S&&(Gl=o?s:null,!o&&s==88&&!Os&&(k?e.metaKey:e.ctrlKey)&&n.replaceSelection("",null,"cut")),i&&!k&&!o&&s==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),s==18&&!/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)&&Zb(n)}}function Zb(e){var n=e.display.lineDiv;St(n,"CodeMirror-crosshair");function s(o){(o.keyCode==18||!o.altKey)&&(H(n,"CodeMirror-crosshair"),pn(document,"keyup",s),pn(document,"mouseover",s))}Be(document,"keyup",s),Be(document,"mouseover",s)}function ep(e){e.keyCode==16&&(this.doc.sel.shift=!1),Ht(this,e)}function tp(e){var n=this;if(!(e.target&&e.target!=n.display.input.getField())&&!(xr(n.display,e)||Ht(n,e)||e.ctrlKey&&!e.altKey||k&&e.metaKey)){var s=e.keyCode,o=e.charCode;if(S&&s==Gl){Gl=null,rn(e);return}if(!(S&&(!e.which||e.which<10)&&Zd(n,e))){var l=String.fromCharCode(o??s);l!="\b"&&(Qb(n,e,l)||n.display.input.onKeyPress(e))}}}var Xb=400,Yl=function(e,n,s){this.time=e,this.pos=n,this.button=s};Yl.prototype.compare=function(e,n,s){return this.time+Xb>e&&b(n,this.pos)==0&&s==this.button};var $o,qo;function ew(e,n){var s=+new Date;return qo&&qo.compare(s,e,n)?($o=qo=null,"triple"):$o&&$o.compare(s,e,n)?(qo=new Yl(s,e,n),$o=null,"double"):($o=new Yl(s,e,n),qo=null,"single")}function np(e){var n=this,s=n.display;if(!(Ht(n,e)||s.activeTouch&&s.input.supportsTouch())){if(s.input.ensurePolled(),s.shift=e.shiftKey,xr(s,e)){m||(s.scroller.draggable=!1,setTimeout(function(){return s.scroller.draggable=!0},100));return}if(!Kl(n,e)){var o=ni(n,e),l=Ls(e),f=o?ew(o,l):"single";window.focus(),l==1&&n.state.selectingText&&n.state.selectingText(e),!(o&&tw(n,l,o,f,e))&&(l==1?o?rw(n,o,f,e):Ar(e)==s.scroller&&rn(e):l==2?(o&&Ks(n.doc,o),setTimeout(function(){return s.input.focus()},20)):l==3&&(B?n.display.input.onContextMenu(e):Ol(n)))}}}function tw(e,n,s,o,l){var f="Click";return o=="double"?f="Double"+f:o=="triple"&&(f="Triple"+f),f=(n==1?"Left":n==2?"Middle":"Right")+f,Wo(e,Gd(f,l),l,function(h){if(typeof h=="string"&&(h=Bo[h]),!h)return!1;var g=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),g=h(e,s)!=et}finally{e.state.suppressEdits=!1}return g})}function nw(e,n,s){var o=e.getOption("configureMouse"),l=o?o(e,n,s):{};if(l.unit==null){var f=_?s.shiftKey&&s.metaKey:s.altKey;l.unit=f?"rectangle":n=="single"?"char":n=="double"?"word":"line"}return(l.extend==null||e.doc.extend)&&(l.extend=e.doc.extend||s.shiftKey),l.addNew==null&&(l.addNew=k?s.metaKey:s.ctrlKey),l.moveOnDrag==null&&(l.moveOnDrag=!(k?s.altKey:s.ctrlKey)),l}function rw(e,n,s,o){d?setTimeout(Kr(rd,e),0):e.curOp.focus=ce();var l=nw(e,s,o),f=e.doc.sel,h;e.options.dragDrop&&co&&!e.isReadOnly()&&s=="single"&&(h=f.contains(n))>-1&&(b((h=f.ranges[h]).from(),n)<0||n.xRel>0)&&(b(h.to(),n)>0||n.xRel<0)?iw(e,o,n,l):ow(e,o,n,l)}function iw(e,n,s,o){var l=e.display,f=!1,h=Yt(e,function(y){m&&(l.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Ol(e)),pn(l.wrapper.ownerDocument,"mouseup",h),pn(l.wrapper.ownerDocument,"mousemove",g),pn(l.scroller,"dragstart",v),pn(l.scroller,"drop",h),f||(rn(y),o.addNew||Ks(e.doc,s,null,null,o.extend),m&&!T||d&&p==9?setTimeout(function(){l.wrapper.ownerDocument.body.focus({preventScroll:!0}),l.input.focus()},20):l.input.focus())}),g=function(y){f=f||Math.abs(n.clientX-y.clientX)+Math.abs(n.clientY-y.clientY)>=10},v=function(){return f=!0};m&&(l.scroller.draggable=!0),e.state.draggingText=h,h.copy=!o.moveOnDrag,Be(l.wrapper.ownerDocument,"mouseup",h),Be(l.wrapper.ownerDocument,"mousemove",g),Be(l.scroller,"dragstart",v),Be(l.scroller,"drop",h),e.state.delayingBlurEvent=!0,setTimeout(function(){return l.input.focus()},20),l.scroller.dragDrop&&l.scroller.dragDrop()}function rp(e,n,s){if(s=="char")return new vt(n,n);if(s=="word")return e.findWordAt(n);if(s=="line")return new vt(ee(n.line,0),le(e.doc,ee(n.line+1,0)));var o=s(e,n);return new vt(o.from,o.to)}function ow(e,n,s,o){d&&Ol(e);var l=e.display,f=e.doc;rn(n);var h,g,v=f.sel,y=v.ranges;if(o.addNew&&!o.extend?(g=f.sel.contains(s),g>-1?h=y[g]:h=new vt(s,s)):(h=f.sel.primary(),g=f.sel.primIndex),o.unit=="rectangle")o.addNew||(h=new vt(s,s)),s=ni(e,n,!0,!0),g=-1;else{var E=rp(e,s,o.unit);o.extend?h=Wl(h,E.anchor,E.head,o.extend):h=E}o.addNew?g==-1?(g=y.length,sn(f,Xn(e,y.concat([h]),g),{scroll:!1,origin:"*mouse"})):y.length>1&&y[g].empty()&&o.unit=="char"&&!o.extend?(sn(f,Xn(e,y.slice(0,g).concat(y.slice(g+1)),0),{scroll:!1,origin:"*mouse"}),v=f.sel):$l(f,g,h,it):(g=0,sn(f,new _n([h],0),it),v=f.sel);var N=s;function F(se){if(b(N,se)!=0)if(N=se,o.unit=="rectangle"){for(var ue=[],Fe=e.options.tabSize,me=$t(pe(f,s.line).text,s.ch,Fe),Xe=$t(pe(f,se.line).text,se.ch,Fe),Tt=Math.min(me,Xe),Jt=Math.max(me,Xe),Pt=Math.min(s.line,se.line),Tn=Math.min(e.lastLine(),Math.max(s.line,se.line));Pt<=Tn;Pt++){var vn=pe(f,Pt).text,Bt=Vt(vn,Tt,Fe);Tt==Jt?ue.push(new vt(ee(Pt,Bt),ee(Pt,Bt))):vn.length>Bt&&ue.push(new vt(ee(Pt,Bt),ee(Pt,Vt(vn,Jt,Fe))))}ue.length||ue.push(new vt(s,s)),sn(f,Xn(e,v.ranges.slice(0,g).concat(ue),g),{origin:"*mouse",scroll:!1}),e.scrollIntoView(se)}else{var yn=h,tn=rp(e,se,o.unit),qt=yn.anchor,Wt;b(tn.anchor,qt)>0?(Wt=tn.head,qt=Ve(yn.from(),tn.anchor)):(Wt=tn.anchor,qt=te(yn.to(),tn.head));var zt=v.ranges.slice(0);zt[g]=sw(e,new vt(le(f,qt),Wt)),sn(f,Xn(e,zt,g),it)}}var z=l.wrapper.getBoundingClientRect(),V=0;function Q(se){var ue=++V,Fe=ni(e,se,!0,o.unit=="rectangle");if(!!Fe)if(b(Fe,N)!=0){e.curOp.focus=ce(),F(Fe);var me=$s(l,f);(Fe.line>=me.to||Fe.line<me.from)&&setTimeout(Yt(e,function(){V==ue&&Q(se)}),150)}else{var Xe=se.clientY<z.top?-20:se.clientY>z.bottom?20:0;Xe&&setTimeout(Yt(e,function(){V==ue&&(l.scroller.scrollTop+=Xe,Q(se))}),50)}}function ne(se){e.state.selectingText=!1,V=1/0,se&&(rn(se),l.input.focus()),pn(l.wrapper.ownerDocument,"mousemove",oe),pn(l.wrapper.ownerDocument,"mouseup",ae),f.history.lastSelOrigin=null}var oe=Yt(e,function(se){se.buttons===0||!Ls(se)?ne(se):Q(se)}),ae=Yt(e,ne);e.state.selectingText=ae,Be(l.wrapper.ownerDocument,"mousemove",oe),Be(l.wrapper.ownerDocument,"mouseup",ae)}function sw(e,n){var s=n.anchor,o=n.head,l=pe(e.doc,s.line);if(b(s,o)==0&&s.sticky==o.sticky)return n;var f=kn(l);if(!f)return n;var h=_t(f,s.ch,s.sticky),g=f[h];if(g.from!=s.ch&&g.to!=s.ch)return n;var v=h+(g.from==s.ch==(g.level!=1)?0:1);if(v==0||v==f.length)return n;var y;if(o.line!=s.line)y=(o.line-s.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var E=_t(f,o.ch,o.sticky),N=E-h||(o.ch-s.ch)*(g.level==1?-1:1);E==v-1||E==v?y=N<0:y=N>0}var F=f[v+(y?-1:0)],z=y==(F.level==1),V=z?F.from:F.to,Q=z?"after":"before";return s.ch==V&&s.sticky==Q?n:new vt(new ee(s.line,V,Q),o)}function ip(e,n,s,o){var l,f;if(n.touches)l=n.touches[0].clientX,f=n.touches[0].clientY;else try{l=n.clientX,f=n.clientY}catch{return!1}if(l>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;o&&rn(n);var h=e.display,g=h.lineDiv.getBoundingClientRect();if(f>g.bottom||!en(e,s))return Nn(n);f-=g.top-h.viewOffset;for(var v=0;v<e.display.gutterSpecs.length;++v){var y=h.gutters.childNodes[v];if(y&&y.getBoundingClientRect().right>=l){var E=ur(e.doc,f),N=e.display.gutterSpecs[v];return qe(e,s,e,E,N.className,n),Nn(n)}}}function Kl(e,n){return ip(e,n,"gutterClick",!0)}function op(e,n){xr(e.display,n)||aw(e,n)||Ht(e,n,"contextmenu")||B||e.display.input.onContextMenu(n)}function aw(e,n){return en(e,"gutterContextMenu")?ip(e,n,"gutterContextMenu",!1):!1}function sp(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Co(e)}var Bi={toString:function(){return"CodeMirror.Init"}},ap={},na={};function lw(e){var n=e.optionHandlers;function s(o,l,f,h){e.defaults[o]=l,f&&(n[o]=h?function(g,v,y){y!=Bi&&f(g,v,y)}:f)}e.defineOption=s,e.Init=Bi,s("value","",function(o,l){return o.setValue(l)},!0),s("mode",null,function(o,l){o.doc.modeOption=l,Fl(o)},!0),s("indentUnit",2,Fl,!0),s("indentWithTabs",!1),s("smartIndent",!0),s("tabSize",4,function(o){Do(o),Co(o),gn(o)},!0),s("lineSeparator",null,function(o,l){if(o.doc.lineSep=l,!!l){var f=[],h=o.doc.first;o.doc.iter(function(v){for(var y=0;;){var E=v.text.indexOf(l,y);if(E==-1)break;y=E+l.length,f.push(ee(h,E))}h++});for(var g=f.length-1;g>=0;g--)zi(o.doc,l,f[g],ee(f[g].line,f[g].ch+l.length))}}),s("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(o,l,f){o.state.specialChars=new RegExp(l.source+(l.test("	")?"":"|	"),"g"),f!=Bi&&o.refresh()}),s("specialCharPlaceholder",zy,function(o){return o.refresh()},!0),s("electricChars",!0),s("inputStyle",I?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),s("spellcheck",!1,function(o,l){return o.getInputField().spellcheck=l},!0),s("autocorrect",!1,function(o,l){return o.getInputField().autocorrect=l},!0),s("autocapitalize",!1,function(o,l){return o.getInputField().autocapitalize=l},!0),s("rtlMoveVisually",!P),s("wholeLineUpdateBefore",!0),s("theme","default",function(o){sp(o),No(o)},!0),s("keyMap","default",function(o,l,f){var h=ea(l),g=f!=Bi&&ea(f);g&&g.detach&&g.detach(o,h),h.attach&&h.attach(o,g||null)}),s("extraKeys",null),s("configureMouse",null),s("lineWrapping",!1,cw,!0),s("gutters",[],function(o,l){o.display.gutterSpecs=zl(l,o.options.lineNumbers),No(o)},!0),s("fixedGutter",!0,function(o,l){o.display.gutters.style.left=l?Tl(o.display)+"px":"0",o.refresh()},!0),s("coverGutterNextToScrollbar",!1,function(o){return Pi(o)},!0),s("scrollbarStyle","native",function(o){ud(o),Pi(o),o.display.scrollbars.setScrollTop(o.doc.scrollTop),o.display.scrollbars.setScrollLeft(o.doc.scrollLeft)},!0),s("lineNumbers",!1,function(o,l){o.display.gutterSpecs=zl(o.options.gutters,l),No(o)},!0),s("firstLineNumber",1,No,!0),s("lineNumberFormatter",function(o){return o},No,!0),s("showCursorWhenSelecting",!1,To,!0),s("resetSelectionOnContextMenu",!0),s("lineWiseCopyCut",!0),s("pasteLinesPerSelection",!0),s("selectionsMayTouch",!1),s("readOnly",!1,function(o,l){l=="nocursor"&&(Ni(o),o.display.input.blur()),o.display.input.readOnlyChanged(l)}),s("screenReaderLabel",null,function(o,l){l=l===""?null:l,o.display.input.screenReaderLabelChanged(l)}),s("disableInput",!1,function(o,l){l||o.display.input.reset()},!0),s("dragDrop",!0,uw),s("allowDropFileTypes",null),s("cursorBlinkRate",530),s("cursorScrollMargin",0),s("cursorHeight",1,To,!0),s("singleCursorHeightPerLine",!0,To,!0),s("workTime",100),s("workDelay",100),s("flattenSpans",!0,Do,!0),s("addModeClass",!1,Do,!0),s("pollInterval",100),s("undoDepth",200,function(o,l){return o.doc.history.undoDepth=l}),s("historyEventDelay",1250),s("viewportMargin",10,function(o){return o.refresh()},!0),s("maxHighlightLength",1e4,Do,!0),s("moveInputWithCursor",!0,function(o,l){l||o.display.input.resetPosition()}),s("tabindex",null,function(o,l){return o.display.input.getField().tabIndex=l||""}),s("autofocus",null),s("direction","ltr",function(o,l){return o.doc.setDirection(l)},!0),s("phrases",null)}function uw(e,n,s){var o=s&&s!=Bi;if(!n!=!o){var l=e.display.dragFunctions,f=n?Be:pn;f(e.display.scroller,"dragstart",l.start),f(e.display.scroller,"dragenter",l.enter),f(e.display.scroller,"dragover",l.over),f(e.display.scroller,"dragleave",l.leave),f(e.display.scroller,"drop",l.drop)}}function cw(e){e.options.lineWrapping?(St(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(H(e.display.wrapper,"CodeMirror-wrap"),gl(e)),Ll(e),gn(e),Co(e),setTimeout(function(){return Pi(e)},100)}function Dt(e,n){var s=this;if(!(this instanceof Dt))return new Dt(e,n);this.options=n=n?Xt(n):{},Xt(ap,n,!1);var o=n.value;typeof o=="string"?o=new mn(o,n.mode,null,n.lineSeparator,n.direction):n.mode&&(o.modeOption=n.mode),this.doc=o;var l=new Dt.inputStyles[n.inputStyle](this),f=this.display=new Sb(e,o,l,n);f.wrapper.CodeMirror=this,sp(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ud(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Mt,keySeq:null,specialChars:null},n.autofocus&&!I&&f.input.focus(),d&&p<11&&setTimeout(function(){return s.display.input.reset(!0)},20),fw(this),Wb(),si(this),this.curOp.forceUpdate=!0,bd(this,o),n.autofocus&&!I||this.hasFocus()?setTimeout(function(){s.hasFocus()&&!s.state.focused&&Al(s)},20):Ni(this);for(var h in na)na.hasOwnProperty(h)&&na[h](this,n[h],Bi);dd(this),n.finishInit&&n.finishInit(this);for(var g=0;g<Jl.length;++g)Jl[g](this);ai(this),m&&n.lineWrapping&&getComputedStyle(f.lineDiv).textRendering=="optimizelegibility"&&(f.lineDiv.style.textRendering="auto")}Dt.defaults=ap,Dt.optionHandlers=na;function fw(e){var n=e.display;Be(n.scroller,"mousedown",Yt(e,np)),d&&p<11?Be(n.scroller,"dblclick",Yt(e,function(v){if(!Ht(e,v)){var y=ni(e,v);if(!(!y||Kl(e,v)||xr(e.display,v))){rn(v);var E=e.findWordAt(y);Ks(e.doc,E.anchor,E.head)}}})):Be(n.scroller,"dblclick",function(v){return Ht(e,v)||rn(v)}),Be(n.scroller,"contextmenu",function(v){return op(e,v)}),Be(n.input.getField(),"contextmenu",function(v){n.scroller.contains(v.target)||op(e,v)});var s,o={end:0};function l(){n.activeTouch&&(s=setTimeout(function(){return n.activeTouch=null},1e3),o=n.activeTouch,o.end=+new Date)}function f(v){if(v.touches.length!=1)return!1;var y=v.touches[0];return y.radiusX<=1&&y.radiusY<=1}function h(v,y){if(y.left==null)return!0;var E=y.left-v.left,N=y.top-v.top;return E*E+N*N>20*20}Be(n.scroller,"touchstart",function(v){if(!Ht(e,v)&&!f(v)&&!Kl(e,v)){n.input.ensurePolled(),clearTimeout(s);var y=+new Date;n.activeTouch={start:y,moved:!1,prev:y-o.end<=300?o:null},v.touches.length==1&&(n.activeTouch.left=v.touches[0].pageX,n.activeTouch.top=v.touches[0].pageY)}}),Be(n.scroller,"touchmove",function(){n.activeTouch&&(n.activeTouch.moved=!0)}),Be(n.scroller,"touchend",function(v){var y=n.activeTouch;if(y&&!xr(n,v)&&y.left!=null&&!y.moved&&new Date-y.start<300){var E=e.coordsChar(n.activeTouch,"page"),N;!y.prev||h(y,y.prev)?N=new vt(E,E):!y.prev.prev||h(y,y.prev.prev)?N=e.findWordAt(E):N=new vt(ee(E.line,0),le(e.doc,ee(E.line+1,0))),e.setSelection(N.anchor,N.head),e.focus(),rn(v)}l()}),Be(n.scroller,"touchcancel",l),Be(n.scroller,"scroll",function(){n.scroller.clientHeight&&(Eo(e,n.scroller.scrollTop),ii(e,n.scroller.scrollLeft,!0),qe(e,"scroll",e))}),Be(n.scroller,"mousewheel",function(v){return gd(e,v)}),Be(n.scroller,"DOMMouseScroll",function(v){return gd(e,v)}),Be(n.wrapper,"scroll",function(){return n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),n.dragFunctions={enter:function(v){Ht(e,v)||Zr(v)},over:function(v){Ht(e,v)||(Bb(e,v),Zr(v))},start:function(v){return Hb(e,v)},drop:Yt(e,Fb),leave:function(v){Ht(e,v)||$d(e)}};var g=n.input.getField();Be(g,"keyup",function(v){return ep.call(e,v)}),Be(g,"keydown",Yt(e,Xd)),Be(g,"keypress",Yt(e,tp)),Be(g,"focus",function(v){return Al(e,v)}),Be(g,"blur",function(v){return Ni(e,v)})}var Jl=[];Dt.defineInitHook=function(e){return Jl.push(e)};function Vo(e,n,s,o){var l=e.doc,f;s==null&&(s="add"),s=="smart"&&(l.mode.indent?f=bo(e,n).state:s="prev");var h=e.options.tabSize,g=pe(l,n),v=$t(g.text,null,h);g.stateAfter&&(g.stateAfter=null);var y=g.text.match(/^\s*/)[0],E;if(!o&&!/\S/.test(g.text))E=0,s="not";else if(s=="smart"&&(E=l.mode.indent(f,g.text.slice(y.length),g.text),E==et||E>150)){if(!o)return;s="prev"}s=="prev"?n>l.first?E=$t(pe(l,n-1).text,null,h):E=0:s=="add"?E=v+e.options.indentUnit:s=="subtract"?E=v-e.options.indentUnit:typeof s=="number"&&(E=v+s),E=Math.max(0,E);var N="",F=0;if(e.options.indentWithTabs)for(var z=Math.floor(E/h);z;--z)F+=h,N+="	";if(F<E&&(N+=Or(E-F)),N!=y)return zi(l,N,ee(n,0),ee(n,y.length),"+input"),g.stateAfter=null,!0;for(var V=0;V<l.sel.ranges.length;V++){var Q=l.sel.ranges[V];if(Q.head.line==n&&Q.head.ch<y.length){var ne=ee(n,y.length);$l(l,V,new vt(ne,ne));break}}}var er=null;function ra(e){er=e}function Ql(e,n,s,o,l){var f=e.doc;e.display.shift=!1,o||(o=f.sel);var h=+new Date-200,g=l=="paste"||e.state.pasteIncoming>h,v=po(n),y=null;if(g&&o.ranges.length>1)if(er&&er.text.join(`
`)==n){if(o.ranges.length%er.text.length==0){y=[];for(var E=0;E<er.text.length;E++)y.push(f.splitLines(er.text[E]))}}else v.length==o.ranges.length&&e.options.pasteLinesPerSelection&&(y=gt(v,function(oe){return[oe]}));for(var N=e.curOp.updateInput,F=o.ranges.length-1;F>=0;F--){var z=o.ranges[F],V=z.from(),Q=z.to();z.empty()&&(s&&s>0?V=ee(V.line,V.ch-s):e.state.overwrite&&!g?Q=ee(Q.line,Math.min(pe(f,Q.line).text.length,Q.ch+tt(v).length)):g&&er&&er.lineWise&&er.text.join(`
`)==v.join(`
`)&&(V=Q=ee(V.line,0)));var ne={from:V,to:Q,text:y?y[F%y.length]:v,origin:l||(g?"paste":e.state.cutIncoming>h?"cut":"+input")};Ri(e.doc,ne),Gt(e,"inputRead",e,ne)}n&&!g&&up(e,n),Di(e),e.curOp.updateInput<2&&(e.curOp.updateInput=N),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function lp(e,n){var s=e.clipboardData&&e.clipboardData.getData("Text");if(s)return e.preventDefault(),!n.isReadOnly()&&!n.options.disableInput&&Cn(n,function(){return Ql(n,s,0,null,"paste")}),!0}function up(e,n){if(!(!e.options.electricChars||!e.options.smartIndent))for(var s=e.doc.sel,o=s.ranges.length-1;o>=0;o--){var l=s.ranges[o];if(!(l.head.ch>100||o&&s.ranges[o-1].head.line==l.head.line)){var f=e.getModeAt(l.head),h=!1;if(f.electricChars){for(var g=0;g<f.electricChars.length;g++)if(n.indexOf(f.electricChars.charAt(g))>-1){h=Vo(e,l.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(pe(e.doc,l.head.line).text.slice(0,l.head.ch))&&(h=Vo(e,l.head.line,"smart"));h&&Gt(e,"electricInput",e,l.head.line)}}}function cp(e){for(var n=[],s=[],o=0;o<e.doc.sel.ranges.length;o++){var l=e.doc.sel.ranges[o].head.line,f={anchor:ee(l,0),head:ee(l+1,0)};s.push(f),n.push(e.getRange(f.anchor,f.head))}return{text:n,ranges:s}}function fp(e,n,s,o){e.setAttribute("autocorrect",s?"":"off"),e.setAttribute("autocapitalize",o?"":"off"),e.setAttribute("spellcheck",!!n)}function dp(){var e=q("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),n=q("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return m?e.style.width="1000px":e.setAttribute("wrap","off"),L&&(e.style.border="1px solid black"),fp(e),n}function dw(e){var n=e.optionHandlers,s=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(o,l){var f=this.options,h=f[o];f[o]==l&&o!="mode"||(f[o]=l,n.hasOwnProperty(o)&&Yt(this,n[o])(this,l,h),qe(this,"optionChange",this,o))},getOption:function(o){return this.options[o]},getDoc:function(){return this.doc},addKeyMap:function(o,l){this.state.keyMaps[l?"push":"unshift"](ea(o))},removeKeyMap:function(o){for(var l=this.state.keyMaps,f=0;f<l.length;++f)if(l[f]==o||l[f].name==o)return l.splice(f,1),!0},addOverlay:cn(function(o,l){var f=o.token?o:e.getMode(this.options,o);if(f.startState)throw new Error("Overlays may not be stateful.");Ut(this.state.overlays,{mode:f,modeSpec:o,opaque:l&&l.opaque,priority:l&&l.priority||0},function(h){return h.priority}),this.state.modeGen++,gn(this)}),removeOverlay:cn(function(o){for(var l=this.state.overlays,f=0;f<l.length;++f){var h=l[f].modeSpec;if(h==o||typeof o=="string"&&h.name==o){l.splice(f,1),this.state.modeGen++,gn(this);return}}}),indentLine:cn(function(o,l,f){typeof l!="string"&&typeof l!="number"&&(l==null?l=this.options.smartIndent?"smart":"prev":l=l?"add":"subtract"),Xr(this.doc,o)&&Vo(this,o,l,f)}),indentSelection:cn(function(o){for(var l=this.doc.sel.ranges,f=-1,h=0;h<l.length;h++){var g=l[h];if(g.empty())g.head.line>f&&(Vo(this,g.head.line,o,!0),f=g.head.line,h==this.doc.sel.primIndex&&Di(this));else{var v=g.from(),y=g.to(),E=Math.max(f,v.line);f=Math.min(this.lastLine(),y.line-(y.ch?0:1))+1;for(var N=E;N<f;++N)Vo(this,N,o);var F=this.doc.sel.ranges;v.ch==0&&l.length==F.length&&F[h].from().ch>0&&$l(this.doc,h,new vt(v,F[h].to()),ft)}}}),getTokenAt:function(o,l){return xf(this,o,l)},getLineTokens:function(o,l){return xf(this,ee(o),l,!0)},getTokenTypeAt:function(o){o=le(this.doc,o);var l=yf(this,pe(this.doc,o.line)),f=0,h=(l.length-1)/2,g=o.ch,v;if(g==0)v=l[2];else for(;;){var y=f+h>>1;if((y?l[y*2-1]:0)>=g)h=y;else if(l[y*2+1]<g)f=y+1;else{v=l[y*2+2];break}}var E=v?v.indexOf("overlay "):-1;return E<0?v:E==0?null:v.slice(0,E-1)},getModeAt:function(o){var l=this.doc.mode;return l.innerMode?e.innerMode(l,this.getTokenAt(o).state).mode:l},getHelper:function(o,l){return this.getHelpers(o,l)[0]},getHelpers:function(o,l){var f=[];if(!s.hasOwnProperty(l))return f;var h=s[l],g=this.getModeAt(o);if(typeof g[l]=="string")h[g[l]]&&f.push(h[g[l]]);else if(g[l])for(var v=0;v<g[l].length;v++){var y=h[g[l][v]];y&&f.push(y)}else g.helperType&&h[g.helperType]?f.push(h[g.helperType]):h[g.name]&&f.push(h[g.name]);for(var E=0;E<h._global.length;E++){var N=h._global[E];N.pred(g,this)&&ge(f,N.val)==-1&&f.push(N.val)}return f},getStateAfter:function(o,l){var f=this.doc;return o=ct(f,o??f.first+f.size-1),bo(this,o+1,l).state},cursorCoords:function(o,l){var f,h=this.doc.sel.primary();return o==null?f=h.head:typeof o=="object"?f=le(this.doc,o):f=o?h.from():h.to(),Zn(this,f,l||"page")},charCoords:function(o,l){return Fs(this,le(this.doc,o),l||"page")},coordsChar:function(o,l){return o=Jf(this,o,l||"page"),kl(this,o.left,o.top)},lineAtHeight:function(o,l){return o=Jf(this,{top:o,left:0},l||"page").top,ur(this.doc,o+this.display.viewOffset)},heightAtLine:function(o,l,f){var h=!1,g;if(typeof o=="number"){var v=this.doc.first+this.doc.size-1;o<this.doc.first?o=this.doc.first:o>v&&(o=v,h=!0),g=pe(this.doc,o)}else g=o;return js(this,g,{top:0,left:0},l||"page",f||h).top+(h?this.doc.height-wr(g):0)},defaultTextHeight:function(){return Oi(this.display)},defaultCharWidth:function(){return Ai(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(o,l,f,h,g){var v=this.display;o=Zn(this,le(this.doc,o));var y=o.bottom,E=o.left;if(l.style.position="absolute",l.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(l),v.sizer.appendChild(l),h=="over")y=o.top;else if(h=="above"||h=="near"){var N=Math.max(v.wrapper.clientHeight,this.doc.height),F=Math.max(v.sizer.clientWidth,v.lineSpace.clientWidth);(h=="above"||o.bottom+l.offsetHeight>N)&&o.top>l.offsetHeight?y=o.top-l.offsetHeight:o.bottom+l.offsetHeight<=N&&(y=o.bottom),E+l.offsetWidth>F&&(E=F-l.offsetWidth)}l.style.top=y+"px",l.style.left=l.style.right="",g=="right"?(E=v.sizer.clientWidth-l.offsetWidth,l.style.right="0px"):(g=="left"?E=0:g=="middle"&&(E=(v.sizer.clientWidth-l.offsetWidth)/2),l.style.left=E+"px"),f&&ub(this,{left:E,top:y,right:E+l.offsetWidth,bottom:y+l.offsetHeight})},triggerOnKeyDown:cn(Xd),triggerOnKeyPress:cn(tp),triggerOnKeyUp:ep,triggerOnMouseDown:cn(np),execCommand:function(o){if(Bo.hasOwnProperty(o))return Bo[o].call(null,this)},triggerElectric:cn(function(o){up(this,o)}),findPosH:function(o,l,f,h){var g=1;l<0&&(g=-1,l=-l);for(var v=le(this.doc,o),y=0;y<l&&(v=Zl(this.doc,v,g,f,h),!v.hitSide);++y);return v},moveH:cn(function(o,l){var f=this;this.extendSelectionsBy(function(h){return f.display.shift||f.doc.extend||h.empty()?Zl(f.doc,h.head,o,l,f.options.rtlMoveVisually):o<0?h.from():h.to()},Ge)}),deleteH:cn(function(o,l){var f=this.doc.sel,h=this.doc;f.somethingSelected()?h.replaceSelection("",null,"+delete"):Hi(this,function(g){var v=Zl(h,g.head,o,l,!1);return o<0?{from:v,to:g.head}:{from:g.head,to:v}})}),findPosV:function(o,l,f,h){var g=1,v=h;l<0&&(g=-1,l=-l);for(var y=le(this.doc,o),E=0;E<l;++E){var N=Zn(this,y,"div");if(v==null?v=N.left:N.left=v,y=pp(this,N,g,f),y.hitSide)break}return y},moveV:cn(function(o,l){var f=this,h=this.doc,g=[],v=!this.display.shift&&!h.extend&&h.sel.somethingSelected();if(h.extendSelectionsBy(function(E){if(v)return o<0?E.from():E.to();var N=Zn(f,E.head,"div");E.goalColumn!=null&&(N.left=E.goalColumn),g.push(N.left);var F=pp(f,N,o,l);return l=="page"&&E==h.sel.primary()&&Dl(f,Fs(f,F,"div").top-N.top),F},Ge),g.length)for(var y=0;y<h.sel.ranges.length;y++)h.sel.ranges[y].goalColumn=g[y]}),findWordAt:function(o){var l=this.doc,f=pe(l,o.line).text,h=o.ch,g=o.ch;if(f){var v=this.getHelper(o,"wordChars");(o.sticky=="before"||g==f.length)&&h?--h:++g;for(var y=f.charAt(h),E=$(y,v)?function(N){return $(N,v)}:/\s/.test(y)?function(N){return/\s/.test(N)}:function(N){return!/\s/.test(N)&&!$(N)};h>0&&E(f.charAt(h-1));)--h;for(;g<f.length&&E(f.charAt(g));)++g}return new vt(ee(o.line,h),ee(o.line,g))},toggleOverwrite:function(o){o!=null&&o==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?St(this.display.cursorDiv,"CodeMirror-overwrite"):H(this.display.cursorDiv,"CodeMirror-overwrite"),qe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ce()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:cn(function(o,l){Lo(this,o,l)}),getScrollInfo:function(){var o=this.display.scroller;return{left:o.scrollLeft,top:o.scrollTop,height:o.scrollHeight-fr(this)-this.display.barHeight,width:o.scrollWidth-fr(this)-this.display.barWidth,clientHeight:yl(this),clientWidth:ei(this)}},scrollIntoView:cn(function(o,l){o==null?(o={from:this.doc.sel.primary().head,to:null},l==null&&(l=this.options.cursorScrollMargin)):typeof o=="number"?o={from:ee(o,0),to:null}:o.from==null&&(o={from:o,to:null}),o.to||(o.to=o.from),o.margin=l||0,o.from.line!=null?cb(this,o):od(this,o.from,o.to,o.margin)}),setSize:cn(function(o,l){var f=this,h=function(v){return typeof v=="number"||/^\d+$/.test(String(v))?v+"px":v};o!=null&&(this.display.wrapper.style.width=h(o)),l!=null&&(this.display.wrapper.style.height=h(l)),this.options.lineWrapping&&Gf(this);var g=this.display.viewFrom;this.doc.iter(g,this.display.viewTo,function(v){if(v.widgets){for(var y=0;y<v.widgets.length;y++)if(v.widgets[y].noHScroll){Pr(f,g,"widget");break}}++g}),this.curOp.forceUpdate=!0,qe(this,"refresh",this)}),operation:function(o){return Cn(this,o)},startOperation:function(){return si(this)},endOperation:function(){return ai(this)},refresh:cn(function(){var o=this.display.cachedTextHeight;gn(this),this.curOp.forceUpdate=!0,Co(this),Lo(this,this.doc.scrollLeft,this.doc.scrollTop),_l(this.display),(o==null||Math.abs(o-Oi(this.display))>.5||this.options.lineWrapping)&&Ll(this),qe(this,"refresh",this)}),swapDoc:cn(function(o){var l=this.doc;return l.cm=null,this.state.selectingText&&this.state.selectingText(),bd(this,o),Co(this),this.display.input.reset(),Lo(this,o.scrollLeft,o.scrollTop),this.curOp.forceScroll=!0,Gt(this,"swapDoc",this,l),l}),phrase:function(o){var l=this.options.phrases;return l&&Object.prototype.hasOwnProperty.call(l,o)?l[o]:o},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},sr(e),e.registerHelper=function(o,l,f){s.hasOwnProperty(o)||(s[o]=e[o]={_global:[]}),s[o][l]=f},e.registerGlobalHelper=function(o,l,f,h){e.registerHelper(o,l,h),s[o]._global.push({pred:f,val:h})}}function Zl(e,n,s,o,l){var f=n,h=s,g=pe(e,n.line),v=l&&e.direction=="rtl"?-s:s;function y(){var ae=n.line+v;return ae<e.first||ae>=e.first+e.size?!1:(n=new ee(ae,n.ch,n.sticky),g=pe(e,ae))}function E(ae){var se;if(o=="codepoint"){var ue=g.text.charCodeAt(n.ch+(s>0?0:-1));if(isNaN(ue))se=null;else{var Fe=s>0?ue>=55296&&ue<56320:ue>=56320&&ue<57343;se=new ee(n.line,Math.max(0,Math.min(g.text.length,n.ch+s*(Fe?2:1))),-s)}}else l?se=Gb(e.cm,g,n,s):se=Vl(g,n,s);if(se==null)if(!ae&&y())n=Ul(l,e.cm,g,n.line,v);else return!1;else n=se;return!0}if(o=="char"||o=="codepoint")E();else if(o=="column")E(!0);else if(o=="word"||o=="group")for(var N=null,F=o=="group",z=e.cm&&e.cm.getHelper(n,"wordChars"),V=!0;!(s<0&&!E(!V));V=!1){var Q=g.text.charAt(n.ch)||`
`,ne=$(Q,z)?"w":F&&Q==`
`?"n":!F||/\s/.test(Q)?null:"p";if(F&&!V&&!ne&&(ne="s"),N&&N!=ne){s<0&&(s=1,E(),n.sticky="after");break}if(ne&&(N=ne),s>0&&!E(!V))break}var oe=Qs(e,n,f,h,!0);return D(f,oe)&&(oe.hitSide=!0),oe}function pp(e,n,s,o){var l=e.doc,f=n.left,h;if(o=="page"){var g=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),v=Math.max(g-.5*Oi(e.display),3);h=(s>0?n.bottom:n.top)+s*v}else o=="line"&&(h=s>0?n.bottom+3:n.top-3);for(var y;y=kl(e,f,h),!!y.outside;){if(s<0?h<=0:h>=l.height){y.hitSide=!0;break}h+=s*5}return y}var yt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Mt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};yt.prototype.init=function(e){var n=this,s=this,o=s.cm,l=s.div=e.lineDiv;l.contentEditable=!0,fp(l,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize);function f(g){for(var v=g.target;v;v=v.parentNode){if(v==l)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(v.className))break}return!1}Be(l,"paste",function(g){!f(g)||Ht(o,g)||lp(g,o)||p<=11&&setTimeout(Yt(o,function(){return n.updateFromDOM()}),20)}),Be(l,"compositionstart",function(g){n.composing={data:g.data,done:!1}}),Be(l,"compositionupdate",function(g){n.composing||(n.composing={data:g.data,done:!1})}),Be(l,"compositionend",function(g){n.composing&&(g.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),Be(l,"touchstart",function(){return s.forceCompositionEnd()}),Be(l,"input",function(){n.composing||n.readFromDOMSoon()});function h(g){if(!(!f(g)||Ht(o,g))){if(o.somethingSelected())ra({lineWise:!1,text:o.getSelections()}),g.type=="cut"&&o.replaceSelection("",null,"cut");else if(o.options.lineWiseCopyCut){var v=cp(o);ra({lineWise:!0,text:v.text}),g.type=="cut"&&o.operation(function(){o.setSelections(v.ranges,0,ft),o.replaceSelection("",null,"cut")})}else return;if(g.clipboardData){g.clipboardData.clearData();var y=er.text.join(`
`);if(g.clipboardData.setData("Text",y),g.clipboardData.getData("Text")==y){g.preventDefault();return}}var E=dp(),N=E.firstChild;o.display.lineSpace.insertBefore(E,o.display.lineSpace.firstChild),N.value=er.text.join(`
`);var F=ce();Mn(N),setTimeout(function(){o.display.lineSpace.removeChild(E),F.focus(),F==l&&s.showPrimarySelection()},50)}}Be(l,"copy",h),Be(l,"cut",h)},yt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},yt.prototype.prepareSelection=function(){var e=nd(this.cm,!1);return e.focus=ce()==this.div,e},yt.prototype.showSelection=function(e,n){!e||!this.cm.display.view.length||((e.focus||n)&&this.showPrimarySelection(),this.showMultipleSelections(e))},yt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},yt.prototype.showPrimarySelection=function(){var e=this.getSelection(),n=this.cm,s=n.doc.sel.primary(),o=s.from(),l=s.to();if(n.display.viewTo==n.display.viewFrom||o.line>=n.display.viewTo||l.line<n.display.viewFrom){e.removeAllRanges();return}var f=ia(n,e.anchorNode,e.anchorOffset),h=ia(n,e.focusNode,e.focusOffset);if(!(f&&!f.bad&&h&&!h.bad&&b(Ve(f,h),o)==0&&b(te(f,h),l)==0)){var g=n.display.view,v=o.line>=n.display.viewFrom&&hp(n,o)||{node:g[0].measure.map[2],offset:0},y=l.line<n.display.viewTo&&hp(n,l);if(!y){var E=g[g.length-1].measure,N=E.maps?E.maps[E.maps.length-1]:E.map;y={node:N[N.length-1],offset:N[N.length-2]-N[N.length-3]}}if(!v||!y){e.removeAllRanges();return}var F=e.rangeCount&&e.getRangeAt(0),z;try{z=Z(v.node,v.offset,y.offset,y.node)}catch{}z&&(!i&&n.state.focused?(e.collapse(v.node,v.offset),z.collapsed||(e.removeAllRanges(),e.addRange(z))):(e.removeAllRanges(),e.addRange(z)),F&&e.anchorNode==null?e.addRange(F):i&&this.startGracePeriod()),this.rememberSelection()}},yt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},yt.prototype.showMultipleSelections=function(e){W(this.cm.display.cursorDiv,e.cursors),W(this.cm.display.selectionDiv,e.selection)},yt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},yt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var n=e.getRangeAt(0).commonAncestorContainer;return X(this.div,n)},yt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ce()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},yt.prototype.blur=function(){this.div.blur()},yt.prototype.getField=function(){return this.div},yt.prototype.supportsTouch=function(){return!0},yt.prototype.receivedFocus=function(){var e=this,n=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Cn(this.cm,function(){return n.cm.curOp.selectionChanged=!0});function s(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,s))}this.polling.set(this.cm.options.pollInterval,s)},yt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},yt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),n=this.cm;if(A&&x&&this.cm.display.gutterSpecs.length&&pw(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var s=ia(n,e.anchorNode,e.anchorOffset),o=ia(n,e.focusNode,e.focusOffset);s&&o&&Cn(n,function(){sn(n.doc,_r(s,o),ft),(s.bad||o.bad)&&(n.curOp.selectionChanged=!0)})}}},yt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,n=e.display,s=e.doc.sel.primary(),o=s.from(),l=s.to();if(o.ch==0&&o.line>e.firstLine()&&(o=ee(o.line-1,pe(e.doc,o.line-1).length)),l.ch==pe(e.doc,l.line).text.length&&l.line<e.lastLine()&&(l=ee(l.line+1,0)),o.line<n.viewFrom||l.line>n.viewTo-1)return!1;var f,h,g;o.line==n.viewFrom||(f=ri(e,o.line))==0?(h=mt(n.view[0].line),g=n.view[0].node):(h=mt(n.view[f].line),g=n.view[f-1].node.nextSibling);var v=ri(e,l.line),y,E;if(v==n.view.length-1?(y=n.viewTo-1,E=n.lineDiv.lastChild):(y=mt(n.view[v+1].line)-1,E=n.view[v+1].node.previousSibling),!g)return!1;for(var N=e.doc.splitLines(hw(e,g,E,h,y)),F=lr(e.doc,ee(h,0),ee(y,pe(e.doc,y).text.length));N.length>1&&F.length>1;)if(tt(N)==tt(F))N.pop(),F.pop(),y--;else if(N[0]==F[0])N.shift(),F.shift(),h++;else break;for(var z=0,V=0,Q=N[0],ne=F[0],oe=Math.min(Q.length,ne.length);z<oe&&Q.charCodeAt(z)==ne.charCodeAt(z);)++z;for(var ae=tt(N),se=tt(F),ue=Math.min(ae.length-(N.length==1?z:0),se.length-(F.length==1?z:0));V<ue&&ae.charCodeAt(ae.length-V-1)==se.charCodeAt(se.length-V-1);)++V;if(N.length==1&&F.length==1&&h==o.line)for(;z&&z>o.ch&&ae.charCodeAt(ae.length-V-1)==se.charCodeAt(se.length-V-1);)z--,V++;N[N.length-1]=ae.slice(0,ae.length-V).replace(/^\u200b+/,""),N[0]=N[0].slice(z).replace(/\u200b+$/,"");var Fe=ee(h,z),me=ee(y,F.length?tt(F).length-V:0);if(N.length>1||N[0]||b(Fe,me))return zi(e.doc,N,Fe,me,"+input"),!0},yt.prototype.ensurePolled=function(){this.forceCompositionEnd()},yt.prototype.reset=function(){this.forceCompositionEnd()},yt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},yt.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},yt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Cn(this.cm,function(){return gn(e.cm)})},yt.prototype.setUneditable=function(e){e.contentEditable="false"},yt.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Yt(this.cm,Ql)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},yt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},yt.prototype.onContextMenu=function(){},yt.prototype.resetPosition=function(){},yt.prototype.needsContentAttribute=!0;function hp(e,n){var s=bl(e,n.line);if(!s||s.hidden)return null;var o=pe(e.doc,n.line),l=Wf(s,o,n.line),f=kn(o,e.doc.direction),h="left";if(f){var g=_t(f,n.ch);h=g%2?"right":"left"}var v=Vf(l.map,n.ch,h);return v.offset=v.collapse=="right"?v.end:v.start,v}function pw(e){for(var n=e;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}function Wi(e,n){return n&&(e.bad=!0),e}function hw(e,n,s,o,l){var f="",h=!1,g=e.doc.lineSeparator(),v=!1;function y(z){return function(V){return V.id==z}}function E(){h&&(f+=g,v&&(f+=g),h=v=!1)}function N(z){z&&(E(),f+=z)}function F(z){if(z.nodeType==1){var V=z.getAttribute("cm-text");if(V){N(V);return}var Q=z.getAttribute("cm-marker"),ne;if(Q){var oe=e.findMarks(ee(o,0),ee(l+1,0),y(+Q));oe.length&&(ne=oe[0].find(0))&&N(lr(e.doc,ne.from,ne.to).join(g));return}if(z.getAttribute("contenteditable")=="false")return;var ae=/^(pre|div|p|li|table|br)$/i.test(z.nodeName);if(!/^br$/i.test(z.nodeName)&&z.textContent.length==0)return;ae&&E();for(var se=0;se<z.childNodes.length;se++)F(z.childNodes[se]);/^(pre|p)$/i.test(z.nodeName)&&(v=!0),ae&&(h=!0)}else z.nodeType==3&&N(z.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;F(n),n!=s;)n=n.nextSibling,v=!1;return f}function ia(e,n,s){var o;if(n==e.display.lineDiv){if(o=e.display.lineDiv.childNodes[s],!o)return Wi(e.clipPos(ee(e.display.viewTo-1)),!0);n=null,s=0}else for(o=n;;o=o.parentNode){if(!o||o==e.display.lineDiv)return null;if(o.parentNode&&o.parentNode==e.display.lineDiv)break}for(var l=0;l<e.display.view.length;l++){var f=e.display.view[l];if(f.node==o)return gw(f,n,s)}}function gw(e,n,s){var o=e.text.firstChild,l=!1;if(!n||!X(o,n))return Wi(ee(mt(e.line),0),!0);if(n==o&&(l=!0,n=o.childNodes[s],s=0,!n)){var f=e.rest?tt(e.rest):e.line;return Wi(ee(mt(f),f.text.length),l)}var h=n.nodeType==3?n:null,g=n;for(!h&&n.childNodes.length==1&&n.firstChild.nodeType==3&&(h=n.firstChild,s&&(s=h.nodeValue.length));g.parentNode!=o;)g=g.parentNode;var v=e.measure,y=v.maps;function E(ne,oe,ae){for(var se=-1;se<(y?y.length:0);se++)for(var ue=se<0?v.map:y[se],Fe=0;Fe<ue.length;Fe+=3){var me=ue[Fe+2];if(me==ne||me==oe){var Xe=mt(se<0?e.line:e.rest[se]),Tt=ue[Fe]+ae;return(ae<0||me!=ne)&&(Tt=ue[Fe+(ae?1:0)]),ee(Xe,Tt)}}}var N=E(h,g,s);if(N)return Wi(N,l);for(var F=g.nextSibling,z=h?h.nodeValue.length-s:0;F;F=F.nextSibling){if(N=E(F,F.firstChild,0),N)return Wi(ee(N.line,N.ch-z),l);z+=F.textContent.length}for(var V=g.previousSibling,Q=s;V;V=V.previousSibling){if(N=E(V,V.firstChild,-1),N)return Wi(ee(N.line,N.ch+Q),l);Q+=V.textContent.length}}var Ft=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Mt,this.hasSelection=!1,this.composing=null};Ft.prototype.init=function(e){var n=this,s=this,o=this.cm;this.createField(e);var l=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),L&&(l.style.width="0px"),Be(l,"input",function(){d&&p>=9&&n.hasSelection&&(n.hasSelection=null),s.poll()}),Be(l,"paste",function(h){Ht(o,h)||lp(h,o)||(o.state.pasteIncoming=+new Date,s.fastPoll())});function f(h){if(!Ht(o,h)){if(o.somethingSelected())ra({lineWise:!1,text:o.getSelections()});else if(o.options.lineWiseCopyCut){var g=cp(o);ra({lineWise:!0,text:g.text}),h.type=="cut"?o.setSelections(g.ranges,null,ft):(s.prevInput="",l.value=g.text.join(`
`),Mn(l))}else return;h.type=="cut"&&(o.state.cutIncoming=+new Date)}}Be(l,"cut",f),Be(l,"copy",f),Be(e.scroller,"paste",function(h){if(!(xr(e,h)||Ht(o,h))){if(!l.dispatchEvent){o.state.pasteIncoming=+new Date,s.focus();return}var g=new Event("paste");g.clipboardData=h.clipboardData,l.dispatchEvent(g)}}),Be(e.lineSpace,"selectstart",function(h){xr(e,h)||rn(h)}),Be(l,"compositionstart",function(){var h=o.getCursor("from");s.composing&&s.composing.range.clear(),s.composing={start:h,range:o.markText(h,o.getCursor("to"),{className:"CodeMirror-composing"})}}),Be(l,"compositionend",function(){s.composing&&(s.poll(),s.composing.range.clear(),s.composing=null)})},Ft.prototype.createField=function(e){this.wrapper=dp(),this.textarea=this.wrapper.firstChild},Ft.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ft.prototype.prepareSelection=function(){var e=this.cm,n=e.display,s=e.doc,o=nd(e);if(e.options.moveInputWithCursor){var l=Zn(e,s.sel.primary().head,"div"),f=n.wrapper.getBoundingClientRect(),h=n.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,l.top+h.top-f.top)),o.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,l.left+h.left-f.left))}return o},Ft.prototype.showSelection=function(e){var n=this.cm,s=n.display;W(s.cursorDiv,e.cursors),W(s.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ft.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var n=this.cm;if(n.somethingSelected()){this.prevInput="";var s=n.getSelection();this.textarea.value=s,n.state.focused&&Mn(this.textarea),d&&p>=9&&(this.hasSelection=s)}else e||(this.prevInput=this.textarea.value="",d&&p>=9&&(this.hasSelection=null))}},Ft.prototype.getField=function(){return this.textarea},Ft.prototype.supportsTouch=function(){return!1},Ft.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!I||ce()!=this.textarea))try{this.textarea.focus()}catch{}},Ft.prototype.blur=function(){this.textarea.blur()},Ft.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ft.prototype.receivedFocus=function(){this.slowPoll()},Ft.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ft.prototype.fastPoll=function(){var e=!1,n=this;n.pollingFast=!0;function s(){var o=n.poll();!o&&!e?(e=!0,n.polling.set(60,s)):(n.pollingFast=!1,n.slowPoll())}n.polling.set(20,s)},Ft.prototype.poll=function(){var e=this,n=this.cm,s=this.textarea,o=this.prevInput;if(this.contextMenuPending||!n.state.focused||Ms(s)&&!o&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq)return!1;var l=s.value;if(l==o&&!n.somethingSelected())return!1;if(d&&p>=9&&this.hasSelection===l||k&&/[\uf700-\uf7ff]/.test(l))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu){var f=l.charCodeAt(0);if(f==8203&&!o&&(o="\u200B"),f==8666)return this.reset(),this.cm.execCommand("undo")}for(var h=0,g=Math.min(o.length,l.length);h<g&&o.charCodeAt(h)==l.charCodeAt(h);)++h;return Cn(n,function(){Ql(n,l.slice(h),o.length-h,null,e.composing?"*compose":null),l.length>1e3||l.indexOf(`
`)>-1?s.value=e.prevInput="":e.prevInput=l,e.composing&&(e.composing.range.clear(),e.composing.range=n.markText(e.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ft.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ft.prototype.onKeyPress=function(){d&&p>=9&&(this.hasSelection=null),this.fastPoll()},Ft.prototype.onContextMenu=function(e){var n=this,s=n.cm,o=s.display,l=n.textarea;n.contextMenuPending&&n.contextMenuPending();var f=ni(s,e),h=o.scroller.scrollTop;if(!f||S)return;var g=s.options.resetSelectionOnContextMenu;g&&s.doc.sel.contains(f)==-1&&Yt(s,sn)(s.doc,_r(f),ft);var v=l.style.cssText,y=n.wrapper.style.cssText,E=n.wrapper.offsetParent.getBoundingClientRect();n.wrapper.style.cssText="position: static",l.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-E.top-5)+"px; left: "+(e.clientX-E.left-5)+`px;
      z-index: 1000; background: `+(d?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var N;m&&(N=window.scrollY),o.input.focus(),m&&window.scrollTo(null,N),o.input.reset(),s.somethingSelected()||(l.value=n.prevInput=" "),n.contextMenuPending=z,o.selForContextMenu=s.doc.sel,clearTimeout(o.detectingSelectAll);function F(){if(l.selectionStart!=null){var Q=s.somethingSelected(),ne="\u200B"+(Q?l.value:"");l.value="\u21DA",l.value=ne,n.prevInput=Q?"":"\u200B",l.selectionStart=1,l.selectionEnd=ne.length,o.selForContextMenu=s.doc.sel}}function z(){if(n.contextMenuPending==z&&(n.contextMenuPending=!1,n.wrapper.style.cssText=y,l.style.cssText=v,d&&p<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=h),l.selectionStart!=null)){(!d||d&&p<9)&&F();var Q=0,ne=function(){o.selForContextMenu==s.doc.sel&&l.selectionStart==0&&l.selectionEnd>0&&n.prevInput=="\u200B"?Yt(s,Dd)(s):Q++<10?o.detectingSelectAll=setTimeout(ne,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(ne,200)}}if(d&&p>=9&&F(),B){Zr(e);var V=function(){pn(window,"mouseup",V),setTimeout(z,20)};Be(window,"mouseup",V)}else setTimeout(z,50)},Ft.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Ft.prototype.setUneditable=function(){},Ft.prototype.needsContentAttribute=!1;function mw(e,n){if(n=n?Xt(n):{},n.value=e.value,!n.tabindex&&e.tabIndex&&(n.tabindex=e.tabIndex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),n.autofocus==null){var s=ce();n.autofocus=s==e||e.getAttribute("autofocus")!=null&&s==document.body}function o(){e.value=g.getValue()}var l;if(e.form&&(Be(e.form,"submit",o),!n.leaveSubmitMethodAlone)){var f=e.form;l=f.submit;try{var h=f.submit=function(){o(),f.submit=l,f.submit(),f.submit=h}}catch{}}n.finishInit=function(v){v.save=o,v.getTextArea=function(){return e},v.toTextArea=function(){v.toTextArea=isNaN,o(),e.parentNode.removeChild(v.getWrapperElement()),e.style.display="",e.form&&(pn(e.form,"submit",o),!n.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=l))}},e.style.display="none";var g=Dt(function(v){return e.parentNode.insertBefore(v,e.nextSibling)},n);return g}function vw(e){e.off=pn,e.on=Be,e.wheelEventPixels=Cb,e.Doc=mn,e.splitLines=po,e.countColumn=$t,e.findColumn=Vt,e.isWordChar=Ct,e.Pass=et,e.signal=qe,e.Line=Li,e.changeEnd=Rr,e.scrollbarModel=ld,e.Pos=ee,e.cmpPos=b,e.modes=Hn,e.mimeModes=Dn,e.resolveMode=Si,e.getMode=Ci,e.modeExtensions=Kn,e.extendMode=Jn,e.copyState=Pn,e.startState=mo,e.innerMode=go,e.commands=Bo,e.keyMap=Sr,e.keyName=Yd,e.isModifierKey=Ud,e.lookupKey=Fi,e.normalizeKeyMap=Ub,e.StringStream=Rt,e.SharedTextMarker=jo,e.TextMarker=jr,e.LineWidget=zo,e.e_preventDefault=rn,e.e_stopPropagation=ki,e.e_stop=Zr,e.addClass=St,e.contains=X,e.rmClass=H,e.keyNames=Fr}lw(Dt),dw(Dt);var yw="iter insert remove copy getEditor constructor".split(" ");for(var oa in mn.prototype)mn.prototype.hasOwnProperty(oa)&&ge(yw,oa)<0&&(Dt.prototype[oa]=function(e){return function(){return e.apply(this.doc,arguments)}}(mn.prototype[oa]));return sr(mn),Dt.inputStyles={textarea:Ft,contenteditable:yt},Dt.defineMode=function(e){!Dt.defaults.mode&&e!="null"&&(Dt.defaults.mode=e),As.apply(this,arguments)},Dt.defineMIME=yr,Dt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Dt.defineMIME("text/plain","null"),Dt.defineExtension=function(e,n){Dt.prototype[e]=n},Dt.defineDocExtension=function(e,n){mn.prototype[e]=n},Dt.fromTextArea=mw,vw(Dt),Dt.version="5.65.2",Dt})});var fu=It((Kp,Jp)=>{(function(r){typeof Kp=="object"&&typeof Jp=="object"?r(Tr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)})(function(r){"use strict";r.defineMode("javascript",function(t,i){var a=t.indentUnit,u=i.statementIndent,c=i.jsonld,d=i.json||c,p=i.trackScope!==!1,m=i.typescript,w=i.wordCharacters||/[\w$\xa1-\uffff]/,x=function(){function b(on){return{type:on,style:"keyword"}}var D=b("keyword a"),J=b("keyword b"),te=b("keyword c"),Ve=b("keyword d"),ct=b("operator"),le={type:"atom",style:"atom"};return{if:b("if"),while:D,with:D,else:J,do:J,try:J,finally:J,return:Ve,break:Ve,continue:Ve,new:b("new"),delete:te,void:te,throw:te,debugger:b("debugger"),var:b("var"),const:b("var"),let:b("var"),function:b("function"),catch:b("catch"),for:b("for"),switch:b("switch"),case:b("case"),default:b("default"),in:ct,typeof:ct,instanceof:ct,true:le,false:le,null:le,undefined:le,NaN:le,Infinity:le,this:b("this"),class:b("class"),super:b("atom"),yield:te,export:b("export"),import:b("import"),extends:te,await:te}}(),S=/[+\-*&%=<>!?|~^@]/,T=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function M(b){for(var D=!1,J,te=!1;(J=b.next())!=null;){if(!D){if(J=="/"&&!te)return;J=="["?te=!0:te&&J=="]"&&(te=!1)}D=!D&&J=="\\"}}var O,L;function A(b,D,J){return O=b,L=J,D}function I(b,D){var J=b.next();if(J=='"'||J=="'")return D.tokenize=k(J),D.tokenize(b,D);if(J=="."&&b.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return A("number","number");if(J=="."&&b.match(".."))return A("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(J))return A(J);if(J=="="&&b.eat(">"))return A("=>","operator");if(J=="0"&&b.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return A("number","number");if(/\d/.test(J))return b.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),A("number","number");if(J=="/")return b.eat("*")?(D.tokenize=_,_(b,D)):b.eat("/")?(b.skipToEnd(),A("comment","comment")):ee(b,D,1)?(M(b),b.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),A("regexp","string-2")):(b.eat("="),A("operator","operator",b.current()));if(J=="`")return D.tokenize=P,P(b,D);if(J=="#"&&b.peek()=="!")return b.skipToEnd(),A("meta","meta");if(J=="#"&&b.eatWhile(w))return A("variable","property");if(J=="<"&&b.match("!--")||J=="-"&&b.match("->")&&!/\S/.test(b.string.slice(0,b.start)))return b.skipToEnd(),A("comment","comment");if(S.test(J))return(J!=">"||!D.lexical||D.lexical.type!=">")&&(b.eat("=")?(J=="!"||J=="=")&&b.eat("="):/[<>*+\-|&?]/.test(J)&&(b.eat(J),J==">"&&b.eat(J))),J=="?"&&b.eat(".")?A("."):A("operator","operator",b.current());if(w.test(J)){b.eatWhile(w);var te=b.current();if(D.lastType!="."){if(x.propertyIsEnumerable(te)){var Ve=x[te];return A(Ve.type,Ve.style,te)}if(te=="async"&&b.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return A("async","keyword",te)}return A("variable","variable",te)}}function k(b){return function(D,J){var te=!1,Ve;if(c&&D.peek()=="@"&&D.match(T))return J.tokenize=I,A("jsonld-keyword","meta");for(;(Ve=D.next())!=null&&!(Ve==b&&!te);)te=!te&&Ve=="\\";return te||(J.tokenize=I),A("string","string")}}function _(b,D){for(var J=!1,te;te=b.next();){if(te=="/"&&J){D.tokenize=I;break}J=te=="*"}return A("comment","comment")}function P(b,D){for(var J=!1,te;(te=b.next())!=null;){if(!J&&(te=="`"||te=="$"&&b.eat("{"))){D.tokenize=I;break}J=!J&&te=="\\"}return A("quasi","string-2",b.current())}var R="([{}])";function j(b,D){D.fatArrowAt&&(D.fatArrowAt=null);var J=b.string.indexOf("=>",b.start);if(!(J<0)){if(m){var te=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(b.string.slice(b.start,J));te&&(J=te.index)}for(var Ve=0,ct=!1,le=J-1;le>=0;--le){var on=b.string.charAt(le),In=R.indexOf(on);if(In>=0&&In<3){if(!Ve){++le;break}if(--Ve==0){on=="("&&(ct=!0);break}}else if(In>=3&&In<6)++Ve;else if(w.test(on))ct=!0;else if(/["'\/`]/.test(on))for(;;--le){if(le==0)return;var Ti=b.string.charAt(le-1);if(Ti==on&&b.string.charAt(le-2)!="\\"){le--;break}}else if(ct&&!Ve){++le;break}}ct&&!Ve&&(D.fatArrowAt=le)}}var B={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function K(b,D,J,te,Ve,ct){this.indented=b,this.column=D,this.type=J,this.prev=Ve,this.info=ct,te!=null&&(this.align=te)}function H(b,D){if(!p)return!1;for(var J=b.localVars;J;J=J.next)if(J.name==D)return!0;for(var te=b.context;te;te=te.prev)for(var J=te.vars;J;J=J.next)if(J.name==D)return!0}function ie(b,D,J,te,Ve){var ct=b.cc;for(W.state=b,W.stream=Ve,W.marked=null,W.cc=ct,W.style=D,b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);;){var le=ct.length?ct.pop():d?Ge:ft;if(le(J,te)){for(;ct.length&&ct[ct.length-1].lex;)ct.pop()();return W.marked?W.marked:J=="variable"&&H(b,te)?"variable-2":D}}}var W={state:null,column:null,marked:null,cc:null};function q(){for(var b=arguments.length-1;b>=0;b--)W.cc.push(arguments[b])}function C(){return q.apply(null,arguments),!0}function Z(b,D){for(var J=D;J;J=J.next)if(J.name==b)return!0;return!1}function X(b){var D=W.state;if(W.marked="def",!!p){if(D.context){if(D.lexical.info=="var"&&D.context&&D.context.block){var J=ce(b,D.context);if(J!=null){D.context=J;return}}else if(!Z(b,D.localVars)){D.localVars=new Mn(b,D.localVars);return}}i.globalVars&&!Z(b,D.globalVars)&&(D.globalVars=new Mn(b,D.globalVars))}}function ce(b,D){if(D)if(D.block){var J=ce(b,D.prev);return J?J==D.prev?D:new Zt(J,D.vars,!0):null}else return Z(b,D.vars)?D:new Zt(D.prev,new Mn(b,D.vars),!1);else return null}function St(b){return b=="public"||b=="private"||b=="protected"||b=="abstract"||b=="readonly"}function Zt(b,D,J){this.prev=b,this.vars=D,this.block=J}function Mn(b,D){this.name=b,this.next=D}var Kr=new Mn("this",new Mn("arguments",null));function Xt(){W.state.context=new Zt(W.state.context,W.state.localVars,!1),W.state.localVars=Kr}function $t(){W.state.context=new Zt(W.state.context,W.state.localVars,!0),W.state.localVars=null}Xt.lex=$t.lex=!0;function Mt(){W.state.localVars=W.state.context.vars,W.state.context=W.state.context.prev}Mt.lex=!0;function ge(b,D){var J=function(){var te=W.state,Ve=te.indented;if(te.lexical.type=="stat")Ve=te.lexical.indented;else for(var ct=te.lexical;ct&&ct.type==")"&&ct.align;ct=ct.prev)Ve=ct.indented;te.lexical=new K(Ve,W.stream.column(),b,null,te.lexical,D)};return J.lex=!0,J}function $e(){var b=W.state;b.lexical.prev&&(b.lexical.type==")"&&(b.indented=b.lexical.indented),b.lexical=b.lexical.prev)}$e.lex=!0;function et(b){function D(J){return J==b?C():b==";"||J=="}"||J==")"||J=="]"?q():C(D)}return D}function ft(b,D){return b=="var"?C(ge("vardef",D),co,et(";"),$e):b=="keyword a"?C(ge("form"),Yn,ft,$e):b=="keyword b"?C(ge("form"),ft,$e):b=="keyword d"?W.stream.match(/^\s*$/,!1)?C():C(ge("stat"),tt,et(";"),$e):b=="debugger"?C(et(";")):b=="{"?C(ge("}"),$t,kn,$e,Mt):b==";"?C():b=="if"?(W.state.lexical.info=="else"&&W.state.cc[W.state.cc.length-1]==$e&&W.state.cc.pop()(),C(ge("form"),Yn,ft,$e,Ms)):b=="function"?C(Hn):b=="for"?C(ge("form"),$t,Os,ft,Mt,$e):b=="class"||m&&D=="interface"?(W.marked="keyword",C(ge("form",b=="class"?b:D),Ci,$e)):b=="variable"?m&&D=="declare"?(W.marked="keyword",C(ft)):m&&(D=="module"||D=="enum"||D=="type")&&W.stream.match(/^\s*\w/,!1)?(W.marked="keyword",D=="enum"?C(ur):D=="type"?C(As,et("operator"),qe,et(";")):C(ge("form"),hn,et("{"),ge("}"),kn,$e,$e)):m&&D=="namespace"?(W.marked="keyword",C(ge("form"),Ge,ft,$e)):m&&D=="abstract"?(W.marked="keyword",C(ft)):C(ge("stat"),ot):b=="switch"?C(ge("form"),Yn,et("{"),ge("}","switch"),$t,kn,$e,$e,Mt):b=="case"?C(Ge,et(":")):b=="default"?C(et(":")):b=="catch"?C(ge("form"),Xt,it,ft,$e,Mt):b=="export"?C(ge("stat"),go,$e):b=="import"?C(ge("stat"),Rt,$e):b=="async"?C(ft):D=="@"?C(Ge,ft):q(ge("stat"),Ge,et(";"),$e)}function it(b){if(b=="(")return C(yr,et(")"))}function Ge(b,D){return Or(b,D,!1)}function Vt(b,D){return Or(b,D,!0)}function Yn(b){return b!="("?q():C(ge(")"),tt,et(")"),$e)}function Or(b,D,J){if(W.state.fatArrowAt==W.stream.start){var te=J?Ct:Jr;if(b=="(")return C(Xt,ge(")"),_t(yr,")"),$e,et("=>"),te,Mt);if(b=="variable")return q(Xt,hn,et("=>"),te,Mt)}var Ve=J?Ut:gt;return B.hasOwnProperty(b)?C(Ve):b=="function"?C(Hn,Ve):b=="class"||m&&D=="interface"?(W.marked="keyword",C(ge("form"),Si,$e)):b=="keyword c"||b=="async"?C(J?Vt:Ge):b=="("?C(ge(")"),tt,et(")"),$e,Ve):b=="operator"||b=="spread"?C(J?Vt:Ge):b=="["?C(ge("]"),mt,$e,Ve):b=="{"?Qr(or,"}",null,Ve):b=="quasi"?q(On,Ve):b=="new"?C($(J)):C()}function tt(b){return b.match(/[;\}\)\],]/)?q():q(Ge)}function gt(b,D){return b==","?C(tt):Ut(b,D,!1)}function Ut(b,D,J){var te=J==!1?gt:Ut,Ve=J==!1?Ge:Vt;if(b=="=>")return C(Xt,J?Ct:Jr,Mt);if(b=="operator")return/\+\+|--/.test(D)||m&&D=="!"?C(te):m&&D=="<"&&W.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?C(ge(">"),_t(qe,">"),$e,te):D=="?"?C(Ge,et(":"),Ve):C(Ve);if(b=="quasi")return q(On,te);if(b!=";"){if(b=="(")return Qr(Vt,")","call",te);if(b==".")return C(un,te);if(b=="[")return C(ge("]"),tt,et("]"),$e,te);if(m&&D=="as")return W.marked="keyword",C(qe,te);if(b=="regexp")return W.state.lastType=W.marked="operator",W.stream.backUp(W.stream.pos-W.stream.start-1),C(Ve)}}function On(b,D){return b!="quasi"?q():D.slice(D.length-2)!="${"?C(On):C(tt,Fn)}function Fn(b){if(b=="}")return W.marked="string-2",W.state.tokenize=P,C(On)}function Jr(b){return j(W.stream,W.state),q(b=="{"?ft:Ge)}function Ct(b){return j(W.stream,W.state),q(b=="{"?ft:Vt)}function $(b){return function(D){return D=="."?C(b?G:re):D=="variable"&&m?C(Zr,b?Ut:gt):q(b?Vt:Ge)}}function re(b,D){if(D=="target")return W.marked="keyword",C(gt)}function G(b,D){if(D=="target")return W.marked="keyword",C(Ut)}function ot(b){return b==":"?C($e,ft):q(gt,et(";"),$e)}function un(b){if(b=="variable")return W.marked="property",C()}function or(b,D){if(b=="async")return W.marked="property",C(or);if(b=="variable"||W.style=="keyword"){if(W.marked="property",D=="get"||D=="set")return C(ll);var J;return m&&W.state.fatArrowAt==W.stream.start&&(J=W.stream.match(/^\s*:\s*/,!1))&&(W.state.fatArrowAt=W.stream.pos+J[0].length),C(An)}else{if(b=="number"||b=="string")return W.marked=c?"property":W.style+" property",C(An);if(b=="jsonld-keyword")return C(An);if(m&&St(D))return W.marked="keyword",C(or);if(b=="[")return C(Ge,vr,et("]"),An);if(b=="spread")return C(Vt,An);if(D=="*")return W.marked="keyword",C(or);if(b==":")return q(An)}}function ll(b){return b!="variable"?q(An):(W.marked="property",C(Hn))}function An(b){if(b==":")return C(Vt);if(b=="(")return q(Hn)}function _t(b,D,J){function te(Ve,ct){if(J?J.indexOf(Ve)>-1:Ve==","){var le=W.state.lexical;return le.info=="call"&&(le.pos=(le.pos||0)+1),C(function(on,In){return on==D||In==D?q():q(b)},te)}return Ve==D||ct==D?C():J&&J.indexOf(";")>-1?q(b):C(et(D))}return function(Ve,ct){return Ve==D||ct==D?C():q(b,te)}}function Qr(b,D,J){for(var te=3;te<arguments.length;te++)W.cc.push(arguments[te]);return C(ge(D,J),_t(b,D),$e)}function kn(b){return b=="}"?C():q(ft,kn)}function vr(b,D){if(m){if(b==":")return C(qe);if(D=="?")return C(vr)}}function Be(b,D){if(m&&(b==":"||D=="in"))return C(qe)}function wi(b){if(m&&b==":")return W.stream.match(/^\s*\w+\s+is\b/,!1)?C(Ge,pn,qe):C(qe)}function pn(b,D){if(D=="is")return W.marked="keyword",C()}function qe(b,D){if(D=="keyof"||D=="typeof"||D=="infer"||D=="readonly")return W.marked="keyword",C(D=="typeof"?Vt:qe);if(b=="variable"||D=="void")return W.marked="type",C(Nn);if(D=="|"||D=="&")return C(qe);if(b=="string"||b=="number"||b=="atom")return C(Nn);if(b=="[")return C(ge("]"),_t(qe,"]",","),$e,Nn);if(b=="{")return C(ge("}"),xi,$e,Nn);if(b=="(")return C(_t(ki,")"),Ht,Nn);if(b=="<")return C(_t(qe,">"),qe);if(b=="quasi")return q(sr,Nn)}function Ht(b){if(b=="=>")return C(qe)}function xi(b){return b.match(/[\}\)\]]/)?C():b==","||b==";"?C(xi):q(en,xi)}function en(b,D){if(b=="variable"||W.style=="keyword")return W.marked="property",C(en);if(D=="?"||b=="number"||b=="string")return C(en);if(b==":")return C(qe);if(b=="[")return C(et("variable"),Be,et("]"),en);if(b=="(")return q(Dn,en);if(!b.match(/[;\}\)\],]/))return C()}function sr(b,D){return b!="quasi"?q():D.slice(D.length-2)!="${"?C(sr):C(qe,rn)}function rn(b){if(b=="}")return W.marked="string-2",W.state.tokenize=P,C(sr)}function ki(b,D){return b=="variable"&&W.stream.match(/^\s*[?:]/,!1)||D=="?"?C(ki):b==":"?C(qe):b=="spread"?C(ki):q(qe)}function Nn(b,D){if(D=="<")return C(ge(">"),_t(qe,">"),$e,Nn);if(D=="|"||b=="."||D=="&")return C(qe);if(b=="[")return C(qe,et("]"),Nn);if(D=="extends"||D=="implements")return W.marked="keyword",C(qe);if(D=="?")return C(qe,et(":"),qe)}function Zr(b,D){if(D=="<")return C(ge(">"),_t(qe,">"),$e,Nn)}function Ar(){return q(qe,Ls)}function Ls(b,D){if(D=="=")return C(qe)}function co(b,D){return D=="enum"?(W.marked="keyword",C(ur)):q(hn,vr,ar,po)}function hn(b,D){if(m&&St(D))return W.marked="keyword",C(hn);if(b=="variable")return X(D),C();if(b=="spread")return C(hn);if(b=="[")return Qr(fo,"]");if(b=="{")return Qr(Es,"}")}function Es(b,D){return b=="variable"&&!W.stream.match(/^\s*:/,!1)?(X(D),C(ar)):(b=="variable"&&(W.marked="property"),b=="spread"?C(hn):b=="}"?q():b=="["?C(Ge,et("]"),et(":"),Es):C(et(":"),hn,ar))}function fo(){return q(hn,ar)}function ar(b,D){if(D=="=")return C(Vt)}function po(b){if(b==",")return C(co)}function Ms(b,D){if(b=="keyword b"&&D=="else")return C(ge("form","else"),ft,$e)}function Os(b,D){if(D=="await")return C(Os);if(b=="(")return C(ge(")"),ho,$e)}function ho(b){return b=="var"?C(co,Nr):b=="variable"?C(Nr):q(Nr)}function Nr(b,D){return b==")"?C():b==";"?C(Nr):D=="in"||D=="of"?(W.marked="keyword",C(Ge,Nr)):q(Ge,Nr)}function Hn(b,D){if(D=="*")return W.marked="keyword",C(Hn);if(b=="variable")return X(D),C(Hn);if(b=="(")return C(Xt,ge(")"),_t(yr,")"),$e,wi,ft,Mt);if(m&&D=="<")return C(ge(">"),_t(Ar,">"),$e,Hn)}function Dn(b,D){if(D=="*")return W.marked="keyword",C(Dn);if(b=="variable")return X(D),C(Dn);if(b=="(")return C(Xt,ge(")"),_t(yr,")"),$e,wi,Mt);if(m&&D=="<")return C(ge(">"),_t(Ar,">"),$e,Dn)}function As(b,D){if(b=="keyword"||b=="variable")return W.marked="type",C(As);if(D=="<")return C(ge(">"),_t(Ar,">"),$e)}function yr(b,D){return D=="@"&&C(Ge,yr),b=="spread"?C(yr):m&&St(D)?(W.marked="keyword",C(yr)):m&&b=="this"?C(vr,ar):q(hn,vr,ar)}function Si(b,D){return b=="variable"?Ci(b,D):Kn(b,D)}function Ci(b,D){if(b=="variable")return X(D),C(Kn)}function Kn(b,D){if(D=="<")return C(ge(">"),_t(Ar,">"),$e,Kn);if(D=="extends"||D=="implements"||m&&b==",")return D=="implements"&&(W.marked="keyword"),C(m?qe:Ge,Kn);if(b=="{")return C(ge("}"),Jn,$e)}function Jn(b,D){if(b=="async"||b=="variable"&&(D=="static"||D=="get"||D=="set"||m&&St(D))&&W.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return W.marked="keyword",C(Jn);if(b=="variable"||W.style=="keyword")return W.marked="property",C(Pn,Jn);if(b=="number"||b=="string")return C(Pn,Jn);if(b=="[")return C(Ge,vr,et("]"),Pn,Jn);if(D=="*")return W.marked="keyword",C(Jn);if(m&&b=="(")return q(Dn,Jn);if(b==";"||b==",")return C(Jn);if(b=="}")return C();if(D=="@")return C(Ge,Jn)}function Pn(b,D){if(D=="!"||D=="?")return C(Pn);if(b==":")return C(qe,ar);if(D=="=")return C(Vt);var J=W.state.lexical.prev,te=J&&J.info=="interface";return q(te?Dn:Hn)}function go(b,D){return D=="*"?(W.marked="keyword",C(Sn,et(";"))):D=="default"?(W.marked="keyword",C(Ge,et(";"))):b=="{"?C(_t(mo,"}"),Sn,et(";")):q(ft)}function mo(b,D){if(D=="as")return W.marked="keyword",C(et("variable"));if(b=="variable")return q(Vt,mo)}function Rt(b){return b=="string"?C():b=="("?q(Ge):b=="."?q(gt):q(pe,lr,Sn)}function pe(b,D){return b=="{"?Qr(pe,"}"):(b=="variable"&&X(D),D=="*"&&(W.marked="keyword"),C(vo))}function lr(b){if(b==",")return C(pe,lr)}function vo(b,D){if(D=="as")return W.marked="keyword",C(pe)}function Sn(b,D){if(D=="from")return W.marked="keyword",C(Ge)}function mt(b){return b=="]"?C():q(_t(Vt,"]"))}function ur(){return q(ge("form"),hn,et("{"),ge("}"),_t(Xr,"}"),$e,$e)}function Xr(){return q(hn,ar)}function yo(b,D){return b.lastType=="operator"||b.lastType==","||S.test(D.charAt(0))||/[,.]/.test(D.charAt(0))}function ee(b,D,J){return D.tokenize==I&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(D.lastType)||D.lastType=="quasi"&&/\{\s*$/.test(b.string.slice(0,b.pos-(J||0)))}return{startState:function(b){var D={tokenize:I,lastType:"sof",cc:[],lexical:new K((b||0)-a,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Zt(null,null,!1),indented:b||0};return i.globalVars&&typeof i.globalVars=="object"&&(D.globalVars=i.globalVars),D},token:function(b,D){if(b.sol()&&(D.lexical.hasOwnProperty("align")||(D.lexical.align=!1),D.indented=b.indentation(),j(b,D)),D.tokenize!=_&&b.eatSpace())return null;var J=D.tokenize(b,D);return O=="comment"?J:(D.lastType=O=="operator"&&(L=="++"||L=="--")?"incdec":O,ie(D,J,O,L,b))},indent:function(b,D){if(b.tokenize==_||b.tokenize==P)return r.Pass;if(b.tokenize!=I)return 0;var J=D&&D.charAt(0),te=b.lexical,Ve;if(!/^\s*else\b/.test(D))for(var ct=b.cc.length-1;ct>=0;--ct){var le=b.cc[ct];if(le==$e)te=te.prev;else if(le!=Ms&&le!=Mt)break}for(;(te.type=="stat"||te.type=="form")&&(J=="}"||(Ve=b.cc[b.cc.length-1])&&(Ve==gt||Ve==Ut)&&!/^[,\.=+\-*:?[\(]/.test(D));)te=te.prev;u&&te.type==")"&&te.prev.type=="stat"&&(te=te.prev);var on=te.type,In=J==on;return on=="vardef"?te.indented+(b.lastType=="operator"||b.lastType==","?te.info.length+1:0):on=="form"&&J=="{"?te.indented:on=="form"?te.indented+a:on=="stat"?te.indented+(yo(b,D)?u||a:0):te.info=="switch"&&!In&&i.doubleIndentSwitch!=!1?te.indented+(/^(?:case|default)\b/.test(D)?a:2*a):te.align?te.column+(In?0:1):te.indented+(In?0:a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:c,jsonMode:d,expressionAllowed:ee,skipExpression:function(b){ie(b,"atom","atom","true",new r.StringStream("",2,null))}}}),r.registerHelper("wordChars","javascript",/[\w$]/),r.defineMIME("text/javascript","javascript"),r.defineMIME("text/ecmascript","javascript"),r.defineMIME("application/javascript","javascript"),r.defineMIME("application/x-javascript","javascript"),r.defineMIME("application/ecmascript","javascript"),r.defineMIME("application/json",{name:"javascript",json:!0}),r.defineMIME("application/x-json",{name:"javascript",json:!0}),r.defineMIME("application/manifest+json",{name:"javascript",json:!0}),r.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),r.defineMIME("text/typescript",{name:"javascript",typescript:!0}),r.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var ha=It((OC,eg)=>{function f1(r,t){switch(r.charCodeAt(t)){default:return 0;case 10:return 1;case 13:return t+1<r.length&&r.charCodeAt(t+1)===10?2:1}}eg.exports={newLineLength:f1}});var ng=It((AC,tg)=>{var{newLineLength:d1}=ha();tg.exports=(r,t)=>{let i=1,a=0;for(let u=0;u<r.length;u++){let c=d1(r,u);c!==0&&(t(a,u+c,i++),a=u+c,u+=c-1)}t(a,r.length,i++)}});var ig=It((NC,rg)=>{var{newLineLength:p1}=ha();rg.exports=(r,t)=>{let i=1,a=0;for(let u=0;u<r.length;u++){let c=p1(r,u);c!==0&&(t(a,u,i++),a=u+c,u+=c-1)}t(a,r.length,i++)}});var sg=It((DC,og)=>{og.exports=function(r){if(r instanceof RegExp){let t=r.flags.indexOf("g")!==-1?r.flags:r.flags+"g",i=new RegExp(r,t);return function(a,u){let c;for(;c=i.exec(a);)u(c.index,c.index+c[0].length)}}return r=String(r),function(t,i){let a=-1;for(;a=t.indexOf(r,a+1),a!==-1;)i(a,a+r.length)}}});var lg=It((PC,ag)=>{var{newLineLength:h1}=ha();ag.exports=(r,t)=>{let i=1;for(let a=0;a<r.length;a++){let u=h1(r,a);u!==0&&(t(a,a+u,i++),a+=u-1)}}});var cg=It((IC,ug)=>{ug.exports={lines:ng(),lineContents:ig(),matches:sg(),newlines:lg()}});var ga=It((_C,pg)=>{function fg(r){return Mu.call(null,r)}function Mu(r){let t=this===window?{}:this||{},i={};return Object.assign(i,t,r,{fork:Mu.bind(i),ranges:Object.assign({},t.ranges,r&&r.ranges)}),typeof i.createHook!="function"&&(i.createHook=a=>a()),i}function dg(r){let t=Object.assign({},this);for(let i in r){let a=r[i];if(!(!a||typeof a!="object"))if(hasOwnProperty.call(t,i)){let u=t[i];t[i]=u&&typeof u.fork=="function"?u.fork(r[i]):u}else t[i]=fg(r[i])}return t.fork=dg.bind(t),t}pg.exports={createPrinter:fg,forkPrinter:Mu,forkPrinterSet:dg}});var Ou=It((RC,hg)=>{hg.exports=ga().createPrinter()});var mg=It((zC,gg)=>{var{createPrinter:g1}=ga();gg.exports=g1({print:r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")})});var yg=It((jC,vg)=>{var{forkPrinterSet:m1}=ga();vg.exports=m1.call({},{noop:Ou(),html:mg(),tty:Ou()})});var wg=It((FC,bg)=>{bg.exports=function(t,i){let a=[];return i.forEach(({generate:u,marker:c})=>u(t,(d,p,m)=>a.push({type:c,start:d,end:p,data:m}))),a}});var kg=It((HC,xg)=>{var ma=()=>"",v1=function(){};function pi(r,t){return typeof r=="function"?r:t||v1}xg.exports=function(t,i,a){let u=pi(a.print,_=>_),c=Object.assign(Object.defineProperties(Object.create(null),{offset:{get:()=>S},line:{get:()=>T},column:{get:()=>M},start:{get:()=>p.start},end:{get:()=>p.end},data:{get:()=>p.data}}),pi(a.createContext)()),d=[],p={start:0,end:t.length},m=a.ranges||{},w=[],x=1/0,S=0,T=1,M=1,O="";O+=pi(a.open,ma)(c),m=[].concat(Object.getOwnPropertyNames(m),Object.getOwnPropertySymbols(m)).reduce((_,P)=>{let R=m[P];return typeof R=="function"&&(m[P]=R=a.createHook(R)),R&&(w.push(P),_[P]={open:pi(R.open,ma),close:pi(R.close,ma),print:pi(R.print,u)}),_},{}),i=i.slice().sort((_,P)=>_.start-P.start||P.end-_.end||w.indexOf(_.type)-w.indexOf(P.type));let L=_=>m[(p=d[_]).type].open(c)||"",A=_=>m[(p=d[_]).type].close(c)||"",I=_=>{if(S!==_){let P=t.substring(S,_),R=d.length?m[d[d.length-1].type].print:u;for(let j=S;j<_;j++){let B=t.charCodeAt(j);B===10||B===13&&(j>=t.length||t.charCodeAt(j+1)!==10)?(T++,M=1):M++}O+=R(P,c),S=_}},k=_=>{for(;x<=_;){I(x);for(let P=d.length-1;P>=0&&d[P].end===x;P--)O+=A(P),d.pop();x=1/0;for(let P=0;P<d.length;P++)d[P].end<x&&(x=d[P].end)}};for(let _=0;_<i.length;_++){let P=i[_],R=0;if(m.hasOwnProperty(P.type)!==!1&&!(P.start>P.end||!Number.isFinite(P.start)||!Number.isFinite(P.end))){for(k(P.start),I(P.start),R=0;R<d.length;R++)if(d[R].end<P.end){for(let j=d.length-1;j>=R;j--)O+=A(j);break}for(d.splice(R,0,P);R<d.length;R++)O+=L(R);P.end<x&&(x=P.end)}}k(t.length),I(t.length);for(let _=d.length-1;_>=0;_--)O+=A(_);return O+=pi(a.close,ma)(c)||"",O}});var Tg=It((BC,Cg)=>{var y1=cg(),Du=yg(),Sg=wg(),b1=kg();function w1(r,t){return{marker:r,generate:t}}function x1(r,t){let i={};for(let a in t)i[a]={ranges:{[r]:t[a]}};return i}function Nu(r,t,i){let a=(u,c)=>{let d=t[c||i]||Du.noop,p=Sg(u,r);return b1(u,p,d)};return Object.assign(a,{print:a,generateRanges(u){return Sg(u,r)},use(u,c){let d=Symbol(u.name),p=u.ranges||u,m=Array.isArray(p)?(w,x)=>p.forEach(S=>x(...S)):p;return typeof m!="function"||(c||(c=u.printer),!c)?a:Nu(r.concat(w1(d,m)),t.fork(x1(d,c)),i)},printer(u){return Nu(r,t,u)}})}function Au(r,t,i){let a=Nu([],i||Du,t);return Array.isArray(r)&&(a=r.reduce((u,c)=>Array.isArray(c)?u.use(...c):u.use(c),a)),a}Cg.exports=Object.assign(Au,{gen:y1,printer:Object.assign((...r)=>Au().printer(...r),Du),use(...r){return Au().use(...r)}})});var Mg=It((Lg,Eg)=>{(function(r){typeof Lg=="object"&&typeof Eg=="object"?r(Tr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)})(function(r){"use strict";r.defineMode("css",function(K,H){var ie=H.inline;H.propertyKeywords||(H=r.resolveMode("text/css"));var W=K.indentUnit,q=H.tokenHooks,C=H.documentTypes||{},Z=H.mediaTypes||{},X=H.mediaFeatures||{},ce=H.mediaValueKeywords||{},St=H.propertyKeywords||{},Zt=H.nonStandardPropertyKeywords||{},Mn=H.fontProperties||{},Kr=H.counterDescriptors||{},Xt=H.colorKeywords||{},$t=H.valueKeywords||{},Mt=H.allowNested,ge=H.lineComment,$e=H.supportsAtComponent===!0,et=K.highlightNonStandardPropertyKeywords!==!1,ft,it;function Ge($,re){return ft=re,$}function Vt($,re){var G=$.next();if(q[G]){var ot=q[G]($,re);if(ot!==!1)return ot}if(G=="@")return $.eatWhile(/[\w\\\-]/),Ge("def",$.current());if(G=="="||(G=="~"||G=="|")&&$.eat("="))return Ge(null,"compare");if(G=='"'||G=="'")return re.tokenize=Yn(G),re.tokenize($,re);if(G=="#")return $.eatWhile(/[\w\\\-]/),Ge("atom","hash");if(G=="!")return $.match(/^\s*\w*/),Ge("keyword","important");if(/\d/.test(G)||G=="."&&$.eat(/\d/))return $.eatWhile(/[\w.%]/),Ge("number","unit");if(G==="-"){if(/[\d.]/.test($.peek()))return $.eatWhile(/[\w.%]/),Ge("number","unit");if($.match(/^-[\w\\\-]*/))return $.eatWhile(/[\w\\\-]/),$.match(/^\s*:/,!1)?Ge("variable-2","variable-definition"):Ge("variable-2","variable");if($.match(/^\w+-/))return Ge("meta","meta")}else return/[,+>*\/]/.test(G)?Ge(null,"select-op"):G=="."&&$.match(/^-?[_a-z][_a-z0-9-]*/i)?Ge("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(G)?Ge(null,G):$.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test($.current())&&(re.tokenize=Or),Ge("variable callee","variable")):/[\w\\\-]/.test(G)?($.eatWhile(/[\w\\\-]/),Ge("property","word")):Ge(null,null)}function Yn($){return function(re,G){for(var ot=!1,un;(un=re.next())!=null;){if(un==$&&!ot){$==")"&&re.backUp(1);break}ot=!ot&&un=="\\"}return(un==$||!ot&&$!=")")&&(G.tokenize=null),Ge("string","string")}}function Or($,re){return $.next(),$.match(/^\s*[\"\')]/,!1)?re.tokenize=null:re.tokenize=Yn(")"),Ge(null,"(")}function tt($,re,G){this.type=$,this.indent=re,this.prev=G}function gt($,re,G,ot){return $.context=new tt(G,re.indentation()+(ot===!1?0:W),$.context),G}function Ut($){return $.context.prev&&($.context=$.context.prev),$.context.type}function On($,re,G){return Ct[G.context.type]($,re,G)}function Fn($,re,G,ot){for(var un=ot||1;un>0;un--)G.context=G.context.prev;return On($,re,G)}function Jr($){var re=$.current().toLowerCase();$t.hasOwnProperty(re)?it="atom":Xt.hasOwnProperty(re)?it="keyword":it="variable"}var Ct={};return Ct.top=function($,re,G){if($=="{")return gt(G,re,"block");if($=="}"&&G.context.prev)return Ut(G);if($e&&/@component/i.test($))return gt(G,re,"atComponentBlock");if(/^@(-moz-)?document$/i.test($))return gt(G,re,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test($))return gt(G,re,"atBlock");if(/^@(font-face|counter-style)/i.test($))return G.stateArg=$,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test($))return"keyframes";if($&&$.charAt(0)=="@")return gt(G,re,"at");if($=="hash")it="builtin";else if($=="word")it="tag";else{if($=="variable-definition")return"maybeprop";if($=="interpolation")return gt(G,re,"interpolation");if($==":")return"pseudo";if(Mt&&$=="(")return gt(G,re,"parens")}return G.context.type},Ct.block=function($,re,G){if($=="word"){var ot=re.current().toLowerCase();return St.hasOwnProperty(ot)?(it="property","maybeprop"):Zt.hasOwnProperty(ot)?(it=et?"string-2":"property","maybeprop"):Mt?(it=re.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(it+=" error","maybeprop")}else return $=="meta"?"block":!Mt&&($=="hash"||$=="qualifier")?(it="error","block"):Ct.top($,re,G)},Ct.maybeprop=function($,re,G){return $==":"?gt(G,re,"prop"):On($,re,G)},Ct.prop=function($,re,G){if($==";")return Ut(G);if($=="{"&&Mt)return gt(G,re,"propBlock");if($=="}"||$=="{")return Fn($,re,G);if($=="(")return gt(G,re,"parens");if($=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(re.current()))it+=" error";else if($=="word")Jr(re);else if($=="interpolation")return gt(G,re,"interpolation");return"prop"},Ct.propBlock=function($,re,G){return $=="}"?Ut(G):$=="word"?(it="property","maybeprop"):G.context.type},Ct.parens=function($,re,G){return $=="{"||$=="}"?Fn($,re,G):$==")"?Ut(G):$=="("?gt(G,re,"parens"):$=="interpolation"?gt(G,re,"interpolation"):($=="word"&&Jr(re),"parens")},Ct.pseudo=function($,re,G){return $=="meta"?"pseudo":$=="word"?(it="variable-3",G.context.type):On($,re,G)},Ct.documentTypes=function($,re,G){return $=="word"&&C.hasOwnProperty(re.current())?(it="tag",G.context.type):Ct.atBlock($,re,G)},Ct.atBlock=function($,re,G){if($=="(")return gt(G,re,"atBlock_parens");if($=="}"||$==";")return Fn($,re,G);if($=="{")return Ut(G)&&gt(G,re,Mt?"block":"top");if($=="interpolation")return gt(G,re,"interpolation");if($=="word"){var ot=re.current().toLowerCase();ot=="only"||ot=="not"||ot=="and"||ot=="or"?it="keyword":Z.hasOwnProperty(ot)?it="attribute":X.hasOwnProperty(ot)?it="property":ce.hasOwnProperty(ot)?it="keyword":St.hasOwnProperty(ot)?it="property":Zt.hasOwnProperty(ot)?it=et?"string-2":"property":$t.hasOwnProperty(ot)?it="atom":Xt.hasOwnProperty(ot)?it="keyword":it="error"}return G.context.type},Ct.atComponentBlock=function($,re,G){return $=="}"?Fn($,re,G):$=="{"?Ut(G)&&gt(G,re,Mt?"block":"top",!1):($=="word"&&(it="error"),G.context.type)},Ct.atBlock_parens=function($,re,G){return $==")"?Ut(G):$=="{"||$=="}"?Fn($,re,G,2):Ct.atBlock($,re,G)},Ct.restricted_atBlock_before=function($,re,G){return $=="{"?gt(G,re,"restricted_atBlock"):$=="word"&&G.stateArg=="@counter-style"?(it="variable","restricted_atBlock_before"):On($,re,G)},Ct.restricted_atBlock=function($,re,G){return $=="}"?(G.stateArg=null,Ut(G)):$=="word"?(G.stateArg=="@font-face"&&!Mn.hasOwnProperty(re.current().toLowerCase())||G.stateArg=="@counter-style"&&!Kr.hasOwnProperty(re.current().toLowerCase())?it="error":it="property","maybeprop"):"restricted_atBlock"},Ct.keyframes=function($,re,G){return $=="word"?(it="variable","keyframes"):$=="{"?gt(G,re,"top"):On($,re,G)},Ct.at=function($,re,G){return $==";"?Ut(G):$=="{"||$=="}"?Fn($,re,G):($=="word"?it="tag":$=="hash"&&(it="builtin"),"at")},Ct.interpolation=function($,re,G){return $=="}"?Ut(G):$=="{"||$==";"?Fn($,re,G):($=="word"?it="variable":$!="variable"&&$!="("&&$!=")"&&(it="error"),"interpolation")},{startState:function($){return{tokenize:null,state:ie?"block":"top",stateArg:null,context:new tt(ie?"block":"top",$||0,null)}},token:function($,re){if(!re.tokenize&&$.eatSpace())return null;var G=(re.tokenize||Vt)($,re);return G&&typeof G=="object"&&(ft=G[1],G=G[0]),it=G,ft!="comment"&&(re.state=Ct[re.state](ft,$,re)),it},indent:function($,re){var G=$.context,ot=re&&re.charAt(0),un=G.indent;return G.type=="prop"&&(ot=="}"||ot==")")&&(G=G.prev),G.prev&&(ot=="}"&&(G.type=="block"||G.type=="top"||G.type=="interpolation"||G.type=="restricted_atBlock")?(G=G.prev,un=G.indent):(ot==")"&&(G.type=="parens"||G.type=="atBlock_parens")||ot=="{"&&(G.type=="at"||G.type=="atBlock"))&&(un=Math.max(0,G.indent-W))),un},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:ge,fold:"brace"}});function t(K){for(var H={},ie=0;ie<K.length;++ie)H[K[ie].toLowerCase()]=!0;return H}var i=["domain","regexp","url","url-prefix"],a=t(i),u=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],c=t(u),d=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],p=t(d),m=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],w=t(m),x=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],S=t(x),T=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],M=t(T),O=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],L=t(O),A=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],I=t(A),k=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],_=t(k),P=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],R=t(P),j=i.concat(u).concat(d).concat(m).concat(x).concat(T).concat(k).concat(P);r.registerHelper("hintWords","css",j);function B(K,H){for(var ie=!1,W;(W=K.next())!=null;){if(ie&&W=="/"){H.tokenize=null;break}ie=W=="*"}return["comment","comment"]}r.defineMIME("text/css",{documentTypes:a,mediaTypes:c,mediaFeatures:p,mediaValueKeywords:w,propertyKeywords:S,nonStandardPropertyKeywords:M,fontProperties:L,counterDescriptors:I,colorKeywords:_,valueKeywords:R,tokenHooks:{"/":function(K,H){return K.eat("*")?(H.tokenize=B,B(K,H)):!1}},name:"css"}),r.defineMIME("text/x-scss",{mediaTypes:c,mediaFeatures:p,mediaValueKeywords:w,propertyKeywords:S,nonStandardPropertyKeywords:M,colorKeywords:_,valueKeywords:R,fontProperties:L,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(K,H){return K.eat("/")?(K.skipToEnd(),["comment","comment"]):K.eat("*")?(H.tokenize=B,B(K,H)):["operator","operator"]},":":function(K){return K.match(/^\s*\{/,!1)?[null,null]:!1},$:function(K){return K.match(/^[\w-]+/),K.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(K){return K.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),r.defineMIME("text/x-less",{mediaTypes:c,mediaFeatures:p,mediaValueKeywords:w,propertyKeywords:S,nonStandardPropertyKeywords:M,colorKeywords:_,valueKeywords:R,fontProperties:L,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(K,H){return K.eat("/")?(K.skipToEnd(),["comment","comment"]):K.eat("*")?(H.tokenize=B,B(K,H)):["operator","operator"]},"@":function(K){return K.eat("{")?[null,"interpolation"]:K.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(K.eatWhile(/[\w\\\-]/),K.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),r.defineMIME("text/x-gss",{documentTypes:a,mediaTypes:c,mediaFeatures:p,propertyKeywords:S,nonStandardPropertyKeywords:M,fontProperties:L,counterDescriptors:I,colorKeywords:_,valueKeywords:R,supportsAtComponent:!0,tokenHooks:{"/":function(K,H){return K.eat("*")?(H.tokenize=B,B(K,H)):!1}},name:"css",helperType:"gss"})})});var Ng=It((Og,Ag)=>{(function(r){typeof Og=="object"&&typeof Ag=="object"?r(Tr()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)})(function(r){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},i={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};r.defineMode("xml",function(a,u){var c=a.indentUnit,d={},p=u.htmlMode?t:i;for(var m in p)d[m]=p[m];for(var m in u)d[m]=u[m];var w,x;function S(C,Z){function X(Zt){return Z.tokenize=Zt,Zt(C,Z)}var ce=C.next();if(ce=="<")return C.eat("!")?C.eat("[")?C.match("CDATA[")?X(O("atom","]]>")):null:C.match("--")?X(O("comment","-->")):C.match("DOCTYPE",!0,!0)?(C.eatWhile(/[\w\._\-]/),X(L(1))):null:C.eat("?")?(C.eatWhile(/[\w\._\-]/),Z.tokenize=O("meta","?>"),"meta"):(w=C.eat("/")?"closeTag":"openTag",Z.tokenize=T,"tag bracket");if(ce=="&"){var St;return C.eat("#")?C.eat("x")?St=C.eatWhile(/[a-fA-F\d]/)&&C.eat(";"):St=C.eatWhile(/[\d]/)&&C.eat(";"):St=C.eatWhile(/[\w\.\-:]/)&&C.eat(";"),St?"atom":"error"}else return C.eatWhile(/[^&<]/),null}S.isInText=!0;function T(C,Z){var X=C.next();if(X==">"||X=="/"&&C.eat(">"))return Z.tokenize=S,w=X==">"?"endTag":"selfcloseTag","tag bracket";if(X=="=")return w="equals",null;if(X=="<"){Z.tokenize=S,Z.state=P,Z.tagName=Z.tagStart=null;var ce=Z.tokenize(C,Z);return ce?ce+" tag error":"tag error"}else return/[\'\"]/.test(X)?(Z.tokenize=M(X),Z.stringStartCol=C.column(),Z.tokenize(C,Z)):(C.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function M(C){var Z=function(X,ce){for(;!X.eol();)if(X.next()==C){ce.tokenize=T;break}return"string"};return Z.isInAttribute=!0,Z}function O(C,Z){return function(X,ce){for(;!X.eol();){if(X.match(Z)){ce.tokenize=S;break}X.next()}return C}}function L(C){return function(Z,X){for(var ce;(ce=Z.next())!=null;){if(ce=="<")return X.tokenize=L(C+1),X.tokenize(Z,X);if(ce==">")if(C==1){X.tokenize=S;break}else return X.tokenize=L(C-1),X.tokenize(Z,X)}return"meta"}}function A(C){return C&&C.toLowerCase()}function I(C,Z,X){this.prev=C.context,this.tagName=Z||"",this.indent=C.indented,this.startOfLine=X,(d.doNotIndent.hasOwnProperty(Z)||C.context&&C.context.noIndent)&&(this.noIndent=!0)}function k(C){C.context&&(C.context=C.context.prev)}function _(C,Z){for(var X;;){if(!C.context||(X=C.context.tagName,!d.contextGrabbers.hasOwnProperty(A(X))||!d.contextGrabbers[A(X)].hasOwnProperty(A(Z))))return;k(C)}}function P(C,Z,X){return C=="openTag"?(X.tagStart=Z.column(),R):C=="closeTag"?j:P}function R(C,Z,X){return C=="word"?(X.tagName=Z.current(),x="tag",H):d.allowMissingTagName&&C=="endTag"?(x="tag bracket",H(C,Z,X)):(x="error",R)}function j(C,Z,X){if(C=="word"){var ce=Z.current();return X.context&&X.context.tagName!=ce&&d.implicitlyClosed.hasOwnProperty(A(X.context.tagName))&&k(X),X.context&&X.context.tagName==ce||d.matchClosing===!1?(x="tag",B):(x="tag error",K)}else return d.allowMissingTagName&&C=="endTag"?(x="tag bracket",B(C,Z,X)):(x="error",K)}function B(C,Z,X){return C!="endTag"?(x="error",B):(k(X),P)}function K(C,Z,X){return x="error",B(C,Z,X)}function H(C,Z,X){if(C=="word")return x="attribute",ie;if(C=="endTag"||C=="selfcloseTag"){var ce=X.tagName,St=X.tagStart;return X.tagName=X.tagStart=null,C=="selfcloseTag"||d.autoSelfClosers.hasOwnProperty(A(ce))?_(X,ce):(_(X,ce),X.context=new I(X,ce,St==X.indented)),P}return x="error",H}function ie(C,Z,X){return C=="equals"?W:(d.allowMissing||(x="error"),H(C,Z,X))}function W(C,Z,X){return C=="string"?q:C=="word"&&d.allowUnquoted?(x="string",H):(x="error",H(C,Z,X))}function q(C,Z,X){return C=="string"?q:H(C,Z,X)}return{startState:function(C){var Z={tokenize:S,state:P,indented:C||0,tagName:null,tagStart:null,context:null};return C!=null&&(Z.baseIndent=C),Z},token:function(C,Z){if(!Z.tagName&&C.sol()&&(Z.indented=C.indentation()),C.eatSpace())return null;w=null;var X=Z.tokenize(C,Z);return(X||w)&&X!="comment"&&(x=null,Z.state=Z.state(w||X,C,Z),x&&(X=x=="error"?X+" error":x)),X},indent:function(C,Z,X){var ce=C.context;if(C.tokenize.isInAttribute)return C.tagStart==C.indented?C.stringStartCol+1:C.indented+c;if(ce&&ce.noIndent)return r.Pass;if(C.tokenize!=T&&C.tokenize!=S)return X?X.match(/^(\s*)/)[0].length:0;if(C.tagName)return d.multilineTagIndentPastTag!==!1?C.tagStart+C.tagName.length+2:C.tagStart+c*(d.multilineTagIndentFactor||1);if(d.alignCDATA&&/<!\[CDATA\[/.test(Z))return 0;var St=Z&&/^<(\/)?([\w_:\.-]*)/.exec(Z);if(St&&St[1])for(;ce;)if(ce.tagName==St[2]){ce=ce.prev;break}else if(d.implicitlyClosed.hasOwnProperty(A(ce.tagName)))ce=ce.prev;else break;else if(St)for(;ce;){var Zt=d.contextGrabbers[A(ce.tagName)];if(Zt&&Zt.hasOwnProperty(A(St[2])))ce=ce.prev;else break}for(;ce&&ce.prev&&!ce.startOfLine;)ce=ce.prev;return ce?ce.indent+c:C.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:d.htmlMode?"html":"xml",helperType:d.htmlMode?"html":"xml",skipAttribute:function(C){C.state==W&&(C.state=H)},xmlCurrentTag:function(C){return C.tagName?{name:C.tagName,close:C.type=="closeTag"}:null},xmlCurrentContext:function(C){for(var Z=[],X=C.context;X;X=X.prev)Z.push(X.tagName);return Z.reverse()}}}),r.defineMIME("text/xml","xml"),r.defineMIME("application/xml","xml"),r.mimeModes.hasOwnProperty("text/html")||r.defineMIME("text/html",{name:"xml",htmlMode:!0})})});var zg=It((KC,Rg)=>{Rg.exports="0.5.7"});var Iu=It((JC,Fg)=>{var E1={8:"\\b",9:"\\t",10:"\\n",12:"\\f",13:"\\r",34:'\\"',92:"\\\\"};function M1(r){return r>=55296&&r<=56319}function O1(r){return r>=56320&&r<=57343}function jg(r){return typeof r.pipe=="function"&&typeof r._read=="function"&&typeof r._readableState=="object"&&r._readableState!==null}function A1(r,t,i,a){switch(i&&typeof i.toJSON=="function"&&(i=i.toJSON()),a!==null&&(i=a.call(r,String(t),i)),typeof i){case"function":case"symbol":i=void 0;break;case"object":if(i!==null){let u=i.constructor;(u===String||u===Number||u===Boolean)&&(i=i.valueOf())}break}return i}function N1(r){return r===null||typeof r!="object"?1:Array.isArray(r)?3:2}function D1(r){return r===null||typeof r!="object"?1:typeof r.then=="function"?4:jg(r)?r._readableState.objectMode?6:5:Array.isArray(r)?3:2}function P1(r){return typeof r=="function"?r:Array.isArray(r)?[...new Set(r.map(i=>{let a=i&&i.constructor;return a===String||a===Number?String(i):null}).filter(i=>typeof i=="string"))]:null}function I1(r){return typeof r=="number"?!Number.isFinite(r)||r<1?!1:" ".repeat(Math.min(r,10)):typeof r=="string"&&r.slice(0,10)||!1}Fg.exports={escapableCharCodeSubstitution:E1,isLeadingSurrogate:M1,isTrailingSurrogate:O1,type:{PRIMITIVE:1,PROMISE:4,ARRAY:3,OBJECT:2,STRING_STREAM:5,OBJECT_STREAM:6},isReadableStream:jg,replaceValue:A1,getTypeNative:N1,getTypeAsync:D1,normalizeReplacer:P1,normalizeSpace:I1}});var $g=It((QC,Wg)=>{var{normalizeReplacer:_1,normalizeSpace:R1,replaceValue:z1,getTypeNative:j1,getTypeAsync:F1,isLeadingSurrogate:H1,isTrailingSurrogate:B1,escapableCharCodeSubstitution:W1,type:{PRIMITIVE:Hg,OBJECT:$1,ARRAY:q1,PROMISE:V1,STRING_STREAM:U1,OBJECT_STREAM:G1}}=Iu(),Y1=Array.from({length:2048}).map((r,t)=>W1.hasOwnProperty(t)?2:t<32?6:t<128?1:2);function Bg(r){let t=0,i=!1;for(let a=0;a<r.length;a++){let u=r.charCodeAt(a);if(u<2048)t+=Y1[u];else if(H1(u)){t+=6,i=!0;continue}else B1(u)?t=i?t-2:t+6:t+=3;i=!1}return t+2}function K1(r){switch(typeof r){case"string":return Bg(r);case"number":return Number.isFinite(r)?String(r).length:4;case"boolean":return r?4:5;case"undefined":case"object":return 4;default:return 0}}function J1(r){return r=R1(r),typeof r=="string"?r.length:0}Wg.exports=function(t,i,a,u){function c(A,I,k){if(O)return;k=z1(A,I,k,i);let _=T(k);if(_!==Hg&&m.has(k)){x.add(k),L+=4,u.continueOnCircular||(O=!0);return}switch(_){case Hg:k!==void 0||Array.isArray(A)?L+=K1(k):A===M&&(L+=9);break;case $1:{if(p.has(k)){w.add(k),L+=p.get(k);break}let P=L,R=0;L+=2,m.add(k);for(let j in k)if(hasOwnProperty.call(k,j)&&(d===null||d.has(j))){let B=L;c(k,j,k[j]),B!==L&&(L+=Bg(j)+1,R++)}R>1&&(L+=R-1),m.delete(k),a>0&&R>0&&(L+=(1+(m.size+1)*a+1)*R,L+=1+m.size*a),p.set(k,L-P);break}case q1:{if(p.has(k)){w.add(k),L+=p.get(k);break}let P=L;L+=2,m.add(k);for(let R=0;R<k.length;R++)c(k,R,k[R]);k.length>1&&(L+=k.length-1),m.delete(k),a>0&&k.length>0&&(L+=(1+(m.size+1)*a)*k.length,L+=1+m.size*a),p.set(k,L-P);break}case V1:case U1:S.add(k);break;case G1:L+=2,S.add(k);break}}let d=null;i=_1(i),Array.isArray(i)&&(d=new Set(i),i=null),a=J1(a),u=u||{};let p=new Map,m=new Set,w=new Set,x=new Set,S=new Set,T=u.async?F1:j1,M={"":t},O=!1,L=0;return c(M,"",t),{minLength:isNaN(L)?1/0:L,circular:[...x],duplicate:[...w],async:[...S]}}});var Vg=It((ZC,qg)=>{qg.exports=()=>{throw new Error("Method is not supported")}});var Gg=It((XC,Ug)=>{Ug.exports=TextDecoder});var zu=It((e6,Kg)=>{var{isReadableStream:Q1}=Iu(),Z1=Gg(),us=1,X1=2,e0=new Z1;function Yg(r){return r!==null&&typeof r=="object"}function _u(r,t){return r.name==="SyntaxError"&&t.jsonParseOffset&&(r.message=r.message.replace(/at position (\d+)/,(i,a)=>"at position "+(Number(a)+t.jsonParseOffset))),r}function t0(r,t){let i=r.length;r.length+=t.length;for(let a=0;a<t.length;a++)r[i+a]=t[a]}Kg.exports=function(r){let t=new Ru;if(Yg(r)&&Q1(r))return new Promise((i,a)=>{r.on("data",u=>{try{t.push(u)}catch(c){a(_u(c,t)),t=null}}).on("error",u=>{t=null,a(u)}).on("end",()=>{try{i(t.finish())}catch(u){a(_u(u,t))}finally{t=null}})});if(typeof r=="function"){let i=r();if(Yg(i)&&(Symbol.iterator in i||Symbol.asyncIterator in i))return new Promise(async(a,u)=>{try{for await(let c of i)t.push(c);a(t.finish())}catch(c){u(_u(c,t))}finally{t=null}})}throw new Error("Chunk emitter should be readable stream, generator, async generator or function returning an iterable object")};var Ru=class{constructor(){this.value=void 0,this.valueStack=null,this.stack=new Array(100),this.lastFlushDepth=0,this.flushDepth=0,this.stateString=!1,this.stateStringEscape=!1,this.pendingByteSeq=null,this.pendingChunk=null,this.chunkOffset=0,this.jsonParseOffset=0}parseAndAppend(t,i){this.stack[this.lastFlushDepth-1]===us?(i&&(this.jsonParseOffset--,t="{"+t+"}"),Object.assign(this.valueStack.value,JSON.parse(t))):(i&&(this.jsonParseOffset--,t="["+t+"]"),t0(this.valueStack.value,JSON.parse(t)))}prepareAddition(t){let{value:i}=this.valueStack;if(Array.isArray(i)?i.length!==0:Object.keys(i).length!==0){if(t[0]===",")return this.jsonParseOffset++,t.slice(1);if(t[0]!=="}"&&t[0]!=="]")return this.jsonParseOffset-=3,"[[]"+t}return t}flush(t,i,a){let u=t.slice(i,a);if(this.jsonParseOffset=this.chunkOffset+i,this.pendingChunk!==null&&(u=this.pendingChunk+u,this.jsonParseOffset-=this.pendingChunk.length,this.pendingChunk=null),this.flushDepth===this.lastFlushDepth)this.flushDepth>0?this.parseAndAppend(this.prepareAddition(u),!0):(this.value=JSON.parse(u),this.valueStack={value:this.value,prev:null});else if(this.flushDepth>this.lastFlushDepth){for(let c=this.flushDepth-1;c>=this.lastFlushDepth;c--)u+=this.stack[c]===us?"}":"]";this.lastFlushDepth===0?(this.value=JSON.parse(u),this.valueStack={value:this.value,prev:null}):this.parseAndAppend(this.prepareAddition(u),!0);for(let c=this.lastFlushDepth||1;c<this.flushDepth;c++){let d=this.valueStack.value;if(this.stack[c-1]===us){let p;for(p in d);d=d[p]}else d=d[d.length-1];this.valueStack={value:d,prev:this.valueStack}}}else{u=this.prepareAddition(u);for(let c=this.lastFlushDepth-1;c>=this.flushDepth;c--)this.jsonParseOffset--,u=(this.stack[c]===us?"{":"[")+u;this.parseAndAppend(u,!1);for(let c=this.lastFlushDepth-1;c>=this.flushDepth;c--)this.valueStack=this.valueStack.prev}this.lastFlushDepth=this.flushDepth}push(t){if(typeof t!="string"){if(this.pendingByteSeq!==null){let c=t;t=new Uint8Array(this.pendingByteSeq.length+c.length),t.set(this.pendingByteSeq),t.set(c,this.pendingByteSeq.length),this.pendingByteSeq=null}if(t[t.length-1]>127)for(let c=0;c<t.length;c++){let d=t[t.length-1-c];if(d>>6===3){c++,(c!==4&&d>>3===30||c!==3&&d>>4===14||c!==2&&d>>5===6)&&(this.pendingByteSeq=t.slice(t.length-c),t=t.slice(0,-c));break}}t=e0.decode(t)}let i=t.length,a=0,u=0;e:for(let c=0;c<i;c++){if(this.stateString){for(;c<i;c++)if(this.stateStringEscape)this.stateStringEscape=!1;else switch(t.charCodeAt(c)){case 34:this.stateString=!1;continue e;case 92:this.stateStringEscape=!0}break}switch(t.charCodeAt(c)){case 34:this.stateString=!0,this.stateStringEscape=!1;break;case 44:u=c;break;case 123:u=c+1,this.stack[this.flushDepth++]=us;break;case 91:u=c+1,this.stack[this.flushDepth++]=X1;break;case 93:case 125:u=c+1,this.flushDepth--,this.flushDepth<this.lastFlushDepth&&(this.flush(t,a,u),a=u);break;case 9:case 10:case 13:case 32:a===c&&a++,u===c&&u++;break}}u>a&&this.flush(t,a,u),u<i&&(this.pendingChunk!==null?this.pendingChunk+=t:this.pendingChunk=t.slice(u,i)),this.chunkOffset+=i}finish(){return this.pendingChunk!==null&&(this.flush("",0,0),this.pendingChunk=null),this.value}}});var Qg=It((t6,Jg)=>{Jg.exports={version:zg(),stringifyInfo:$g(),stringifyStream:Vg(),parseChunked:zu()}});function gp(r){let t=[].filter(i=>{if(typeof i=="function")return!0;console.warn('[discovery-cli] "prepare" module should return a function, but got '+typeof i)});t.length&&r.setPrepare(async(i,...a)=>{for(let u of t)i=await u(i,...a)||i;return i})}var mp=[];var ff={};Ye(ff,{App:()=>yi,Widget:()=>gi,embed:()=>sl,inspector:()=>Ea,navButtons:()=>ys,pages:()=>gs,router:()=>al,upload:()=>tl,utils:()=>wy,version:()=>Uo,views:()=>cs});var Uo="1.0.0-beta.71";var tr=class{constructor(){this.listeners=Object.create(null)}on(t,i){return this.listeners[t]={callback:i,next:this.listeners[t]||null},this}once(t,i){return this.on(t,function a(...u){i.apply(this,u),this.off(t,a)})}off(t,i){let a=this.listeners[t]||null,u=null;for(;a!==null;){if(a.callback===i){a.callback=null,u?u.next=a.next:this.listeners[t]=a.next;break}u=a,a=a.next}return this}emit(t,...i){let a=this.listeners[t]||null,u=!1;for(;a!==null;)typeof a.callback=="function"&&a.callback.apply(this,i),u=!0,a=a.next;return u}};var hr=new WeakMap,Rn=class extends tr{constructor(t){super(),hr.set(this,new Map),t&&(this.revoke=i=>{hr.get(this).delete(i),this.emit("revoke",i)})}define(t,i){return hr.get(this).set(t,i),this.emit("define",t,i),i}isDefined(t){return hr.get(this).has(t)}has(t){return hr.get(this).has(t)}get(t){return hr.get(this).get(t)}get names(){return[...hr.get(this).keys()]}get keys(){return hr.get(this).keys()}get values(){return hr.get(this).values()}get entries(){return hr.get(this).entries()}};var Vi=new WeakMap,Go=class extends Rn{constructor(t){super(!0),this.host=t,Vi.set(this,Object.create(null))}define(t,i){if(typeof i!="function")throw new Error("callback is not a function");Vi.set(this,Object.freeze({...Vi.get(this),[t]:i})),super.define(t,Object.freeze({name:t,callback:i}))}revoke(t){if(this.has(t)){let i={...Vi.get(this)};delete i[t],Vi.set(this,Object.freeze(i))}super.revoke(t)}get actionMap(){return Vi.get(this)}call(t,...i){if(!this.has(t))throw new Error(`action "${t}" doesn't exist`);let{callback:a}=this.get(t);return a(...i)}};var nu=Object.freeze({}),{hasOwnProperty:Lw}=Object,bp=new WeakMap,ru=new WeakMap,Ui=new WeakMap,ci=new WeakMap,wp=new WeakMap,Ew=new Set(["view","when","data","whenData","postRender","className"]);function Br(r,t){return wp.set(r,t),r}function xp(r,t,i){if(!i.has(r)){if(ci.has(r))for(let a of ci.get(r)){let u=t.children.find(c=>c.view===a);u?t=u:t.children.push(t={node:null,parent:t,view:a,children:[]})}if(Ui.has(r)?t.children.push(t={node:r,parent:t,view:Ui.get(r),children:[]}):ru.has(r)&&t.children.push(t={node:r,parent:t,viewRoot:ru.get(r),children:[]}),r.nodeType===1)for(let a=r.firstChild;a;a=a.nextSibling)xp(a,t,i)}}function Mw(r){return{name:!1,options:nu,render(t,i){if(t.className="discovery-buildin-view-render-error",t.dataset.type=i.type,t.textContent=i.reason,"config"in i){let a=t.appendChild(document.createElement("span"));a.className="toggle-config",a.textContent="show config...",a.addEventListener("click",()=>{t.classList.toggle("expanded")?(a.textContent="hide config...",r.render(t,{view:"struct",expanded:1},i.config)):(a.textContent="show config...",t.lastChild.remove())})}}}}function vp(r,t,i,a,u,c,d,p){return!Lw.call(i,r)||i[r]===void 0||t.queryBool(i[r]===!0?"":i[r],a,u)?!0:(Ui.set(p,{skipped:r,config:i,inputData:c,inputDataIndex:d,data:a,context:u}),!1)}function kp(r,t,i,a){let u=t;return typeof u=="string"&&u.startsWith("=")&&(u=r.queryFn(u.slice(1))),typeof u=="function"&&(u=u(i,a)),typeof u=="string"&&(u=u.trim().split(/\s+/)),Array.isArray(u)&&(u=u.map(c=>typeof c=="function"?c(i,a):c).filter(Boolean),u.length)?u:null}function yp(r,t,i,a,u,c,d,p,m){let{tag:w}=t.options,x=w===!1||w===null?document.createDocumentFragment():document.createElement(w||"div"),S=Promise.resolve(t.render(x,u,c,d));return typeof a.postRender=="function"&&(S=S.then(()=>a.postRender(x,a,c,d))),S.then(function(){let T={config:a,props:u,inputData:p,inputDataIndex:m,data:c,context:d};if(x.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){if(Ui.set(x,T),t.name&&x.classList.add(`view-${t.name}`),a.className){let M=kp(r,a.className,c,d);M!==null&&x.classList.add(...M)}u.tooltip&&Sp(r,x,u.tooltip,c,d)}else for(let M of x.childNodes)ci.has(M)?ci.get(M).unshift(T):ci.set(M,[T]);i.replaceWith(x)})}function Ow(r,t){return{name:t,normalizeConfig:r.normalizeConfig.bind(r),ensureValidConfig:r.ensureValidConfig.bind(r),composeConfig:r.composeConfig.bind(r),propsFromConfig:r.propsFromConfig.bind(r),render:r.render.bind(r),listLimit:r.listLimit.bind(r),renderList:r.renderList.bind(r),maybeMoreButtons:r.maybeMoreButtons.bind(r),renderMoreButton:r.renderMoreButton.bind(r),tooltip(i,a,u,c){i&&i.nodeType===1?Sp(r.host,i,a,u,c):console.warn("A tooltip can be attached to a HTML element only")}}}function Sp(r,t,i,a,u){t.classList.add("discovery-view-has-tooltip"),bp.set(t,[i,a,u]),r.view.tooltip||(r.view.tooltip=Aw(r))}function Aw(r){let t=null,i=new r.view.Popup({className:"discovery-buildin-view-tooltip",hoverTriggers:".discovery-view-has-tooltip",position:"pointer",render(a,u){let[c,d,p]=bp.get(u)||[],m="pointer";if(t!==null&&(a.classList.remove(...t),t=null),c&&!Array.isArray(c)&&typeof c!="string"&&typeof c!="function"&&!c.view&&(t=kp(r,c.className,d,p),t!==null&&a.classList.add(...t),m=c.position==="trigger"?"trigger":"pointer",c=c.content),i.options.position=m,c)return r.view.render(a,c,d,p);r.view.render(a,{view:r.view.defaultRenderErrorRenderer.render,reason:"Element marked as having a tooltip but related data is not found"})}});return i}function Cp(r,t,i,a,u,c){if(Array.isArray(i))return Promise.all(i.map(w=>Cp(r,t,w,a,u,c)));let d=a&&typeof u=="number"?a[u]:a,p=null;switch(typeof i.view){case"function":p={name:!1,options:nu,render:i.view};break;case"string":if(i.view==="render"){let{config:w="",context:x=""}=i;p={name:!1,options:{tag:!1},render:(S,T,M)=>{let O=w!==""?r.host.query(w,d,c):M,L=r.host.query(x,c,d);return r.render(S,O,M!==O?M:d,L)}}}else if(i.view.startsWith("preset/")){let w=i.view.substr(7);p={name:!1,options:{tag:!1},render:r.host.preset.isDefined(w)?r.host.preset.get(w).render:()=>{}}}else p=r.get(i.view);break}if(!p){let w=typeof i.view=="string"?"View `"+i.view+"` is not found":"Render is not a function";console.error(w,i),p=r.defaultRenderErrorRenderer,i={type:"config",reason:w,config:i}}t||(t=document.createDocumentFragment());let m=t.appendChild(document.createComment(""));return vp("when",r.host,i,d,c,a,u,m)?("data"in i?Promise.resolve(r.host.query(i.data,d,c)):Promise.resolve(d)).then(x=>vp("whenData",r.host,i,x,c,a,u,m)?yp(r.host,p,m,i,r.propsFromConfig(i,x,c),x,c,a,u):null).catch(x=>{yp(r.host,r.defaultRenderErrorRenderer,m,nu,{type:"render",reason:String(x),config:i}),console.error(x)}):Promise.resolve()}var Yo=class extends Rn{constructor(t){super(),this.host=t,this.defaultRenderErrorRenderer=Mw(this)}define(t,i,a){super.define(t,Object.freeze({name:t,options:Object.freeze({...a}),render:typeof i=="function"?i.bind(Ow(this,t)):(u,c,d,p)=>this.render(u,i,d,p)}))}normalizeConfig(t){if(!t)return null;if(Array.isArray(t))return t.reduce((i,a)=>i.concat(this.normalizeConfig(a)||[]),[]);if(typeof t=="string"){let[,i,a,u]=t.match(/^(\S+?)([:{])((?:.|\s)+)$/)||[];if(i){if(a==="{")try{return Br(this.host.queryToConfig(i,a+u),t)}catch(c){return Br(this.badConfig(t,c),t)}return Br({view:i,data:u},t)}return Br({view:t},t)}else if(typeof t=="function")return Br({view:t},t);return t}badConfig(t,i){let a=i&&i.message||"Unknown error";return console.error(a,{config:t,error:i}),{view:this.defaultRenderErrorRenderer.render,type:"config",reason:a,config:t}}ensureValidConfig(t){return Array.isArray(t)?t.map(i=>this.ensureValidConfig(i)):!t||!t.view?this.badConfig(t,new Error(t?"Option `view` is missed":"Config is not a valid value")):t}composeConfig(t,i){return t=this.normalizeConfig(t),i=this.normalizeConfig(i),t&&i?Array.isArray(t)?t.map(a=>Br({...a,...i},[a,i])):Br({...t,...i},[t,i]):t||i}propsFromConfig(t,i,a){let u=Br({},t);for(let[c,d]of Object.entries(t))Ew.has(c)||(u[c]=typeof d=="string"&&d.startsWith("=")?this.host.query(d.slice(1),i,a):d);return u}render(t,i,a,u,c){return Cp(this,t,this.ensureValidConfig(this.normalizeConfig(i)),a,c,u)}listLimit(t,i){return t===!1?!1:!t||isNaN(t)?i:Math.max(parseInt(t,10),0)||i}renderList(t,i,a,u,c=0,d=!1,p){d===!1&&(d=a.length);let m=Promise.all(a.slice(c,c+d).map((w,x,S)=>this.render(t,i,a,{...u,index:c+x,array:a,sliceIndex:x,slice:S},c+x)));return this.maybeMoreButtons(p||t,null,a.length,c+d,d,(w,x)=>this.renderList(t,i,a,u,w,x,p)),m}maybeMoreButtons(t,i,a,u,c,d){let p=a-u,m=p<=0?null:document.createElement("span");return p>c&&this.renderMoreButton(m,"Show "+c+" more...",()=>d(u,c)),p>0&&this.renderMoreButton(m,"Show all the rest "+p+" items...",()=>d(u,1/0)),m!==null&&(m.className="more-buttons",t.insertBefore(m,i)),m}renderMoreButton(t,i,a){let u=document.createElement("button");u.className="more-button",u.innerHTML=i,u.addEventListener("click",()=>{t.remove(),a()}),t.appendChild(u)}adoptFragment(t,i){let a=ci.get(i);if(a)for(let u of t.childNodes)ci.set(u,a)}setViewRoot(t,i,a){ru.set(t,{name:i,...a})}getViewTree(t){let i=new Set(t||[]),a=[];return xp(this.host.dom.container,{parent:null,children:a},i),a}getViewStackTrace(t){let{container:i}=this.host.dom;if(!i||!(t instanceof Node)||!i.contains(t))return null;let a=[],u=t;for(;u!==i;)Ui.has(u)&&a.push(Ui.get(u)),u=u.parentNode;return a.length===0?null:a.reverse()}getViewConfigTransitionTree(t){let i=wp.get(t)||[];return Array.isArray(i)||(i=[i]),{value:t,deps:i.map(this.getViewConfigTransitionTree,this)}}};var Ko=class extends Rn{constructor(t){super(),this.view=t}define(t,i){i=JSON.parse(JSON.stringify(i)),super.define(t,Object.freeze({name:t,render:(a,u,c,d)=>this.view.render(a,i,c,d),config:i}))}render(t,i,a,u){let c=this.get(i);if(!c){let d="Preset `"+i+"` is not found";console.error(d,i);let p=t.appendChild(document.createElement("div"));return p.className="discovery-buildin-view-config-error",p.textContent=d,Promise.resolve()}return c.render(t,null,a,u)}};var wn=class{static setValue(t,i){if(!t.shouldPublish(i,t.value))return!1;let a=[],u=t.subscriber;for(t.value=i;u!==null;){let{callback:c,thisArg:d}=u;c!==null&&a.push(c.call(d,i,()=>t.unsubscribe(c,d))),u=u.subscriber}return a}constructor(t,i){this.value=t,this.shouldPublish=typeof i=="function"?i:this.shouldPublish,this.subscriber=null}get readonly(){let t=this;return{subscribe:this.subscribe.bind(this),subscribeSync:this.subscribeSync.bind(this),unsubscribe:this.unsubscribe.bind(this),get value(){return t.value}}}subscribe(t,i){return this.subscriber={callback:t,thisArg:i,subscriber:this.subscriber},()=>this.unsubscribe(t,i)}subscribeSync(t,i){let a=this.subscribe(t,i);return t.call(i,this.value,a),a}unsubscribe(t,i){let a=this,u=this.subscriber;for(;u!==null;){if(u.callback===t&&u.thisArg===i){u.callback=null,u.thisArg=null,a.subscriber=u.subscriber;break}a=u,u=u.subscriber}}shouldPublish(t,i){return t!==i}set(t){return this.constructor.setValue(this,t)!==!1}asyncSet(t){let i=this.constructor.setValue(this,t);return i===!1?Promise.resolve(!1):Promise.all(i).then(a=>a!==!1)}};var iu={};Ye(iu,{createElement:()=>U,createFragment:()=>fi,createText:()=>xn,passiveCaptureOptions:()=>Wn,passiveSupported:()=>Tp});function U(r,t,i){let a=document.createElement(r);typeof t=="string"&&(t={class:t});for(let u in t)if(hasOwnProperty.call(t,u)){if(t[u]===void 0)continue;u.startsWith("on")?a.addEventListener(u.substr(2),t[u]):a.setAttribute(u,t[u])}return Array.isArray(i)?i.forEach(u=>a.appendChild(u instanceof Node?u:xn(u))):typeof i=="string"&&(a.innerHTML=i),a}function xn(r){return document.createTextNode(String(r))}function fi(...r){let t=document.createDocumentFragment();return r.forEach(i=>t.appendChild(i instanceof Node?i:xn(i))),t}var Tp=(()=>{let r=!1;try{let t={get passive(){return r=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return r})(),Wn=Tp?Object.freeze({passive:!0,capture:!0}):!0;var Lp=Symbol("config"),Nw={name:"not-found",render:(r,{name:t})=>{r.style.cssText="color:#a00",r.innerText=`Page \`${t}\` not found`}},Jo=class extends Rn{constructor(t){if(super(),this.view=t.view,this.lastPage=null,this.lastPageId=null,this.pageOverscrolled=new wn(!1),this.setPageOverscroll=()=>{},typeof IntersectionObserver=="function"){let i=U("div",{style:"position:absolute"}),a=t.dom.content,u=null,c=()=>{};u&&(u.disconnect(),u=null),a&&(u=new IntersectionObserver(d=>this.pageOverscrolled.set(!d[d.length-1].isIntersecting),{root:a}),this.setPageOverscroll=d=>{u.unobserve(i),c(),d&&(d.prepend(i),u.observe(i),c=this.pageOverscrolled.subscribeSync(p=>d.classList.toggle("page_overscrolled",p)))})}}define(t,i,a){super.define(t,Object.freeze({name:t,render:typeof i=="function"?i.bind(this.view):(u,c,d)=>this.view.render(u,i,c,d),options:Object.freeze({...a}),[Lp]:i}))}render(t,i,a,u){let c=Date.now(),d=this.get(i),p;d||(d=this.get("not-found")||Nw,a={name:i});let{reuseEl:m,init:w,keepScrollOffset:x=!0}=d.options||{},S=this.lastPage!==i,T=u&&u.id,M=this.lastPageId!==T,O=m&&!S?t:document.createElement("article"),L=t.parentNode;this.lastPage=i,this.lastPageId=T,O.id=t.id,O.classList.add("page","page-"+i),S&&typeof w=="function"&&w(O);try{p=d.render(O,a,u)}catch(A){p=this.view.render(O,"alert-danger",String(A)+" (see details in console)"),console.error(A)}return(S||M||!x)&&(L.scrollTop=0),O!==t&&(t.replaceWith(O),this.setPageOverscroll(O)),{pageEl:O,config:d[Lp],renderState:Promise.resolve(p).then(()=>console.log("[Discovery] Page `"+d.name+"` rendered in "+(Date.now()-c)+"ms"))}}};var cs={};Ye(cs,{alerts:()=>Ep,autoLink:()=>Mp,badges:()=>Ap,block:()=>Dp,button:()=>Pp,checkbox:()=>zp,checkboxList:()=>_p,column:()=>jp,columns:()=>Fp,contentFilter:()=>Bp,context:()=>$p,dropdown:()=>Up,editors:()=>Xp,expand:()=>th,headers:()=>fh,hstack:()=>ph,html:()=>gh,image:()=>vh,imagePreview:()=>bh,indicator:()=>xh,input:()=>Ch,link:()=>Lh,listItem:()=>Eh,lists:()=>Mh,markdown:()=>Oh,menu:()=>Nh,menuItem:()=>Ph,navButton:()=>_h,pageHeader:()=>zh,popup:()=>Wh,progressbar:()=>qh,section:()=>Uh,select:()=>Yh,signature:()=>Eu,source:()=>_g,struct:()=>Wu,switch:()=>pm,tab:()=>Sm,table:()=>vm,tableCell:()=>bm,tableRow:()=>ym,tabs:()=>xm,text:()=>Tm,textMatch:()=>Am,textNumeric:()=>Dm,tocSection:()=>Pm,toggle:()=>Im,toggleGroup:()=>_m,tree:()=>jm,treeItem:()=>Fm});var Gi=(r,t)=>({demo:{view:r,data:'"Alert"'},examples:[{title:"Variations",demo:t.map(i=>`${i}:"${i}"`)},{title:"Complex content",demo:{view:r,content:['h3:"Some header"','text:"Hello world!"']}}]});function Ep(r){function t(i,a,u,c){let{content:d="text"}=a;return i.classList.add("view-alert"),r.view.render(i,d,u,c)}r.view.define("alert",t,{usage:Gi}),r.view.define("alert-primary",t,{usage:Gi}),r.view.define("alert-success",t,{usage:Gi}),r.view.define("alert-danger",t,{usage:Gi}),r.view.define("alert-warning",t,{usage:Gi})}function Mp(r){r.view.define("auto-link",function(t,i,a,u){let{content:c,fallback:d,href:p}=i;if(!a)return;let m=r.resolveValueLinks(a),x=m?(typeof p=="function"?p:S=>S)(m[0].href,a,u):null;return x?r.view.render(t,{view:"link",content:c},{...m[0],href:x},u):r.view.render(t,d||c||"text",a,u)},{tag:!1})}var ou=(r,t)=>({demo:{view:r,data:JSON.stringify(r)},examples:[{title:"Variations",demo:t.map(i=>`${i}:"${i}"`)},{title:"Custom colors",beforeDemo:{view:"md",source:["Data properties to setup a custom colors:","* `color` \u2013 default background color","* `textColor` \u2013 default text color","* `darkColor` \u2013 background color in dark mode","* `textColor` \u2013 text color in dark mode"].join(`
`)},demo:{view:r,data:{text:"Colored badge",color:"rgba(237, 177, 9, 0.35)",textColor:"orange",darkColor:"#ffff00",darkTextColor:"black"}}},{title:"As a link",demo:{view:r,data:{text:"Link to something",href:"#",external:!0}}},{title:"Prefix and postfix",demo:{view:r,data:{prefix:"prefix",text:"link",postfix:"postfix"}}},{title:"With a hint",demo:{view:r,data:{text:"text",hint:"hint"}}}]});function Op(r,t,i){if(!i)return;let a=r.appendChild(document.createElement("span"));a.className=t,a.textContent=i}function Ap(r){function t(i,a,u,c){let{content:d}=a,{color:p,textColor:m,darkColor:w,darkTextColor:x,text:S,href:T,external:M,prefix:O,postfix:L,hint:A}=u||{},I;return(typeof u=="string"||typeof u=="number"||typeof u=="boolean")&&(S=u),p&&i.style.setProperty("--discovery-view-badge-color",p),w&&i.style.setProperty("--discovery-view-badge-dark-color",w),m&&i.style.setProperty("--discovery-view-badge-text-color",m),x&&i.style.setProperty("--discovery-view-badge-dark-text-color",x),T&&(i.href=T),M&&(i.target="_blank"),A&&(i.title=A),Op(i,"prefix",O),d?I=this.render(i,d,u,c):i.append(document.createTextNode(S)),Op(i,"postfix",L),I}r.view.define("badge",t,{tag:"a",usage:ou}),r.view.define("pill-badge",t,{tag:"a",usage:ou})}var Np={beforeDemo:"A block has no its own look. It's using for wrapping some content with a `className` (btw `className` is a common property for any view when appropriate)",demo:{view:"block",className:"foo",content:['text:"Content inside block"']}};function Dp(r){r.view.define("block",function(t,i,a,u){let{content:c=[],onInit:d,onChange:p}=i,m=typeof d!="function"&&typeof p!="function"?c:this.composeConfig(c,{onInit:d,onChange:p});return r.view.render(t,m,a,u)},{usage:Np})}var Qo=(r,t)=>({demo:{view:r,onClick:Function('return () => alert("Hello world!")')(),data:{text:"Button"}},examples:[{title:"Variations",demo:t.map(i=>`${i}:{ text: "${i}" }`)},{title:"Disabled state",demo:t.map(i=>({view:i,disabled:!0,data:{text:i}}))},{title:"Button as a link",demo:{view:"button",data:{text:"Click me",href:"#url",external:!0}}}]});function Pp(r){function t(i,a,u,c){let{content:d,disabled:p=!1,onClick:m}=a,{text:w="",href:x,external:S}=u||{};if(i.classList.add("view-button"),r.query(p,u,c)?i.disabled=!0:typeof m=="function"?(i.addEventListener("click",()=>m(i,u,c)),i.classList.add("onclick")):x&&i.addEventListener("click",()=>U("a",{href:x,target:S?"_blank":""}).click()),d)return r.view.render(i,d,u,c);i.textContent=w}r.view.define("button",t,{tag:"button",usage:Qo}),r.view.define("button-primary",t,{tag:"button",usage:Qo}),r.view.define("button-danger",t,{tag:"button",usage:Qo}),r.view.define("button-warning",t,{tag:"button",usage:Qo})}var Ip={demo:{view:"checkbox-list",checkbox:{content:"text"},data:["one","two","three"]}};function _p(r){r.view.define("checkbox-list",function(t,i,a,u){let{name:c="filter",checkbox:d,checkboxValue:p="$",emptyText:m,limit:w,onChange:x,onInit:S}=i,T=new Set;if(m!==!1&&m!==""&&t.setAttribute("emptyText",m||"Empty list"),!Array.isArray(a)&&a&&(a=[a]),Array.isArray(a))return r.view.renderList(t,this.composeConfig({view:"checkbox",...d,onInit:(M,O,L,A)=>{M&&T.add(r.query(p,L,A))},onChange:(M,O,L,A)=>{let I=T.size,k=r.query(p,L,A);M?T.add(k):T.delete(k),I!==T.size&&typeof x=="function"&&x([...T],c)}}),a,u,0,r.view.listLimit(w,25)).then(()=>{typeof S=="function"&&S([...T],c)})},{usage:Ip})}var Rp={demo:{view:"checkbox",content:'text:"checkbox caption"'},examples:[{title:"Checked state",beforeDemo:"Checked state is set up with `checked` property. Its value can be a query",demo:[{view:"checkbox",checked:!0,content:'text:"should be checked"'},{view:"checkbox",checked:"1 > 5",content:`text:"shouldn't be checked"`},{view:"checkbox",checked:"1 < 5",content:'text:"should be checked"'}]},{title:"Readonly checkbox",demo:{view:"checkbox",readonly:!0,content:'text:"checkbox caption"'}},{title:"On change",demo:{view:"checkbox",onChange:new Function("return (value, name, data, context) => alert(`Changed to ${value}!`)")(),content:'text:"click me!"'}}]};function zp(r){function t(i,a,u,c,d,p){if(i===null)return;let m=d?{...c,[d]:p.checked}:c;return i.innerHTML="",r.view.render(i,a,u,m)}r.view.define("checkbox",function(i,a,u,c){let{name:d,checked:p,readonly:m,content:w,onInit:x,onChange:S}=a,T=i.appendChild(U("input")),M=w?i.appendChild(U("span","view-checkbox__label")):null;return T.type="checkbox",T.checked=p!==void 0?r.queryBool(p,u,c):Boolean(c[d]),T.readOnly=m,T.addEventListener("click",O=>{m&&O.preventDefault()}),T.addEventListener("change",()=>{typeof S=="function"&&(S(T.checked,d,u,c),t(M,w,u,c,d,T))}),typeof x=="function"&&x(T.checked,d,u,c),t(M,w,u,c,d,T)},{tag:"label",usage:Rp})}var sa={demo:{view:"columns",data:["one","two","three","four"],column:"text"}};function jp(r){r.view.define("column",function(t,i,a,u){let{content:c=[]}=i;return r.view.render(t,c,a,u)},{usage:sa})}function Fp(r){r.view.define("columns",function(i,a,u,c){let{column:d,columnConfig:p,emptyText:m,limit:w}=a;if(m!==!1&&m!==""&&i.setAttribute("emptyText",m||"Empty"),!Array.isArray(u)&&u&&(u=[u]),Array.isArray(u))return r.view.renderList(i,this.composeConfig({view:"column",content:d},p),u,c,0,r.view.listLimit(w,25))},{usage:sa})}var Hp={demo:{view:"content-filter",data:["foo","bar","baz"],content:{view:"list",data:".[$ ~= #.filter]"}},examples:[{title:"Using with text-match",demo:{view:"content-filter",data:[{name:"foo"},{name:"bar"},{name:"baz"}],name:"customName",content:{view:"list",data:".[name ~= #.customName]",item:"text-match:{ text: name, match: #.customName }"}}}]};function Bp(r){r.view.define("content-filter",function(t,i,a,u){let{name:c="filter",type:d="regexp",placeholder:p,content:m,onInit:w,onChange:x}=i;return r.view.render(t,{view:"context",modifiers:{view:"input",name:c,type:d,placeholder:p||"Filter"},content:{view:"block",className:"content",content:m,onInit:w,onChange:x}},a,u)},{usage:Hp})}var Wp={demo:{view:"context",data:{name:"text",demo:123},content:["text:name","table"]},examples:[{title:"Using with modifiers",demo:{view:"context",modifiers:['h2:"Modifiers"',{view:"input",name:"inputValue"},{view:"select",name:"selectValue",data:["foo","bar","baz"]}],content:['h2:"Values"',"struct:#"]}}]};function $p(r){r.view.define("context",function(t,i,a,u){function c(){let k=w.previousSibling;for(;k&&k!==m;)k=k.previousSibling,k.nextSibling.remove();let _=x=document.createDocumentFragment();return r.view.render(_,M,a,p).then(()=>{_===x&&(r.view.adoptFragment(_,m),m.after(_))})}function d(k,_){_&&(!hasOwnProperty.call(p,_)||p[_]!==k)&&(p={...p,[_]:k},S?(c(),O&&typeof A=="function"&&A(k,_)):typeof L=="function"&&L(k,_))}let p=u,m=null,w=null,x=null,S=!1,{modifiers:T=[],content:M=[]}=i,{proxy:O,onInit:L,onChange:A}=i;Array.isArray(T)||(T=[T]);let I=r.view.render(t,this.composeConfig(T,{onInit:d,onChange:d}),a,u);return m=t.appendChild(document.createComment('{ view: "context" } content start')),w=t.appendChild(document.createComment('{ view: "context" } content end')),O&&(L||A)&&(M=this.composeConfig(M,{onInit:L,onChange:A})),I.then(()=>(S=!0,c()))},{tag:!1,usage:Wp})}var qp={demo:{view:"context",modifiers:{view:"dropdown",name:"demo",value:{foo:"two",bar:"hello"},resetValue:{foo:"one",bar:""},caption:"text:`${#.demo.foo} / ${#.demo.bar}`",content:[{view:"select",name:"foo",data:["one","two","three","four"]},{view:"input",name:"bar"}]},content:[{view:"block",content:'text:"Modified context (see values in \\"demo\\" section):"'},{view:"struct",expanded:1,data:"#"}]}};var{hasOwnProperty:Vp}=Object.prototype;function Dw(r,t){if(!r||!t||typeof r!="object"||typeof t!="object")return r===t;for(let i in r)if(Vp.call(r,i)&&r[i]!==t[i])return!1;for(let i in t)if(Vp.call(t,i)&&r[i]!==t[i])return!1;return!0}function Up(r){r.view.define("dropdown",function(t,i,a,u){function c(j,B){return typeof L=="function"?L(j,B):Dw(j,B)}function d(){return P.innerHTML="",r.view.render(P,M||"text",a,{...u,[w||"__self"]:k})}function p(j){k=j,typeof I=="function"&&I(k,w,a,u),_.hide(),d()}function m(j,B){if(R){let K={changed:!c(j,B)};R.innerHTML="",r.view.render(R,[{view:"button-primary",disabled:"=not changed",content:'text:"Apply"',onClick(H,ie,W){p(W)}},{view:"button",when:()=>x&&!c(x,k),content:'text:"Reset"',onClick(){p(x)}},{view:"button",disabled:"=not changed",content:'text:"Cancel"',onClick(){_.hide()}}],K,B)}}let{name:w,resetValue:x,value:S,placeholder:T,caption:M,content:O,compare:L,onInit:A,onChange:I}=i,k="value"in i?S:u[w],_=null,P=t.appendChild(document.createElement("div")),R;return T&&(t.dataset.placeholder=T),t.tabIndex=0,t.addEventListener("click",()=>{_===null&&(_=new r.view.Popup({className:"view-dropdown-popup"}));let j={...k},B;_.toggle(t,K=>r.view.render(K,[{view:"block",className:"content",content:r.view.composeConfig(O,{onInit(H,ie){j[ie]=H},onChange(H,ie){j[ie]=H,m(B,j)}})},{view:"block",className:"confirm",postRender(H){R=H}}],a,{...u,...k}).then(()=>{B={...j},m(B,j)}))}),P.className="view-dropdown__caption",typeof A=="function"&&A(k,w,a,u),d()},{usage:qp})}var su={};Ye(su,{escapeHtml:()=>Lt,numDelim:()=>$n});function Lt(r){return r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $n(r,t=!0){let i=t&&typeof r!="number"?Lt(String(r)):String(r);return i.length>3?i.replace(/\.\d+(eE[-+]?\d+)?|\B(?=(\d{3})+(\D|$))/g,a=>a||'<span class="num-delim"></span>'):i}var es=Bn(Tr(),1);var uu=Bn(Tr(),1);function cu(r){let t=uu.default.getMode(r,{name:"javascript",json:!0});return{...t,indent(i,a){return i.indented+r.indentUnit*(i.lastType==="{"&&a.trim()[0]!=="}"||i.lastType==="("&&a.trim()[0]!==")"||i.lastType==="["&&a.trim()[0]!=="]")},token(i,a){let u=i.peek();return u==="#"||u==="@"?(t.token(new uu.default.StringStream("$",4,i.lineOracle),a),i.pos++,"variable"):t.token(i,a)}}}var Gp=Bn(Tr(),1);function Yp(r,t){let i=typeof t.isDiscoveryViewDefined=="function"?t.isDiscoveryViewDefined:()=>{},a=Gp.default.getMode(r,{name:"javascript",json:!0});return{...a,indent(u,c){return u.indented+r.indentUnit*(u.lastType==="{"&&c.trim()[0]!=="}"||u.lastType==="("&&c.trim()[0]!==")"||u.lastType==="["&&c.trim()[0]!=="]")},token:function(u,c){if(c.suspendTokens){let{pos:m,token:w}=c.suspendTokens.shift();return u.pos=m,c.suspendTokens.length===0&&(c.suspendTokens=null),w}let d=u.pos,p=a.token(u,c);if(p==="string"){let m=u.pos,[,w]=u.string.slice(d+1,m-1).match(/^(.+?)([:{]|$)/)||[];i(w)&&(u.pos=d+1,c.suspendTokens=[{pos:d+1+w.length,token:"string discovery-view-name"},{pos:m,token:p}])}return p}}}var I4=Bn(fu(),1);var Ln=Bn(Tr(),1);var hu={};Ye(hu,{getBoundingRect:()=>gr,getOffsetParent:()=>Zo,getOverflowParent:()=>Xo,getPageOffset:()=>du,getViewportRect:()=>pu});var{documentElement:Yi}=document,Qp=document.compatMode==="CSS1Compat";function Zo(r){let t=r.offsetParent;for(;t!==null&&t!==Yi&&getComputedStyle(t).position==="static";)t=t.offsetParent;return t||Yi}function Xo(r){let t=r.parentNode;for(;t!==null&&t!==Yi&&getComputedStyle(t).overflow==="visible";)t=t.parentNode;return t||Yi}function du(r){let t=0,i=0;if(r&&r.getBoundingClientRect){let a=r.getBoundingClientRect();t=-a.top,i=-a.left}else if(Qp)t=window.pageYOffset||Yi.scrollTop,i=window.pageXOffset||Yi.scrollLeft;else{let{body:a}=document;r!==a&&(t=a.scrollTop-a.clientTop,i=a.scrollLeft-a.clientLeft)}return{left:i,top:t}}function gr(r,t){let i=du(t),a=0,u=0,c=0,d=0;return r&&r.getBoundingClientRect&&({top:a,left:u,right:c,bottom:d}=r.getBoundingClientRect()),{top:a+i.top,left:u+i.left,right:c+i.left,bottom:d+i.top,width:c-u,height:d-a}}function pu(r,t){let i=Qp?document.documentElement:document.body,{top:a,left:u}=r===i&&!t?du():gr(r,t),c,d;return!r||r===window?(c=window.innerWidth||0,d=window.innerHeight||0):(a+=r.clientTop,u+=r.clientLeft,c=r.clientWidth,d=r.clientHeight),{top:a,left:u,right:u+c,bottom:a+d,width:c,height:d}}var Pw="discovery-view-editor-hints-popup",Iw="discovery-view-editor-hint",gu="active",_w=window.requestAnimationFrame||(r=>setTimeout(r,1e3/60)),Rw=window.cancelAnimationFrame||clearTimeout;Ln.default.commands.autocomplete=Ln.default.showHint;Ln.default.defineOption("showHintOptions",null);Ln.default.defineExtension("showHint",function(r){r={closeOnUnfocus:!0,container:null,...this.options.showHintOptions,...r},this.state.completionActive&&this.state.completionActive.close(),!(this.listSelections().length>1)&&(this.somethingSelected()||typeof r.hint=="function"&&(this.state.completionActive=new mu(this,r),this.state.completionActive.update(!0),Ln.default.signal(this,"startCompletion",this)))});var mu=class{constructor(t,i){if(this.cm=t,this.options=i,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,t.on("cursorActivity",this.activityFunc=()=>this.cursorActivity()),i.closeOnUnfocus){let a;this.onFocus=()=>clearTimeout(a),this.onBlur=()=>a=setTimeout(()=>this.close(),100),t.on("focus",this.onFocus),t.on("blur",this.onBlur)}}close(){!this.active()||(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.options.closeOnUnfocus&&(this.cm.off("blur",this.onBlur),this.cm.off("focus",this.onFocus)),this.widget&&(this.data&&Ln.default.signal(this.data,"close"),this.widget.close()),Ln.default.signal(this.cm,"endCompletion",this.cm))}active(){return this.cm.state.completionActive===this}pick(t,i){let a=t.list[i];this.cm.state.completionEnabled=!1,a.hint?a.hint(this.cm,t,a):this.cm.replaceRange(Zp(a),a.from||t.from,a.to||t.to,"complete"),Ln.default.signal(t,"pick",a),this.close()}cursorActivity(){this.debounce&&(Rw(this.debounce),this.debounce=0);let t=this.cm.getCursor(),i=this.cm.getLine(t.line);t.line!=this.startPos.line||i.length-t.ch!=this.startLen-this.startPos.ch||t.ch<this.startPos.ch||this.cm.somethingSelected()?this.close():(this.debounce=_w(()=>this.update()),this.widget&&this.widget.disable())}update(t){if(this.tick===null)return;let i=++this.tick;Promise.resolve(this.options.hint(this.cm,this.options)).then(a=>{this.tick==i&&this.finishUpdate(a,t)})}finishUpdate(t){this.data&&Ln.default.signal(this.data,"update");let i=this.widget&&this.widget.picked;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(i&&t.list.length==1?this.pick(t,0):(this.widget=new vu(this,t),Ln.default.signal(t,"shown")))}};function Zp(r){return typeof r=="string"?r:r.text}function zw(r,t){for(;t&&t.parentNode!==r;)t=t.parentNode;return t}var vu=class{constructor(t,i){let a=t.cm,u=this.hintsEl=document.createElement("ul"),c=[Pw,t.cm.options.theme].filter(Boolean),d=t.options.container||document.body;this.rootEls=new Set([d.getRootNode()]),this.completion=t,this.data=i,this.picked=!1,this.selectedHint=i.selectedHint||0,u.style.visibility="hidden",c.forEach(p=>u.classList.add(p)),d.appendChild(u),this.items=i.list.map((p,m)=>{let w=u.appendChild(document.createElement("li"));return w.className=Iw,m===this.selectedHint&&w.classList.add(gu),p.render?p.render(w,i,p):w.appendChild(document.createTextNode(p.displayText||Zp(p))),w}),a.addKeyMap(this.keyMap={Up:()=>this.changeActive(this.selectedHint-1),Down:()=>this.changeActive(this.selectedHint+1),Enter:()=>this.pick(),Tab:()=>this.pick(),Esc:()=>{a.state.completionEnabled=!1,t.close()}}),this.updatePosSize(),this.onScroll=()=>this.updatePosSize();for(let p of this.rootEls)p.addEventListener("scroll",this.onScroll,Wn);Ln.default.on(u,"mousedown",p=>{let m=zw(u,p.target),w=this.items.indexOf(m);w!==-1&&(this.close(),this.selectedHint=w,this.pick(),setTimeout(()=>a.focus(),1))}),Ln.default.signal(i,"select",i.list[this.selectedHint],this.items[this.selectedHint])}close(){if(this.completion.widget===this){this.completion.widget=null,this.completion.cm.removeKeyMap(this.keyMap),this.hintsEl.remove();for(let t of this.rootEls)t.removeEventListener("scroll",this.onScroll,Wn)}}disable(){this.completion.cm.removeKeyMap(this.keyMap),this.keyMap={Enter:()=>this.picked=!0},this.completion.cm.addKeyMap(this.keyMap)}pick(){this.completion.pick(this.data,this.selectedHint)}changeActive(t,i){t>=this.items.length?t=i?this.items.length-1:0:t<0&&(t=i?0:this.items.length-1);let a=this.items[this.selectedHint],u=this.items[this.selectedHint=t];u!==a&&(a&&a.classList.remove(gu),u.classList.add(gu),u.offsetTop<this.hintsEl.scrollTop?this.hintsEl.scrollTop=u.offsetTop-3:u.offsetTop+u.offsetHeight>this.hintsEl.scrollTop+this.hintsEl.clientHeight&&(this.hintsEl.scrollTop=u.offsetTop+u.offsetHeight-this.hintsEl.clientHeight+3),Ln.default.signal(this.data,"select",this.data.list[this.selectedHint],u))}getCursorCoords(){let{completion:t,hintsEl:i}=this,a=t.cm,u=Zo(i),c=a.cursorCoords(null,"local"),d=gr(a.display.wrapper,u);return{top:d.top+c.top+5,left:d.left+c.left+9,bottom:d.top+c.bottom+5,right:d.left+c.right+9}}updatePosSize(){let{hintsEl:a}=this,u=this.getCursorCoords(),{clientWidth:c,clientHeight:d}=Xo(a);a.style.left="0px",a.style.top="0px";let{width:p,height:m}=a.getBoundingClientRect(),w=d-u.bottom,x=u.top;w<m&&x>w?(a.style.top=`${u.top-1-Math.min(m,x-6)-1}px`,a.style.maxHeight=`${x-1-6}px`):(a.style.top=`${u.bottom+1}px`,a.style.maxHeight=`${w-1-6}px`);let S=c-u.right,T=u.left;S<p&&T>S?(a.style.left=`${u.left+1-Math.min(p,T-6)}px`,a.style.maxWidth=`${T-6}px`):(a.style.left=`${u.right}px`,a.style.maxWidth=`${S-6}px`),a.style.visibility="visible"}};function jw(r,t,{entry:{type:i,text:a,value:u}}){let c=a[0],d=a[a.length-1],p=c==='"'||c==="'"?1:0,m=d==='"'||d==="'"?1:0,w=a.toLowerCase().substring(p,a.length-m),x=w?u.toLowerCase().indexOf(w,u[0]==='"'||u[0]==="'"?1:0):-1;x!==-1&&(u=Lt(u.substring(0,x))+'<span class="match">'+Lt(u.substr(x,w.length))+"</span>"+Lt(u.substr(x+w.length))),r.classList.add("type-"+i),r.appendChild(U("span","name",u))}var aa=class extends tr{constructor({hint:t,mode:i}){super(),this.el=document.createElement("div"),this.el.className="discovery-editor";let a=this,u=(0,es.default)(this.el,{extraKeys:{"Alt-Space":"autocomplete"},mode:i||"javascript",theme:"neo",indentUnit:0,showHintOptions:{hint:t,get container(){return a.container}}});u.on("change",()=>this.emit("change",u.getValue())),typeof t=="function"&&(u.on("cursorActivity",c=>{c.state.completionEnabled&&c.state.focused&&c.showHint()}),u.on("focus",c=>{c.getValue()===""&&(c.state.completionEnabled=!0),c.state.completionEnabled&&!c.state.completionActive&&c.showHint()}),u.on("change",(c,d)=>{d.origin!=="complete"&&(u.state.completionEnabled=!0)})),this.cm=u}getValue(){return this.cm.getValue()}setValue(t){Promise.resolve().then(()=>this.cm.refresh()),typeof t=="string"&&this.getValue()!==t&&this.cm.setValue(t||"")}focus(){this.cm.focus()}},yu=class extends aa{constructor(t){super({mode:"discovery-query",hint:i=>{let a=i.getCursor(),u=t(i.getValue(),i.doc.indexFromPos(a),this.queryData,this.queryContext);if(!!u)return{list:u.slice(0,50).map(c=>({entry:c,text:c.value,render:jw,from:i.posFromIndex(c.from),to:i.posFromIndex(c.to)}))}}})}setValue(t,i,a){this.queryData=i,this.queryContext=a,super.setValue(t)}},bu=class extends aa{constructor(){super({mode:{name:"discovery-view",isDiscoveryViewDefined:t=>this.isViewDefined(t)}})}};es.default.defineMode("jora",cu);es.default.defineMode("discovery-query",cu);es.default.defineMode("discovery-view",Yp);function Xp(r){Object.assign(r.view,{QueryEditor:class extends yu{get container(){return r.dom.container}},ViewEditor:class extends bu{isViewDefined(t){return r.view.isDefined(t)}}})}var eh={demo:{view:"expand",header:'text:"Expand me!"',content:'text:"Content"'}};function th(r){r.view.define("expand",function(t,i,a,u){function c(){if(t.classList.toggle("expanded",d),d)return T=U("div","content"),r.view.render(T,m,a,u).then(()=>t.appendChild(T));T!==null&&(T.remove(),T=null)}let{expanded:d,header:p,content:m,onToggle:w}=i,x=t.appendChild(U("div","header")),S=x.appendChild(U("div","header-content")),T=null;return!p&&i.title&&(p=i.title,console.warn("expand.title is deprecated, use expand.header instead")),d=r.queryBool(d,a,u),x.appendChild(U("div","trigger")),x.addEventListener("click",()=>{d=!d,c(),typeof w=="function"&&w(d)}),Promise.all([r.view.render(S,p||'text:"\xA0"',a,u),c()])},{usage:eh})}function lh(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Ji=lh();function Fw(r){Ji=r}var Hw=/[&<>"']/,Bw=/[&<>"']/g,Ww=/[<>"']|&(?!#?\w+;)/,$w=/[<>"']|&(?!#?\w+;)/g,qw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nh=r=>qw[r];function nn(r,t){if(t){if(Hw.test(r))return r.replace(Bw,nh)}else if(Ww.test(r))return r.replace($w,nh);return r}var Vw=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function uh(r){return r.replace(Vw,(t,i)=>(i=i.toLowerCase(),i==="colon"?":":i.charAt(0)==="#"?i.charAt(1)==="x"?String.fromCharCode(parseInt(i.substring(2),16)):String.fromCharCode(+i.substring(1)):""))}var Uw=/(^|[^\[])\^/g;function Ot(r,t){r=typeof r=="string"?r:r.source,t=t||"";let i={replace:(a,u)=>(u=u.source||u,u=u.replace(Uw,"$1"),r=r.replace(a,u),i),getRegex:()=>new RegExp(r,t)};return i}var Gw=/[^\w:]/g,Yw=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function rh(r,t,i){if(r){let a;try{a=decodeURIComponent(uh(i)).replace(Gw,"").toLowerCase()}catch{return null}if(a.indexOf("javascript:")===0||a.indexOf("vbscript:")===0||a.indexOf("data:")===0)return null}t&&!Yw.test(i)&&(i=Zw(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}var la={},Kw=/^[^:]+:\/*[^/]*$/,Jw=/^([^:]+:)[\s\S]*$/,Qw=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Zw(r,t){la[" "+r]||(Kw.test(r)?la[" "+r]=r+"/":la[" "+r]=ua(r,"/",!0)),r=la[" "+r];let i=r.indexOf(":")===-1;return t.substring(0,2)==="//"?i?t:r.replace(Jw,"$1")+t:t.charAt(0)==="/"?i?t:r.replace(Qw,"$1")+t:r+t}var ca={exec:function(){}};function ir(r){let t=1,i,a;for(;t<arguments.length;t++){i=arguments[t];for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r}function ih(r,t){let i=r.replace(/\|/g,(c,d,p)=>{let m=!1,w=d;for(;--w>=0&&p[w]==="\\";)m=!m;return m?"|":" |"}),a=i.split(/ \|/),u=0;if(a[0].trim()||a.shift(),a.length>0&&!a[a.length-1].trim()&&a.pop(),a.length>t)a.splice(t);else for(;a.length<t;)a.push("");for(;u<a.length;u++)a[u]=a[u].trim().replace(/\\\|/g,"|");return a}function ua(r,t,i){let a=r.length;if(a===0)return"";let u=0;for(;u<a;){let c=r.charAt(a-u-1);if(c===t&&!i)u++;else if(c!==t&&i)u++;else break}return r.slice(0,a-u)}function Xw(r,t){if(r.indexOf(t[1])===-1)return-1;let i=r.length,a=0,u=0;for(;u<i;u++)if(r[u]==="\\")u++;else if(r[u]===t[0])a++;else if(r[u]===t[1]&&(a--,a<0))return u;return-1}function ch(r){r&&r.sanitize&&!r.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function oh(r,t){if(t<1)return"";let i="";for(;t>1;)t&1&&(i+=r),t>>=1,r+=r;return i+r}function sh(r,t,i,a){let u=t.href,c=t.title?nn(t.title):null,d=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){a.state.inLink=!0;let p={type:"link",raw:i,href:u,title:c,text:d,tokens:a.inlineTokens(d,[])};return a.state.inLink=!1,p}return{type:"image",raw:i,href:u,title:c,text:nn(d)}}function e1(r,t){let i=r.match(/^(\s+)(?:```)/);if(i===null)return t;let a=i[1];return t.split(`
`).map(u=>{let c=u.match(/^\s+/);if(c===null)return u;let[d]=c;return d.length>=a.length?u.slice(a.length):u}).join(`
`)}var ts=class{constructor(t){this.options=t||Ji}space(t){let i=this.rules.block.newline.exec(t);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(t){let i=this.rules.block.code.exec(t);if(i){let a=i[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?a:ua(a,`
`)}}}fences(t){let i=this.rules.block.fences.exec(t);if(i){let a=i[0],u=e1(a,i[3]||"");return{type:"code",raw:a,lang:i[2]?i[2].trim():i[2],text:u}}}heading(t){let i=this.rules.block.heading.exec(t);if(i){let a=i[2].trim();if(/#$/.test(a)){let c=ua(a,"#");(this.options.pedantic||!c||/ $/.test(c))&&(a=c.trim())}let u={type:"heading",raw:i[0],depth:i[1].length,text:a,tokens:[]};return this.lexer.inline(u.text,u.tokens),u}}hr(t){let i=this.rules.block.hr.exec(t);if(i)return{type:"hr",raw:i[0]}}blockquote(t){let i=this.rules.block.blockquote.exec(t);if(i){let a=i[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:i[0],tokens:this.lexer.blockTokens(a,[]),text:a}}}list(t){let i=this.rules.block.list.exec(t);if(i){let a,u,c,d,p,m,w,x,S,T,M,O,L=i[1].trim(),A=L.length>1,I={type:"list",raw:"",ordered:A,start:A?+L.slice(0,-1):"",loose:!1,items:[]};L=A?`\\d{1,9}\\${L.slice(-1)}`:`\\${L}`,this.options.pedantic&&(L=A?L:"[*+-]");let k=new RegExp(`^( {0,3}${L})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(O=!1,!(!(i=k.exec(t))||this.rules.block.hr.test(t)));){if(a=i[0],t=t.substring(a.length),x=i[2].split(`
`,1)[0],S=t.split(`
`,1)[0],this.options.pedantic?(d=2,M=x.trimLeft()):(d=i[2].search(/[^ ]/),d=d>4?1:d,M=x.slice(d),d+=i[1].length),m=!1,!x&&/^ *$/.test(S)&&(a+=S+`
`,t=t.substring(S.length+1),O=!0),!O){let P=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),R=new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),j=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),B=new RegExp(`^ {0,${Math.min(3,d-1)}}#`);for(;t&&(T=t.split(`
`,1)[0],x=T,this.options.pedantic&&(x=x.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(j.test(x)||B.test(x)||P.test(x)||R.test(t)));){if(x.search(/[^ ]/)>=d||!x.trim())M+=`
`+x.slice(d);else if(!m)M+=`
`+x;else break;!m&&!x.trim()&&(m=!0),a+=T+`
`,t=t.substring(T.length+1)}}I.loose||(w?I.loose=!0:/\n *\n *$/.test(a)&&(w=!0)),this.options.gfm&&(u=/^\[[ xX]\] /.exec(M),u&&(c=u[0]!=="[ ] ",M=M.replace(/^\[[ xX]\] +/,""))),I.items.push({type:"list_item",raw:a,task:!!u,checked:c,loose:!1,text:M}),I.raw+=a}I.items[I.items.length-1].raw=a.trimRight(),I.items[I.items.length-1].text=M.trimRight(),I.raw=I.raw.trimRight();let _=I.items.length;for(p=0;p<_;p++){this.lexer.state.top=!1,I.items[p].tokens=this.lexer.blockTokens(I.items[p].text,[]);let P=I.items[p].tokens.filter(j=>j.type==="space"),R=P.every(j=>{let B=j.raw.split(""),K=0;for(let H of B)if(H===`
`&&(K+=1),K>1)return!0;return!1});!I.loose&&P.length&&R&&(I.loose=!0,I.items[p].loose=!0)}return I}}html(t){let i=this.rules.block.html.exec(t);if(i){let a={type:"html",raw:i[0],pre:!this.options.sanitizer&&(i[1]==="pre"||i[1]==="script"||i[1]==="style"),text:i[0]};return this.options.sanitize&&(a.type="paragraph",a.text=this.options.sanitizer?this.options.sanitizer(i[0]):nn(i[0]),a.tokens=[],this.lexer.inline(a.text,a.tokens)),a}}def(t){let i=this.rules.block.def.exec(t);if(i){i[3]&&(i[3]=i[3].substring(1,i[3].length-1));let a=i[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:a,raw:i[0],href:i[2],title:i[3]}}}table(t){let i=this.rules.block.table.exec(t);if(i){let a={type:"table",header:ih(i[1]).map(u=>({text:u})),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:i[3]&&i[3].trim()?i[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=i[0];let u=a.align.length,c,d,p,m;for(c=0;c<u;c++)/^ *-+: *$/.test(a.align[c])?a.align[c]="right":/^ *:-+: *$/.test(a.align[c])?a.align[c]="center":/^ *:-+ *$/.test(a.align[c])?a.align[c]="left":a.align[c]=null;for(u=a.rows.length,c=0;c<u;c++)a.rows[c]=ih(a.rows[c],a.header.length).map(w=>({text:w}));for(u=a.header.length,d=0;d<u;d++)a.header[d].tokens=[],this.lexer.inline(a.header[d].text,a.header[d].tokens);for(u=a.rows.length,d=0;d<u;d++)for(m=a.rows[d],p=0;p<m.length;p++)m[p].tokens=[],this.lexer.inline(m[p].text,m[p].tokens);return a}}}lheading(t){let i=this.rules.block.lheading.exec(t);if(i){let a={type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}paragraph(t){let i=this.rules.block.paragraph.exec(t);if(i){let a={type:"paragraph",raw:i[0],text:i[1].charAt(i[1].length-1)===`
`?i[1].slice(0,-1):i[1],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}text(t){let i=this.rules.block.text.exec(t);if(i){let a={type:"text",raw:i[0],text:i[0],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}escape(t){let i=this.rules.inline.escape.exec(t);if(i)return{type:"escape",raw:i[0],text:nn(i[1])}}tag(t){let i=this.rules.inline.tag.exec(t);if(i)return!this.lexer.state.inLink&&/^<a /i.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):nn(i[0]):i[0]}}link(t){let i=this.rules.inline.link.exec(t);if(i){let a=i[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;let d=ua(a.slice(0,-1),"\\");if((a.length-d.length)%2===0)return}else{let d=Xw(i[2],"()");if(d>-1){let m=(i[0].indexOf("!")===0?5:4)+i[1].length+d;i[2]=i[2].substring(0,d),i[0]=i[0].substring(0,m).trim(),i[3]=""}}let u=i[2],c="";if(this.options.pedantic){let d=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u);d&&(u=d[1],c=d[3])}else c=i[3]?i[3].slice(1,-1):"";return u=u.trim(),/^</.test(u)&&(this.options.pedantic&&!/>$/.test(a)?u=u.slice(1):u=u.slice(1,-1)),sh(i,{href:u&&u.replace(this.rules.inline._escapes,"$1"),title:c&&c.replace(this.rules.inline._escapes,"$1")},i[0],this.lexer)}}reflink(t,i){let a;if((a=this.rules.inline.reflink.exec(t))||(a=this.rules.inline.nolink.exec(t))){let u=(a[2]||a[1]).replace(/\s+/g," ");if(u=i[u.toLowerCase()],!u||!u.href){let c=a[0].charAt(0);return{type:"text",raw:c,text:c}}return sh(a,u,a[0],this.lexer)}}emStrong(t,i,a=""){let u=this.rules.inline.emStrong.lDelim.exec(t);if(!u||u[3]&&a.match(/[\p{L}\p{N}]/u))return;let c=u[1]||u[2]||"";if(!c||c&&(a===""||this.rules.inline.punctuation.exec(a))){let d=u[0].length-1,p,m,w=d,x=0,S=u[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(S.lastIndex=0,i=i.slice(-1*t.length+d);(u=S.exec(i))!=null;){if(p=u[1]||u[2]||u[3]||u[4]||u[5]||u[6],!p)continue;if(m=p.length,u[3]||u[4]){w+=m;continue}else if((u[5]||u[6])&&d%3&&!((d+m)%3)){x+=m;continue}if(w-=m,w>0)continue;if(m=Math.min(m,m+w+x),Math.min(d,m)%2){let M=t.slice(1,d+u.index+m);return{type:"em",raw:t.slice(0,d+u.index+m+1),text:M,tokens:this.lexer.inlineTokens(M,[])}}let T=t.slice(2,d+u.index+m-1);return{type:"strong",raw:t.slice(0,d+u.index+m+1),text:T,tokens:this.lexer.inlineTokens(T,[])}}}}codespan(t){let i=this.rules.inline.code.exec(t);if(i){let a=i[2].replace(/\n/g," "),u=/[^ ]/.test(a),c=/^ /.test(a)&&/ $/.test(a);return u&&c&&(a=a.substring(1,a.length-1)),a=nn(a,!0),{type:"codespan",raw:i[0],text:a}}}br(t){let i=this.rules.inline.br.exec(t);if(i)return{type:"br",raw:i[0]}}del(t){let i=this.rules.inline.del.exec(t);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2],[])}}autolink(t,i){let a=this.rules.inline.autolink.exec(t);if(a){let u,c;return a[2]==="@"?(u=nn(this.options.mangle?i(a[1]):a[1]),c="mailto:"+u):(u=nn(a[1]),c=u),{type:"link",raw:a[0],text:u,href:c,tokens:[{type:"text",raw:u,text:u}]}}}url(t,i){let a;if(a=this.rules.inline.url.exec(t)){let u,c;if(a[2]==="@")u=nn(this.options.mangle?i(a[0]):a[0]),c="mailto:"+u;else{let d;do d=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(d!==a[0]);u=nn(a[0]),a[1]==="www."?c="http://"+u:c=u}return{type:"link",raw:a[0],text:u,href:c,tokens:[{type:"text",raw:u,text:u}]}}}inlineText(t,i){let a=this.rules.inline.text.exec(t);if(a){let u;return this.lexer.state.inRawBlock?u=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):nn(a[0]):a[0]:u=nn(this.options.smartypants?i(a[0]):a[0]),{type:"text",raw:a[0],text:u}}}},We={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ca,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};We._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;We._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;We.def=Ot(We.def).replace("label",We._label).replace("title",We._title).getRegex();We.bullet=/(?:[*+-]|\d{1,9}[.)])/;We.listItemStart=Ot(/^( *)(bull) */).replace("bull",We.bullet).getRegex();We.list=Ot(We.list).replace(/bull/g,We.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+We.def.source+")").getRegex();We._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";We._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;We.html=Ot(We.html,"i").replace("comment",We._comment).replace("tag",We._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();We.paragraph=Ot(We._paragraph).replace("hr",We.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",We._tag).getRegex();We.blockquote=Ot(We.blockquote).replace("paragraph",We.paragraph).getRegex();We.normal=ir({},We);We.gfm=ir({},We.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});We.gfm.table=Ot(We.gfm.table).replace("hr",We.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",We._tag).getRegex();We.gfm.paragraph=Ot(We._paragraph).replace("hr",We.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",We.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",We._tag).getRegex();We.pedantic=ir({},We.normal,{html:Ot(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",We._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ca,paragraph:Ot(We.normal._paragraph).replace("hr",We.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",We.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var he={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ca,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ca,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};he._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";he.punctuation=Ot(he.punctuation).replace(/punctuation/g,he._punctuation).getRegex();he.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;he.escapedEmSt=/\\\*|\\_/g;he._comment=Ot(We._comment).replace("(?:-->|$)","-->").getRegex();he.emStrong.lDelim=Ot(he.emStrong.lDelim).replace(/punct/g,he._punctuation).getRegex();he.emStrong.rDelimAst=Ot(he.emStrong.rDelimAst,"g").replace(/punct/g,he._punctuation).getRegex();he.emStrong.rDelimUnd=Ot(he.emStrong.rDelimUnd,"g").replace(/punct/g,he._punctuation).getRegex();he._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;he._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;he._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;he.autolink=Ot(he.autolink).replace("scheme",he._scheme).replace("email",he._email).getRegex();he._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;he.tag=Ot(he.tag).replace("comment",he._comment).replace("attribute",he._attribute).getRegex();he._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;he._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;he._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;he.link=Ot(he.link).replace("label",he._label).replace("href",he._href).replace("title",he._title).getRegex();he.reflink=Ot(he.reflink).replace("label",he._label).replace("ref",We._label).getRegex();he.nolink=Ot(he.nolink).replace("ref",We._label).getRegex();he.reflinkSearch=Ot(he.reflinkSearch,"g").replace("reflink",he.reflink).replace("nolink",he.nolink).getRegex();he.normal=ir({},he);he.pedantic=ir({},he.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ot(/^!?\[(label)\]\((.*?)\)/).replace("label",he._label).getRegex(),reflink:Ot(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",he._label).getRegex()});he.gfm=ir({},he.normal,{escape:Ot(he.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});he.gfm.url=Ot(he.gfm.url,"i").replace("email",he.gfm._extended_email).getRegex();he.breaks=ir({},he.gfm,{br:Ot(he.br).replace("{2,}","*").getRegex(),text:Ot(he.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function t1(r){return r.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function ah(r){let t="",i,a,u=r.length;for(i=0;i<u;i++)a=r.charCodeAt(i),Math.random()>.5&&(a="x"+a.toString(16)),t+="&#"+a+";";return t}var nr=class{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Ji,this.options.tokenizer=this.options.tokenizer||new ts,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let i={block:We.normal,inline:he.normal};this.options.pedantic?(i.block=We.pedantic,i.inline=he.pedantic):this.options.gfm&&(i.block=We.gfm,this.options.breaks?i.inline=he.breaks:i.inline=he.gfm),this.tokenizer.rules=i}static get rules(){return{block:We,inline:he}}static lex(t,i){return new nr(i).lex(t)}static lexInline(t,i){return new nr(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let i;for(;i=this.inlineQueue.shift();)this.inlineTokens(i.src,i.tokens);return this.tokens}blockTokens(t,i=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(p,m,w)=>m+"    ".repeat(w.length));let a,u,c,d;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(p=>(a=p.call({lexer:this},t,i))?(t=t.substring(a.raw.length),i.push(a),!0):!1))){if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length),a.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length),u=i[i.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length),u=i[i.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),i.push(a);continue}if(c=t,this.options.extensions&&this.options.extensions.startBlock){let p=1/0,m=t.slice(1),w;this.options.extensions.startBlock.forEach(function(x){w=x.call({lexer:this},m),typeof w=="number"&&w>=0&&(p=Math.min(p,w))}),p<1/0&&p>=0&&(c=t.substring(0,p+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){u=i[i.length-1],d&&u.type==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(a),d=c.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length),u=i[i.length-1],u&&u.type==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(a);continue}if(t){let p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,i}inline(t,i){this.inlineQueue.push({src:t,tokens:i})}inlineTokens(t,i=[]){let a,u,c,d=t,p,m,w;if(this.tokens.links){let x=Object.keys(this.tokens.links);if(x.length>0)for(;(p=this.tokenizer.rules.inline.reflinkSearch.exec(d))!=null;)x.includes(p[0].slice(p[0].lastIndexOf("[")+1,-1))&&(d=d.slice(0,p.index)+"["+oh("a",p[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(p=this.tokenizer.rules.inline.blockSkip.exec(d))!=null;)d=d.slice(0,p.index)+"["+oh("a",p[0].length-2)+"]"+d.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(p=this.tokenizer.rules.inline.escapedEmSt.exec(d))!=null;)d=d.slice(0,p.index)+"++"+d.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(m||(w=""),m=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(x=>(a=x.call({lexer:this},t,i))?(t=t.substring(a.raw.length),i.push(a),!0):!1))){if(a=this.tokenizer.escape(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.tag(t)){t=t.substring(a.raw.length),u=i[i.length-1],u&&a.type==="text"&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):i.push(a);continue}if(a=this.tokenizer.link(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(a.raw.length),u=i[i.length-1],u&&a.type==="text"&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):i.push(a);continue}if(a=this.tokenizer.emStrong(t,d,w)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.codespan(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.br(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.del(t)){t=t.substring(a.raw.length),i.push(a);continue}if(a=this.tokenizer.autolink(t,ah)){t=t.substring(a.raw.length),i.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(t,ah))){t=t.substring(a.raw.length),i.push(a);continue}if(c=t,this.options.extensions&&this.options.extensions.startInline){let x=1/0,S=t.slice(1),T;this.options.extensions.startInline.forEach(function(M){T=M.call({lexer:this},S),typeof T=="number"&&T>=0&&(x=Math.min(x,T))}),x<1/0&&x>=0&&(c=t.substring(0,x+1))}if(a=this.tokenizer.inlineText(c,t1)){t=t.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(w=a.raw.slice(-1)),m=!0,u=i[i.length-1],u&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):i.push(a);continue}if(t){let x="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(x);break}else throw new Error(x)}}return i}},ns=class{constructor(t){this.options=t||Ji}code(t,i,a){let u=(i||"").match(/\S*/)[0];if(this.options.highlight){let c=this.options.highlight(t,u);c!=null&&c!==t&&(a=!0,t=c)}return t=t.replace(/\n$/,"")+`
`,u?'<pre><code class="'+this.options.langPrefix+nn(u,!0)+'">'+(a?t:nn(t,!0))+`</code></pre>
`:"<pre><code>"+(a?t:nn(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t){return t}heading(t,i,a,u){if(this.options.headerIds){let c=this.options.headerPrefix+u.slug(a);return`<h${i} id="${c}">${t}</h${i}>
`}return`<h${i}>${t}</h${i}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,i,a){let u=i?"ol":"ul",c=i&&a!==1?' start="'+a+'"':"";return"<"+u+c+`>
`+t+"</"+u+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,i){return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,i){let a=i.header?"th":"td";return(i.align?`<${a} align="${i.align}">`:`<${a}>`)+t+`</${a}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,i,a){if(t=rh(this.options.sanitize,this.options.baseUrl,t),t===null)return a;let u='<a href="'+nn(t)+'"';return i&&(u+=' title="'+i+'"'),u+=">"+a+"</a>",u}image(t,i,a){if(t=rh(this.options.sanitize,this.options.baseUrl,t),t===null)return a;let u=`<img src="${t}" alt="${a}"`;return i&&(u+=` title="${i}"`),u+=this.options.xhtml?"/>":">",u}text(t){return t}},fa=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,i,a){return""+a}image(t,i,a){return""+a}br(){return""}},Ki=class{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,i){let a=t,u=0;if(this.seen.hasOwnProperty(a)){u=this.seen[t];do u++,a=t+"-"+u;while(this.seen.hasOwnProperty(a))}return i||(this.seen[t]=u,this.seen[a]=0),a}slug(t,i={}){let a=this.serialize(t);return this.getNextSafeSlug(a,i.dryrun)}},rr=class{constructor(t){this.options=t||Ji,this.options.renderer=this.options.renderer||new ns,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new fa,this.slugger=new Ki}static parse(t,i){return new rr(i).parse(t)}static parseInline(t,i){return new rr(i).parseInline(t)}parse(t,i=!0){let a="",u,c,d,p,m,w,x,S,T,M,O,L,A,I,k,_,P,R,j,B=t.length;for(u=0;u<B;u++){if(M=t[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[M.type]&&(j=this.options.extensions.renderers[M.type].call({parser:this},M),j!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(M.type))){a+=j||"";continue}switch(M.type){case"space":continue;case"hr":{a+=this.renderer.hr();continue}case"heading":{a+=this.renderer.heading(this.parseInline(M.tokens),M.depth,uh(this.parseInline(M.tokens,this.textRenderer)),this.slugger);continue}case"code":{a+=this.renderer.code(M.text,M.lang,M.escaped);continue}case"table":{for(S="",x="",p=M.header.length,c=0;c<p;c++)x+=this.renderer.tablecell(this.parseInline(M.header[c].tokens),{header:!0,align:M.align[c]});for(S+=this.renderer.tablerow(x),T="",p=M.rows.length,c=0;c<p;c++){for(w=M.rows[c],x="",m=w.length,d=0;d<m;d++)x+=this.renderer.tablecell(this.parseInline(w[d].tokens),{header:!1,align:M.align[d]});T+=this.renderer.tablerow(x)}a+=this.renderer.table(S,T);continue}case"blockquote":{T=this.parse(M.tokens),a+=this.renderer.blockquote(T);continue}case"list":{for(O=M.ordered,L=M.start,A=M.loose,p=M.items.length,T="",c=0;c<p;c++)k=M.items[c],_=k.checked,P=k.task,I="",k.task&&(R=this.renderer.checkbox(_),A?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=R+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=R+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:R}):I+=R),I+=this.parse(k.tokens,A),T+=this.renderer.listitem(I,P,_);a+=this.renderer.list(T,O,L);continue}case"html":{a+=this.renderer.html(M.text);continue}case"paragraph":{a+=this.renderer.paragraph(this.parseInline(M.tokens));continue}case"text":{for(T=M.tokens?this.parseInline(M.tokens):M.text;u+1<B&&t[u+1].type==="text";)M=t[++u],T+=`
`+(M.tokens?this.parseInline(M.tokens):M.text);a+=i?this.renderer.paragraph(T):T;continue}default:{let K='Token with "'+M.type+'" type was not found.';if(this.options.silent){console.error(K);return}else throw new Error(K)}}}return a}parseInline(t,i){i=i||this.renderer;let a="",u,c,d,p=t.length;for(u=0;u<p;u++){if(c=t[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[c.type]&&(d=this.options.extensions.renderers[c.type].call({parser:this},c),d!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(c.type))){a+=d||"";continue}switch(c.type){case"escape":{a+=i.text(c.text);break}case"html":{a+=i.html(c.text);break}case"link":{a+=i.link(c.href,c.title,this.parseInline(c.tokens,i));break}case"image":{a+=i.image(c.href,c.title,c.text);break}case"strong":{a+=i.strong(this.parseInline(c.tokens,i));break}case"em":{a+=i.em(this.parseInline(c.tokens,i));break}case"codespan":{a+=i.codespan(c.text);break}case"br":{a+=i.br();break}case"del":{a+=i.del(this.parseInline(c.tokens,i));break}case"text":{a+=i.text(c.text);break}default:{let m='Token with "'+c.type+'" type was not found.';if(this.options.silent){console.error(m);return}else throw new Error(m)}}}return a}};function Ue(r,t,i){if(typeof r>"u"||r===null)throw new Error("marked(): input parameter is undefined or null");if(typeof r!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected");if(typeof t=="function"&&(i=t,t=null),t=ir({},Ue.defaults,t||{}),ch(t),i){let a=t.highlight,u;try{u=nr.lex(r,t)}catch(p){return i(p)}let c=function(p){let m;if(!p)try{t.walkTokens&&Ue.walkTokens(u,t.walkTokens),m=rr.parse(u,t)}catch(w){p=w}return t.highlight=a,p?i(p):i(null,m)};if(!a||a.length<3||(delete t.highlight,!u.length))return c();let d=0;Ue.walkTokens(u,function(p){p.type==="code"&&(d++,setTimeout(()=>{a(p.text,p.lang,function(m,w){if(m)return c(m);w!=null&&w!==p.text&&(p.text=w,p.escaped=!0),d--,d===0&&c()})},0))}),d===0&&c();return}try{let a=nr.lex(r,t);return t.walkTokens&&Ue.walkTokens(a,t.walkTokens),rr.parse(a,t)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+nn(a.message+"",!0)+"</pre>";throw a}}Ue.options=Ue.setOptions=function(r){return ir(Ue.defaults,r),Fw(Ue.defaults),Ue};Ue.getDefaults=lh;Ue.defaults=Ji;Ue.use=function(...r){let t=ir({},...r),i=Ue.defaults.extensions||{renderers:{},childTokens:{}},a;r.forEach(u=>{if(u.extensions&&(a=!0,u.extensions.forEach(c=>{if(!c.name)throw new Error("extension name required");if(c.renderer){let d=i.renderers?i.renderers[c.name]:null;d?i.renderers[c.name]=function(...p){let m=c.renderer.apply(this,p);return m===!1&&(m=d.apply(this,p)),m}:i.renderers[c.name]=c.renderer}if(c.tokenizer){if(!c.level||c.level!=="block"&&c.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");i[c.level]?i[c.level].unshift(c.tokenizer):i[c.level]=[c.tokenizer],c.start&&(c.level==="block"?i.startBlock?i.startBlock.push(c.start):i.startBlock=[c.start]:c.level==="inline"&&(i.startInline?i.startInline.push(c.start):i.startInline=[c.start]))}c.childTokens&&(i.childTokens[c.name]=c.childTokens)})),u.renderer){let c=Ue.defaults.renderer||new ns;for(let d in u.renderer){let p=c[d];c[d]=(...m)=>{let w=u.renderer[d].apply(c,m);return w===!1&&(w=p.apply(c,m)),w}}t.renderer=c}if(u.tokenizer){let c=Ue.defaults.tokenizer||new ts;for(let d in u.tokenizer){let p=c[d];c[d]=(...m)=>{let w=u.tokenizer[d].apply(c,m);return w===!1&&(w=p.apply(c,m)),w}}t.tokenizer=c}if(u.walkTokens){let c=Ue.defaults.walkTokens;t.walkTokens=function(d){u.walkTokens.call(this,d),c&&c.call(this,d)}}a&&(t.extensions=i),Ue.setOptions(t)})};Ue.walkTokens=function(r,t){for(let i of r)switch(t.call(Ue,i),i.type){case"table":{for(let a of i.header)Ue.walkTokens(a.tokens,t);for(let a of i.rows)for(let u of a)Ue.walkTokens(u.tokens,t);break}case"list":{Ue.walkTokens(i.items,t);break}default:Ue.defaults.extensions&&Ue.defaults.extensions.childTokens&&Ue.defaults.extensions.childTokens[i.type]?Ue.defaults.extensions.childTokens[i.type].forEach(function(a){Ue.walkTokens(i[a],t)}):i.tokens&&Ue.walkTokens(i.tokens,t)}};Ue.parseInline=function(r,t){if(typeof r>"u"||r===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof r!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected");t=ir({},Ue.defaults,t||{}),ch(t);try{let i=nr.lexInline(r,t);return t.walkTokens&&Ue.walkTokens(i,t.walkTokens),rr.parseInline(i,t)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t.silent)return"<p>An error occurred:</p><pre>"+nn(i.message+"",!0)+"</pre>";throw i}};Ue.Parser=rr;Ue.parser=rr.parse;Ue.Renderer=ns;Ue.TextRenderer=fa;Ue.Lexer=nr;Ue.lexer=nr.lex;Ue.Tokenizer=ts;Ue.Slugger=Ki;Ue.parse=Ue;var $4=Ue.options,q4=Ue.setOptions,V4=Ue.use,U4=Ue.walkTokens,G4=Ue.parseInline;var Y4=rr.parse,K4=nr.lex;var di=(r,t)=>({demo:`${r}:"Header \\"${r}\\""`,examples:[{title:"Variations",view:t.map(i=>`${i}:"Header \\"${i}\\""`)},{title:"Complex content",demo:{view:r,content:['text:"Text "','link:{ text: "Link" }']}},{title:"Using anchor",demo:[{view:r,anchor:"foo",content:'text:"Explicit value for an anchor"'},{view:r,anchor:!0,content:'text:"Auto generated anchor based on text content of header"'}]}]});function fh(r){let t=new Ki;function i(a,u,c,d){let{content:p,anchor:m=!1}=u;a.classList.add("view-header");let w=r.view.render(a,p||"text",c,d);return m&&w.then(()=>{let x=t.slug(m===!0?a.textContent:String(m),{dryrun:!0}),S=r.encodePageHash(r.pageId,r.pageRef,{...r.pageParams,"!anchor":x});a.prepend(U("a",{class:"view-header__anchor",id:`!anchor:${x}`,href:S}))}),w}r.view.define("header",i,{tag:"h4",usage:di}),r.view.define("h1",i,{tag:"h1",usage:di}),r.view.define("h2",i,{tag:"h2",usage:di}),r.view.define("h3",i,{tag:"h3",usage:di}),r.view.define("h4",i,{tag:"h4",usage:di}),r.view.define("h5",i,{tag:"h5",usage:di})}var dh={demo:{view:"hstack",content:['button:{text:"First button"}','button-primary:{text:"Second button"}']}};function ph(r){r.view.define("hstack",function(t,i,a,u){let{content:c=[]}=i;return r.view.render(t,c,a,u)},{usage:dh})}var hh={demo:{view:"html",data:'"<h1>I am inner HTML</h1>"'}};function gh(r){let t=document.createElement("div");r.view.define("html",function(i,a,u){t.innerHTML=u,i.append(...t.childNodes)},{tag:null,usage:hh})}var wu="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjggMTI4Ij4KICAgIDxyZWN0IHg9IjY1LjYiIHk9IjI0LjYiIHRyYW5zZm9ybT0ibWF0cml4KDAuOTM5NyAtMC4zNDIgMC4zNDIgMC45Mzk3IC05Ljk0MjYgMzEuODI4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjM5LjMiIGhlaWdodD0iMzkiPjwvcmVjdD4KICAgIDxyZWN0IHg9IjcwLjYiIHk9IjUyLjciIHRyYW5zZm9ybT0ibWF0cml4KC0wLjkzOTcgMC4zNDIgLTAuMzQyIC0wLjkzOTcgMTk0Ljc4NTIgODEuMTIwNCkiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzOS4zIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICA8cGF0aCBmaWxsPSIjOThCRUQ4IiBkPSJNMTExLjUsNTQuNmwtMS4xLDEuMUw5Ny4xLDE5LjFsMS41LDAuMmM4LDAuOSwxNC43LDYuMiwxNy40LDEzLjdsMCwwQzExOC44LDQwLjQsMTE3LDQ4LjgsMTExLjUsNTQuNnoiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03My41LDcyLjJjLTEuMiwwLTIuNC0wLjgtMi44LTJMNTcuMywzMy41Yy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzNi45LTEzLjRjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTMuMywzNi42YzAuMywwLjcsMC4yLDEuNi0wLjEsMi4zYy0wLjMsMC43LTAuOSwxLjMtMS43LDEuNkw3NC41LDcyQzc0LjIsNzIuMSw3My44LDcyLjIsNzMuNSw3Mi4yek02NCwzNC4zbDExLjMsMzFsMzEuMy0xMS40bC0xMS4zLTMxTDY0LDM0LjN6Ij48L3BhdGg+CiAgICA8cmVjdCB4PSIzNSIgeT0iNDYuNyIgdHJhbnNmb3JtPSJtYXRyaXgoMC45Mzk3IC0wLjM0MiAwLjM0MiAwLjkzOTcgLTE2LjIwMTEgMjAuOTg4KSIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjMyLjgiIGhlaWdodD0iMTkuNSI+PC9yZWN0PgogICAgPHJlY3QgeD0iMzcuMyIgeT0iNTkuOCIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuOTM5NyAwLjM0MiAtMC4zNDIgLTAuOTM5NyAxMjUuNjc2MyAxMDMuMzk0NikiIGZpbGw9IiNDN0Q3RTIiIHdpZHRoPSIzMi44IiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik0zOS40LDc0LjJjLTAuNCwwLTAuOS0wLjEtMS4zLTAuM2MtMC43LTAuMy0xLjMtMC45LTEuNi0xLjdsLTYuNy0xOC4zYy0wLjMtMC43LTAuMi0xLjYsMC4xLTIuM2MwLjMtMC43LDAuOS0xLjMsMS43LTEuNmwzMC44LTExLjJjMC43LTAuMywxLjYtMC4yLDIuMywwLjFjMC43LDAuMywxLjMsMC45LDEuNiwxLjdMNzMsNTljMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhMNDAuNCw3NEM0MCw3NC4xLDM5LjcsNzQuMiwzOS40LDc0LjJ6IE0zNi41LDU0LjdsNC42LDEyLjdsMjUuMi05LjJsLTQuNi0xMi43TDM2LjUsNTQuN3oiPjwvcGF0aD4KICAgIDxwYXRoIGZpbGw9IiM0NTRCNTQiIGQ9Ik03MCwxMTguOWMtMS4yLDAtMi40LTAuNy0yLjgtMS45bC0xNC0zNy4ybC04LjQsMy4xbC0xNy4yLDM0LjRjLTAuNywxLjUtMi41LDIuMS00LDEuM2MtMS41LTAuNy0yLjEtMi41LTEuMy00TDQwLDc5YzAuMy0wLjcsMC45LTEuMiwxLjctMS41TDU0LDczLjFjMS41LTAuNiwzLjMsMC4yLDMuOCwxLjhsMTUsNDBjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjlDNzAuNywxMTguOCw3MC40LDExOC45LDcwLDExOC45eiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjYsODAuMWMtMS4yLDAtMi40LTAuOC0yLjgtMkw2LjMsNjUuOWMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhjMS42LTAuNiwzLjMsMC4yLDMuOCwxLjhsNC40LDEyLjJjMC42LDEuNi0wLjIsMy4zLTEuOCwzLjhDMTQuMyw4MC4xLDE0LDgwLjEsMTMuNiw4MC4xeiI+PC9wYXRoPgogICAgPHBhdGggZmlsbD0iIzQ1NEI1NCIgZD0iTTEzLjIsNzMuM2MtMS4yLDAtMi40LTAuOC0yLjgtMmMtMC42LTEuNiwwLjItMy4zLDEuOC0zLjhMMzUsNTkuMmMxLjYtMC42LDMuMywwLjIsMy44LDEuOGMwLjYsMS42LTAuMiwzLjMtMS44LDMuOGwtMjIuOCw4LjNDMTMuOSw3My4zLDEzLjYsNzMuMywxMy4yLDczLjN6Ij48L3BhdGg+Cjwvc3ZnPgo=",mh={demo:{view:"image",src:wu,height:100},examples:[{title:"Src is not defined",demo:"image"},{title:"Bad url",demo:'image{ src: "<bad url>" }'}]};function vh(r){r.view.define("image",function(t,i){Object.assign(t,i),t.onerror=()=>t.classList.add("error"),t.onload=()=>t.classList.add("loaded")},{tag:"img",usage:mh})}var yh={beforeDemo:['md:"The same as `image` view but with "'],demo:{view:"image-preview",src:wu,height:100},examples:[{title:"Src is not defined",demo:"image-preview"},{title:"Bad url",demo:'image-preview{ src: "<bad url>" }'}]};function bh(r){r.view.define("image-preview",function(t,i,a,u){this.render(t,{view:"image",...i},a,u)},{usage:yh})}var wh={demo:{view:"indicator",data:{label:"Label",value:"1234"}},examples:[{title:"Indicator as link",demo:{view:"indicator",data:{label:"Label",value:"4321",href:"#"}}}]};function xh(r){r.view.define("indicator",function(t,i,a,u){let{value:c,label:d}=i,{href:p}=a||{},m=document.createElement("div"),w=document.createElement("div");return m.className="value",w.className="label",p&&(t.href=p),Promise.all([r.view.render(m,c||"text:value",a,u),r.view.render(w,d||"text:label",a,u)]).then(()=>t.append(m,w))},{tag:"a",usage:wh})}var kh=new Function("return (value) => alert(`Changed to ${value}!`)")(),Sh={examples:[{title:"Input with value",demo:{view:"input",value:'"value"'}},{title:"Input with placeholder",demo:{view:"input",placeholder:"placeholder"}},{title:"Input type number with min and max",demo:{view:"input",htmlType:"number",htmlMin:10,htmlMax:20}},{title:"Input with onChange",demo:{view:"input",onChange:kh}},{title:"Input with onChange debounced",demo:{view:"input",onChange:kh,debounce:300}}]};function n1(r,t){try{return new RegExp("((?:"+r+")+)",t)}catch{}return new RegExp("((?:"+r.replace(/[\[\]\(\)\?\+\*\{\}\\]/g,"\\$&")+")+)",t)}function rs(r,t="i"){let i=n1(r,t);return i.rawSource=r,i}function r1(r){let t=typeof r;return r!=null&&(t==="object"||t==="function")}function Lr(r,t){if(typeof t=="number"&&(t={wait:t}),!r1(t))return r;let{wait:i}=t,a,u,c,d,p,m,w=0,x=!1,S=!1,T=!0;if(typeof r!="function")throw new TypeError("Expected a function");i=Math.max(0,Number(i)||0),x=Boolean(t.leading),S="maxWait"in t,c=S?Math.max(Number(t.maxWait)||0,i):c,T="trailing"in t?Boolean(t.trailing):T;function M(H){let ie=a,W=u;return a=u=void 0,w=H,d=r.apply(W,ie),d}function O(H,ie){return setTimeout(H,ie)}function L(H){clearTimeout(H)}function A(H){return w=H,p=O(_,i),x?M(H):d}function I(H){let ie=H-m,W=H-w,q=i-ie;return S?Math.min(q,c-W):q}function k(H){let ie=H-m,W=H-w;return m===void 0||ie>=i||ie<0||S&&W>=c}function _(){let H=Date.now();if(k(H))return P(H);p=O(_,I(H))}function P(H){return p=void 0,T&&a?M(H):(a=u=void 0,d)}function R(){p!==void 0&&L(p),w=0,a=m=u=p=void 0}function j(){return p===void 0?d:P(Date.now())}function B(){return p!==void 0}function K(...H){let ie=Date.now(),W=k(ie);if(a=H,u=this,m=ie,W){if(p===void 0)return A(m);if(S)return p=O(_,i),M(m)}return p===void 0&&(p=O(_,i)),d}return K.cancel=R,K.flush=j,K.pending=B,K}function Ch(r){let t={regexp:i=>i?rs(i):null,text:i=>i};r.view.define("input",function(i,a,u,c){let{name:d,value:p,type:m="text",placeholder:w,onInit:x,onChange:S,htmlType:T="text",htmlMin:M,htmlMax:O,debounce:L}=a,A=t[m]||t.text,I=i.appendChild(document.createElement("input")),k=p?r.query(p,u,c):c[d];typeof k!="string"&&(k=""),I.type=T,I.value=k,I.placeholder=[w||"",A!==t.text?"("+m+")":""].filter(Boolean).join(" "),typeof M<"u"&&(I.min=M),O&&(I.max=O),I.addEventListener("input",Lr(()=>{let _=I.value.trim();k!==_&&(k=_,typeof S=="function"&&S(A(_),d,u,c))},L)),typeof x=="function"&&x(A(I.value.trim()),d,u,c)},{usage:Sh})}var Th={demo:{view:"link",data:{text:"I am link",href:"#"}},examples:[{title:"Link opened in new tab",demo:{view:"link",data:{text:"Discovery github",href:"https://github.com/discoveryjs/discovery",external:!0}}}]};function Lh(r){r.view.define("link",function(t,i,a,u){let{content:c,onClick:d}=i,{href:p,text:m,external:w}=a||{};if(typeof a=="string"&&(p=m=a),m===void 0&&p?m=p:p===void 0&&m&&(p=m),p&&(t.href=p),w&&t.setAttribute("target","_blank"),typeof d=="function"&&(t.classList.add("onclick"),t.addEventListener("click",x=>{x.preventDefault(),d(t,a,u)})),c)return r.view.render(t,c,a,u);t.textContent=m},{tag:"a",usage:Th})}function Eh(r){r.view.define("list-item",function(t,i,a,u){let{content:c="text"}=i;return r.view.render(t,c,a,u)},{tag:"li"})}var Qi=(r,t)=>({demo:{view:r,data:["one","two","three","four"]},examples:[{title:"Variations",demo:{view:"context",data:["foo","bar","baz"],content:t.map(i=>[`header{ content: 'md:${JSON.stringify('`view: \\"'+i+'\\"`')}' }`,i])}},{title:"Configure item's content",demo:[{view:r,data:["one","two","three","four"],item:['text:"<item> "',{view:"link",data:'{ href: "#" + $ }'}]}]},{title:"Configure item's config",demo:{view:r,data:["one","two","three","four"],itemConfig:{className:"special"},item:{view:"text",data:'"prefix-" + $'}}}]});function Mh(r){function t(i,a,u,c){let{item:d,itemConfig:p,limit:m,emptyText:w}=a;if(w!==!1&&w!==""&&i.setAttribute("emptyText",w||"Empty list"),!Array.isArray(u)&&u&&(u=[u]),Array.isArray(u))return r.view.renderList(i,this.composeConfig({view:"list-item",content:d},p),u,c,0,r.view.listLimit(m,25))}r.view.define("list",t,{usage:Qi}),r.view.define("inline-list",t,{usage:Qi}),r.view.define("comma-list",t,{usage:Qi}),r.view.define("ol",t,{tag:"ol",usage:Qi}),r.view.define("ul",t,{tag:"ul",usage:Qi})}var xu={demo:{view:"markdown",source:`# Markdown example

> NOTE: That's an experimental view based on [marked](https://github.com/markedjs/marked)

Markdown is good because:
* You'll get **formatted** *text* with _no tags_
* It's much simpler than \`HTML\`

\`\`\`html
<b>bold</b><i>italic</i>
\`\`\`
[Read more](https://guides.github.com/features/mastering-markdown/)`},examples:[{title:"Inline config",demo:'markdown{ source: "**Hello** `world`!" }'},{title:"Shorthand syntax",beforeDemo:['md:"You can use `md` as an alias for `markdown` with a string as data. That\'s a **shortest** definition for a marked text"'],demo:'md:"**Hello** `world`!"'},{title:"Array of strings as a source",beforeDemo:['md:"Array of strings might be passed as a value for `source` property which is useful for a long sources\\n> NOTE: This doesn\'t work a source passed via data"'],demo:{view:"markdown",source:["Array","of","`strings`"]}},{title:"Interpolation",beforeDemo:['md:"Interpolation can be used almost anywhere in a markdown to embed the result of a jora query into resulting HTML. Just place a jora query between `{{`{{`}}` and `{{`}`+`}`}}`:"'],demo:{view:"md",source:["Simple evaluation: 2 + 2 = `{{ 2 + 2 }}`","","Markdown view has {{ viewDef.examples.size() }} examples"]}},{title:"Disable anchors for headers",beforeDemo:"Hover a header to see a chain icon on the left side of header when anchors are enabled:",demo:[{view:"markdown",source:"## header with default settings"},{view:"markdown",anchors:!1,source:"## header with disabled anchor"}]},{title:"Showcase",demo:{view:"markdown",source:`
# Header
## Header
### Header
#### Header
##### Header
* One
* Two
    * Three

4. Four
5. Five
    6. Six
- [{{ true }}] Task 1
- [x] Task 2

Interpolation in text: 2 + 2 = \`{{ 2 + 2 }}\`, or in attribute: [link](#dummy-link/{{"exam" + "ple"}} "{{ "example" + " title" }}")

Paragraph **bold** __bold__ *italic* _italic_ ~line-through~ \`code\` [link](#href)

>Blockquote
> > Line 2

\`\`\`js
var some = "code";
\`\`\`

foo | bar
----|-----
1 | A
2 | C
3 | E
`.trim().split(/\n/)}}]};var ku=class extends Ue.Renderer{heading(t,i,a,u){let{discovery:c,anchors:d}=this.options,p="";if(d){let m=u.slug(a),w=c.encodePageHash(c.pageId,c.pageRef,{...c.pageParams,"!anchor":m});p=`<a class="view-header__anchor" id="!anchor:${Lt(m)}" href="${w}"></a>`}return`<h${i} class="view-header view-h${i}">${p}${t}</h${i}>
`}link(t,i,a){if(t===null)return a;let u='<a class="view-link" href="'+Lt(t)+'"';return i&&(u+=' title="'+Lt(i)+'"'),t.startsWith("#")||(u+=' target="_blank"'),u+=">"+a+"</a>",u}checkbox(t){return'<label class="view-checkbox"><input type="checkbox" disabled'+(t?" checked":"")+"/></label> "}list(t,i,a){let u=i?"ol":"ul",c=i&&a!==1?` start="${a}"`:"";return`<${u} class="view-${u}"${c}>
`+t+`
</${u}>
`}listitem(t){return'<li class="view-list-item">'+t+`</li>
`}table(t,i){return`<table class="view-table">
<thead>
`+t.replace(/ class="view-table-row"/g,"")+`</thead>
`+(i?"<tbody>"+i+"</tbody>":"")+`</table>
`}tablerow(t){return`<tr class="view-table-row">
`+t+`</tr>
`}tablecell(t,i){let a=i.header?"th":"td";return`<${a} class="view-table-cell"${i.align?` align="${i.align}"`:""}>`+t+`</${a}>
`}};Ue.setOptions({smartLists:!0,langPrefix:"discovery-markdown-",renderer:new ku});function Oh(r){let t={discovery:r,highlight(c,d,p){let m=document.createDocumentFragment();r.view.render(m,"source",{syntax:d,content:c}).then(()=>p(null,m.firstChild.outerHTML))}};function i(c,d){return c.replace(/{{(\d+)}}/gs,(p,m)=>d[m])}function a(c,d){for(let p of c.childNodes)switch(p.nodeType){case document.ELEMENT_NODE:if(!p.classList.contains("view-source")){a(p,d);for(let m of p.attributes)m.nodeValue=i(m.nodeValue,d)}break;case document.TEXT_NODE:p.nodeValue=i(p.nodeValue,d);break}}function u(c,d,p,m){let{source:w,anchors:x=!0}=d,S=new Map,T=typeof p=="string"?p:w||"";return Array.isArray(T)&&(T=T.join(`
`)),T=T.replace(/{{(.+?)}}/gs,(M,O)=>(O=O.trim(),S.has(O)||S.set(O,S.size),`{{${S.get(O)}}}`)),c.classList.add("view-markdown"),new Promise(M=>{Ue(T,{...t,anchors:x},(O,L)=>{if(c.innerHTML=L.replace(/\n(<\/code>)/g,"$1"),S.size>0){let A=new Array(S.size);for(let[I,k]of S.entries())try{A[k]=r.query(I,p,m)}catch(_){console.error("Interpolation query error: "+_.message)}a(c,A)}M()})})}r.view.define("markdown",u,{usage:xu}),r.view.define("md",u,{usage:xu})}var i1=new Function("return (value) => alert(`Changed to ${value.text}!`)")(),Ah={demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]},examples:[{title:"With limit",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}],limit:2}},{title:"With custom item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}],item:"h1:text"}},{title:"On chage handler",demo:{view:"menu",onChange:i1,data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]}}]};function Nh(r){r.view.define("menu",function(t,i,a,u){let{name:c="filter",item:d,itemConfig:p,limit:m,emptyText:w,onClick:x,onInit:S,onChange:T}=i;if(w!==!1&&w!==""&&t.setAttribute("emptyText",w||"No items"),Array.isArray(a)){let M=this.composeConfig({view:"menu-item",content:d,onClick:typeof x=="function"?x:typeof T=="function"?O=>T(O,c):void 0},p);return r.view.renderList(t,M,a,u,0,r.view.listLimit(m,25)).then(()=>{typeof S=="function"&&S(r.query(".[selected].pick()",a,u),c)})}},{usage:Ah})}var Dh={demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#"},{text:"three",href:"#"}]},examples:[{title:"Preselected item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#",selected:!0},{text:"three",href:"#"}]}},{title:"Disabled item",demo:{view:"menu",data:[{text:"one",href:"#"},{text:"two",href:"#",disabled:!0},{text:"three",href:"#"}]}},{title:"External links",demo:{view:"menu",data:[{text:"one",external:!0,href:"https://github.com/discoveryjs/discovery"},{text:"two",external:!0,href:"https://github.com/discoveryjs/discovery"},{text:"three",external:!0,href:"https://github.com/discoveryjs/discovery"}]}}]};function Ph(r){r.view.define("menu-item",function(t,i,a,u){let{content:c,onClick:d}=i,{text:p,selected:m=!1,disabled:w=!1,href:x,external:S}=a||{};if(w?t.classList.add("disabled"):typeof d=="function"?(t.addEventListener("click",()=>d(a,u)),t.classList.add("onclick")):x&&(t.href=x,t.target=S?"_blank":""),m&&t.classList.add("selected"),c)return r.view.render(t,c,a,u);t.textContent=typeof a=="string"?a:p||"Untitled item"},{tag:"a",usage:Dh})}var o1=()=>alert("changed!"),Ih={demo:{view:"nav-button",data:{text:"I am nav button"}},examples:[{title:"With href",demo:{view:"nav-button",data:{text:"I am nav button",href:"#"}}},{title:"External link",demo:{view:"nav-button",data:{text:"I am nav button",external:!0,href:"https://github.com/discoveryjs/discovery"}}},{title:"On click handler",demo:{view:"nav-button",data:{text:"I am nav button"},onClick:o1}}]};function _h(r){r.view.define("nav-button",function(t,i,a,u){let{name:c,content:d,disabled:p=!1,onClick:m}=i,{text:w="",href:x,external:S}=a||{};if(c&&(t.dataset.name=c),r.query(p,a,u)?t.classList.add("disabled"):typeof m=="function"?(t.addEventListener("click",()=>m(t,a,u)),t.classList.add("onclick")):x&&(t.href=x,t.target=S?"_blank":""),d)return r.view.render(t,d,a,u);t.textContent=w},{tag:"a",usage:Ih})}var Rh=r=>({beforeDemo:['md:"A special view to be used as the first view in the body of the page. This view stays in place as the page scrolls (although it may move slightly to the top of the page at the start of the scroll), so that the most relevant information and important action elements can remain accessible despite page scrolling."'],demoFixed:100,demo:`${r}:"That's a \\"${r}\\""`,examples:[{title:"Prelude",demoFixed:150,highlightProps:["prelude"],demo:{view:r,prelude:['badge:{ text: "demo" }','badge:{ text: "demo", prefix: "prelude", postfix: "postfix" }'],content:'h1:"Header"'}}]});function zh(r){r.view.define("page-header",function(i,a,u,c){let{prelude:d,content:p,onInit:m,onChange:w}=a,x=i.appendChild(U("div","view-page-header__prelude")),S=i.appendChild(U("div","view-page-header__content")),T=M=>typeof m!="function"&&typeof w!="function"?M:this.composeConfig(M,{onInit:m,onChange:w});return Promise.all([r.view.render(x,T(d||[]),u,c),r.view.render(S,T(p||"text"),u,c)])},{usage:Rh})}var Su={};Ye(Su,{pointerXY:()=>Wr});var jh=new wn({x:0,y:0},(r,t)=>r.x!==t.x||r.y!==t.y);document.addEventListener("pointermove",({x:r,y:t})=>jh.set({x:r,y:t}),Wn);var Wr=jh.readonly;var qn=[],Fh=[!1,"popup-hover","trigger-click"],s1={position:"trigger",hoverTriggers:null,hoverPin:!1,hideIfEventOutside:!0,hideOnResize:!0,render:void 0};function Cu(r,t){return r.el.contains(t)?r:r.relatedPopups.reduce((i,a)=>i||Cu(a,t),null)}function Hh(r){return r?r.getRootNode({composed:!0})===document:!0}function da(r){qn.slice().forEach(t=>t.hideIfEventOutside(r))}function a1(){qn.slice().forEach(r=>r.hideIfTriggerElementNotInDocument())}function Bh(r){qn.slice().forEach(t=>t.hideOnResize(r))}function Wh(r){let t=[],i=new Set,a=null,u=null,c=()=>{a===null&&(a=[r.addHostElEventListener("mouseenter",({target:d})=>{if(d!==document)for(let p of t){let m=Cu(p,d),w=m?m.el:d.closest(p.options.hoverTriggers);w&&(p.hideTimer=clearTimeout(p.hideTimer),w!==p.lastHoverTriggerEl&&((!m||!m.hoverPinned)&&(p.lastHoverTriggerEl=w),m||(p.hoverPinned=!1,p.el.classList.remove("pinned"),p.show(w))))}},Wn),r.addHostElEventListener("mouseleave",({target:d})=>{for(let p of t)p.lastHoverTriggerEl===d&&(p.lastHoverTriggerEl=null,p.hideTimer=setTimeout(p.hide,100))},Wn),r.addGlobalEventListener("scroll",d=>{u=setTimeout(()=>da(d),0)},!0),r.addHostElEventListener("scroll",d=>{clearTimeout(u),da(d)}),r.addGlobalEventListener("click",d=>{u=setTimeout(()=>da(d),0)},!0),r.addHostElEventListener("click",d=>{clearTimeout(u),da(d),setTimeout(a1,50);for(let p of t)p.options.hoverPin==="trigger-click"&&p.lastHoverTriggerEl&&p.lastTriggerEl.contains(d.target)&&(p.lastHoverTriggerEl=null,p.hoverPinned=!0,p.el.classList.add("pinned"),d.stopPropagation())},!0)])};Wr.subscribe(()=>{for(let d of qn)d.options.position==="pointer"&&!d.hoverPinned&&!d.frozen&&d.updatePosition()}),r.inspectMode.subscribe(d=>d?qn.forEach(p=>i.add(p)):i.clear()),r.view.Popup=class{constructor(p){this.options={...s1,...p},this.el=document.createElement("div"),this.el.classList.add("discovery-view-popup"),this.hide=this.hide.bind(this),this.hideTimer=null,this.lastTriggerEl=null,this.lastHoverTriggerEl=null,this.hoverPinned=!1,this.frozen=!1,this.options.className&&this.el.classList.add(this.options.className),Fh.includes(this.options.hoverPin)||(console.warn(`Bad value for \`Popup#options.hoverPin\` (should be ${Fh.join(", ")}):`,this.options.hoverPin),this.options.hoverPin=!1),this.options.hoverTriggers&&(this.el.classList.add("show-on-hover"),this.el.dataset.pinMode=this.options.hoverPin||"none",t.push(this),c())}get relatedPopups(){return qn.filter(p=>this.el.contains(p.lastTriggerEl))}get visible(){return qn.includes(this)}toggle(...p){this.visible?this.hide():this.show(...p)}show(p,m=this.options.render){let w=r.dom.container;this.hideTimer=clearTimeout(this.hideTimer),this.relatedPopups.forEach(x=>x.hide()),this.el.classList.toggle("inspect",r.inspectMode.value),typeof m=="function"&&(this.el.innerHTML="",m(this.el,p,this.hide)),this.lastTriggerEl&&this.lastTriggerEl.classList.remove("discovery-view-popup-active"),p&&p.classList.add("discovery-view-popup-active"),this.lastTriggerEl=p||null,this.visible||(qn.push(this),qn.length===1&&window.addEventListener("resize",Bh)),this.updatePosition(),w.appendChild(this.el)}updatePosition(){if(!this.visible||this.options.position!=="pointer"&&!this.lastTriggerEl)return;let p=r.dom.container,m=Zo(p.firstChild),w=pu(window,m),{x,y:S}=Wr.value,T=3,M=this.options.position!=="pointer"?gr(this.lastTriggerEl,p):{left:parseInt(x)+T,right:parseInt(x)-T,top:parseInt(S)-T,bottom:parseInt(S)+T},O=M.top-w.top-3,L=w.bottom-M.bottom-3,A=M.right-w.left-3,I=w.right-M.left-3;O>L?(this.el.style.maxHeight=O+"px",this.el.style.top="auto",this.el.style.bottom=w.bottom-M.top+"px",this.el.dataset.vTo="top"):(this.el.style.maxHeight=L+"px",this.el.style.top=M.bottom-w.top+"px",this.el.style.bottom="auto",this.el.dataset.vTo="bottom"),A>I?(this.el.style.left="auto",this.el.style.right=w.right-M.right+"px",this.el.style.maxWidth=A+"px",this.el.dataset.hTo="left"):(this.el.style.left=M.left-w.left+"px",this.el.style.right="auto",this.el.style.maxWidth=I+"px",this.el.dataset.hTo="right"),this.relatedPopups.forEach(k=>k.updatePosition())}freeze(){this.frozen=!0,this.el.classList.add("frozen")}unfreeze(){this.frozen=!1,this.el.classList.remove("frozen"),this.updatePosition()}hide(){this.hideTimer=clearTimeout(this.hideTimer),this.visible&&!i.has(this)&&(this.relatedPopups.forEach(p=>p.hide()),qn.splice(qn.indexOf(this),1),this.el.remove(),this.unfreeze(),this.lastTriggerEl&&(this.lastTriggerEl.classList.remove("discovery-view-popup-active"),this.lastTriggerEl=null),qn.length===0&&window.removeEventListener("resize",Bh))}hideIfEventOutside({target:p}){!this.options.hideIfEventOutside||i.has(this)||this.lastTriggerEl&&this.lastTriggerEl.contains(p)||Cu(this,p)||this.hide()}hideIfTriggerElementNotInDocument(){(!Hh(this.lastHoverTriggerEl)||!Hh(this.lastTriggerEl))&&this.hide()}hideOnResize(){!this.options.hideOnResize||i.has(this)||this.hide()}destroy(){i.delete(this);let p=t.indexOf(this);p!==-1&&t.splice(p,1),this.hide(),this.el=null,this.lastTriggerEl=null,this.lastHoverTriggerEl=null}}}var $h={demo:{view:"progress",progress:.5,content:'text:"Loading..."'},examples:[{title:"With no label (content)",demo:{view:"progress",progress:.25}},{title:"Custom color",demo:{view:"progress",progress:.85,color:"#bdab77",content:'text:"Yellow progress"'}}]};function qh(r){r.view.define("progress",function(t,i,a,u){let{content:c,progress:d,color:p}=i,m=t.appendChild(U("div",{class:"progress",style:`--progress: ${Math.max(0,Math.min(1,Number(d)))};--color: ${p||"unset"};`}));if(c){let w=t.insertBefore(U("div",{class:"content"}),m);return r.view.render(w,c,a,u)}},{usage:$h})}var Vh={demo:{view:"section",header:'text:"I am section"',content:['text:"content"']}};function Uh(r){r.view.define("section",function(t,i,a,u){let{header:c,content:d}=i;return r.view.render(t,[{view:"header",content:c},d],a,u)},{usage:Vh})}var l1=new Function("return (value) => alert(`Changed to ${value}!`)")(),Gh={demo:{view:"select",data:["one","two","three","four"]},examples:[{title:"Select with value",demo:{view:"select",value:'"three"',data:["one","two","three","four"]}},{title:"Select with reset option",demo:{view:"select",resetItem:!0,value:'"three"',data:["one","two","three","four"]}},{title:"Select with placeholder",demo:{view:"select",placeholder:"placeholder",data:["one","two","three","four"]}},{title:"Select with onChange",demo:{view:"select",onChange:l1,data:["one","two","three","four"]}},{title:"Select with custom options",demo:{view:"select",item:"h1:text",data:["one","two","three","four"]}}]};function Yh(r){let t="text-match:{ text, match: #.filter }",i="{ value: $, text: #.selectVariantTextQuery.query($, #) }",a=new r.view.Popup({className:"view-select-popup"});r.view.define("select",function(u,c,d,p){function m(){if(u.innerHTML="",j!==void 0)return r.view.render(u,r.view.composeConfig({view:"menu-item",data:i,content:A},I),j,B)}let{name:w,value:x,text:S="$",placeholder:T,limit:M,minItemsFilter:O=10,resetItem:L=!1,item:A=t,itemConfig:I,beforeItems:k,afterItems:_,onInit:P,onChange:R}=c,j=x?r.query(x,d,p):p[w],B={...p,selectMinItemsFilter:O,selectCurrentValue:j,selectVariantTextQuery:S,selectResetItem:L?[{value:void 0,text:"",...L,resetItem:!0}]:[]},K=[];return k&&K.push(r.view.composeConfig(k,{onInit:P,onChange:R})),K.push({view:"context",data:`.(${i})`,modifiers:{view:"input",when:"size() >= #.selectMinItemsFilter",type:"regexp",name:"filter",className:"view-select__filter",placeholder:"Filter"},content:{view:"menu",className:"view-select__variants",data:"#.selectResetItem + .[no #.filter or text~=#.filter]",limit:M,itemConfig:r.view.composeConfig({className:[H=>H.resetItem?"reset-item":"",H=>H.value===j?"selected":""]},I),item:A,onClick(H){a.hide(),j!==H.value&&(j=H.value,B={...B,selectCurrentValue:j},m(),typeof R=="function"&&R(H.value,w,H,p))}}}),_&&K.push(r.view.composeConfig(_,{onInit:P,onChange:R})),T&&(u.dataset.placeholder=T),u.tabIndex=0,u.addEventListener("click",()=>{a.toggle(u,H=>r.view.render(H,K,d,B).then(()=>(H.querySelector(".view-select__filter input")||{focus(){}}).focus()))}),typeof P=="function"&&P(j,w,d,p),m()},{usage:Gh})}function Tu(r,t,i){for(let a in r){if(!hasOwnProperty.call(r,a))continue;if(!t){i.properties=null;break}let u;i.dictMode?(u=i.dictMode,u.count++,u.keys.add(a)):i.properties.has(a)?(u=i.properties.get(a),u.count++):(u={count:1,map:Object.create(null)},i.properties.set(a,u)),is(r[a],t-1,u.map)}}function is(r,t,i=Object.create(null)){let a=r===null?"null":Array.isArray(r)?"array":typeof r;switch(a){default:a in i||(i[a]=new Map),i[a].set(r,(i[a].get(r)||0)+1);break;case"object":"object"in i||(i.object=new Map,i.object.count=0,i.object.properties=new Map,i.object.dictMode=null,i.object.sortKeys=!1),i.object.count++,i.object.has(r)?i.object.set(r,i.object.get(r)+1):(i.object.set(r,1),Tu(r,t,i.object));break;case"array":"array"in i||(i.array=new Map,i.array.count=0,i.array.map=Object.create(null)),i.array.count++,i.array.set(r,(i.array.get(r)||0)+1);for(let u=0;u<r.length;u++)is(r[u],t,i.array.map);break}return i}var pa=["rgba(83,211,75,0.75)","rgba(241,235,44,0.75)","rgba(244,152,99,0.75)","rgba(148,99,244,0.75)","rgba(44,132,241,0.75)","rgba(233,117,117,0.75)","rgba(85,187,155,0.75)","rgba(151,147,99,0.75)","rgba(216,107,196,0.75)","rgba(108,204,227,0.75)","rgba(164,164,164,0.75)"],os=["null","undefined","string","number","bigint","boolean","symbol","function","array","object"];function ss(r,t,i,a=[],u=""){Object.keys(t).sort((c,d)=>os.indexOf(c)-os.indexOf(d)).forEach((c,d)=>{switch(d>0&&r.appendChild(xn(" | ")),c){default:{let p=r.appendChild(U("span","type",c));i.set(p,{type:"type",path:a,stat:t,name:c});break}case"object":{let p=t[c],{properties:m,dictMode:w,sortKeys:x}=p;if(m===null){i.set(r.appendChild(U("span","expand","{\u2026}")),{type:"expand",path:a,map:t[c],offset:u});break}if(m.size===0){r.appendChild(U("span","object","{}"));break}let S=p.size,T=w?[["[key]",w]]:[...m.entries()],M=u+"    ",O=r.appendChild(U("span","object",["{",U("span",{"data-action":"collapse"})]));m.size>1&&(O.appendChild(U("span",{title:"Toggle dictionary mode (collapse all the values in a single signature)","data-action":"dict-mode","data-enabled":w!==null})),T.some(([L],A)=>A!==0&&L<T[A-1][0])&&O.appendChild(U("span",{title:"Toggle keys sorting","data-action":"sort-keys","data-enabled":x}))),i.set(O,{type:"shape",path:a,map:t[c],offset:u}),S>1&&(O.appendChild(U("span","count")).dataset.value=String(S)),x&&T.sort(([L],[A])=>L<A?-1:L>A?1:0);for(let[L,{count:A,map:I}]of T){let k=U("span","property",[L]);i.set(k,{type:"property",path:a,stat:t,name:L,map:I}),O.appendChild(xn(`
${M}`)),O.appendChild(k),A!==S&&w===null&&k.appendChild(U("span","optional","?")),O.appendChild(xn(": ")),ss(O,I,i,a.concat(w?"*":L),M),O.appendChild(xn(";"))}O.lastChild.nodeValue===";"&&O.appendChild(xn(`
${u}`)),O.appendChild(xn("}"));break}case"array":r.appendChild(xn("[")),ss(r,t[c].map,i,a,u),r.appendChild(xn("]"));break}})}function Zi(r,t){return r.toFixed(t).replace(/\.?0+$/,"")}function Kh(r){let t=Math.cos(2*Math.PI*r),i=Math.sin(2*Math.PI*r);return[t,i]}function Jh(r){let t=0;return['<svg viewBox="-1 -1 2 2" class="pie">',...r.map(i=>{let[a,u]=Kh(t),[c,d]=Kh(t+=i.percent),p=i.percent>.5?1:0;return`<path d="${[`M ${a} ${u}`,`A 1 1 0 ${p} 1 ${c} ${d}`,"L 0 0"].join(" ")}" fill="${i.color}"/>`}),"</svg>"].join(`
`)}function u1(r){let t=0;for(let i in r)r[i].forEach(a=>t+=a);return t}function c1(r){let t=Object.create(null);for(let i in r)t[i]=0,r[i].forEach(a=>t[i]+=a);return t}function Qh(r,t,i){let{count:a,map:u}=t.stat.object.dictMode||t.stat.object.properties.get(t.name),c=(t.stat.object.dictMode||t.stat.object).count,d={name:t.name,path:t.path,total:c,count:a,percent:Zi(100*a/c,1)+"%"};i.view.render(r,[{view:"block",when:"path",className:"path",data:p=>i.pathToQuery(p.path),content:"text:$"},{view:"h1",className:"property",content:["text:name",{view:"html",when:"count != total",data:`"<span class=\\"usage-stat optional\\">" + (
                        "(in <span class=\\"num\\">" + count + "</span> of <span class=\\"num\\">" + total + "</span> objects, <span class=\\"num\\">" + percent + "</span>)"
                    ) + "</span>"`}]}],d),Zh(r,{map:u,count:a},i)}function Zh(r,{map:t,count:i},a){let u=c1(t),c=[],d=os.filter(p=>p in t);Object.entries(u).sort(([,p],[,m])=>p-m).reverse().forEach(([p,m],w)=>{c.push({name:Lt(p),count:m,percent:m/i,percent100:Zi(100*m/i,1),color:pa[w]})}),a.view.render(r,{view:"block",when:"typeStat.size() > 1",data:"typeStat",className:"pie-stat",content:[{view:"block",content:{view:"html",data:Jh}},{view:"block",content:['html:"<span class=\\"list-header\\">Types usage:</span>"',{view:"list",item:`html:
                            "<span class=\\"dot\\" style=\\"--size: 10px; background-color: " + color + "\\"></span> " +
                            "<span class=\\"caption\\">" + name + "</span>" +
                            "<span class=\\"times\\"> \xD7 " + count + " (" + percent100 + "%)</span>"
                        `}]}]},c),d.forEach(p=>Lu(r,{name:p,stat:t},a))}function Lu(r,t,i){let a=t.stat[t.name],u=u1(t.stat),c=[],d;switch(t.name){case"number":{let p=[],m=0,w=0,x=0,S=1/0,T=-1/0;a.forEach((M,O)=>{p.push({count:M,value:O}),m+=O*M,w+=M,M>1&&x++,O<S&&(S=O),O>T&&(T=O)}),d={type:t.name,count:w,distinct:a.size,duplicated:x,min:S,max:T,sum:m,avg:Zi(m/w,3),values:p.sort((M,O)=>O.count-M.count||M.value-O.value)},d.distinct>1&&c.push({view:"block",className:"overview-stat",content:`html:
                        "range: (min) <span class=\\"num\\">" + min + "</span> ... " +
                        "<span class=\\"num\\">" + max + "</span> (max), " +
                        "avg: <span class=\\"num\\">" + avg + "</span>"
                    `});break}default:{let p=[],m=0,w=0;a.forEach((x,S)=>{p.push({count:x,value:S}),m+=x,x>1&&w++}),d={type:t.name,count:m,distinct:a.size,duplicated:w,values:t.name==="object"||t.name==="array"?p.sort((x,S)=>S.count-x.count):p.sort((x,S)=>S.count-x.count||x.value>S.value||-(x.value<S.value))};break}}if(t.name!=="undefined"&&t.name!=="null"){if(c.unshift({view:"block",className:"overview-stat",content:['html:"<span class=\\"num\\">" + count + "</span> " + (count > 1 ? "values, " : "value")',{view:"switch",when:"count > 1",content:[{when:"distinct = 1",content:'text:"a single unique value:"'},{when:"distinct = count",content:'text:"all unique, no duplicates"'},{content:['html:"<span class=\\"num\\">" + distinct + "</span> unique, "','html:duplicated = distinct ? "all occur more than once" : "<span class=\\"num\\">" + duplicated + "</span> occur more than once"']}]}]}),d.values.length>1&&d.duplicated&&t.name!=="object"&&t.name!=="array"){let p=[],m=d.values.length===10?10:Math.min(9,d.values.length),w=0;for(let x=0;x<m;x++){let{count:S,value:T}=d.values[x];w+=S,p.push({name:Lt(String(T)),count:S,percent:S/d.count,percent100:Zi(100*S/d.count,1),color:pa[x]})}if(p.length){let x=d.count-w;x>0&&p.push({name:"...",count:x,percent:x/d.count,percent100:Zi(100*x/d.count,1),color:pa[p.length]}),c.push({view:"block",className:"pie-stat",data:p,content:[{view:"block",content:{view:"html",data:Jh}},{view:"block",content:['html:"<span class=\\"list-header\\">Dominators:</span>"',{view:"list",item:`html:
                                        "<span class=\\"dot\\" style=\\"--size: 10px; background-color: " + color + "\\"></span> " +
                                        "<span class=\\"caption\\" title=\\"" + name + "\\">" + name + "</span>" +
                                        "<span class=\\"times\\"> \xD7 " + count + " (" + percent100 + "%)</span>"
                                    `}]}]})}}d.values.length>1?(t.name==="number"||t.name==="string")&&c.push({view:"content-filter",name:"filter",content:{view:"menu",data:"values.[no #.filter or value~=#.filter].sort(<value>)",item:[{view:"block",className:"caption",content:"text-match:{ text: value, match: #.filter }"},{view:"block",when:"count > 1",className:"count",content:'text:" \xD7 " + count'}]}}):(t.name==="number"||t.name==="string"||t.name==="boolean")&&c.push({view:"struct",data:"values.pick().value"}),t.name==="object"&&c.push({view:"list",className:"struct-list",data:"values",item:["struct:value",{view:"block",when:"count > 1",className:"count",content:'text:" \xD7 " + count'}]}),t.name==="array"&&Object.keys(a.map).length&&c.push({view:"block",className:"array-types",content:p=>Zh(p,a,i)})}i.view.render(r,[{view:"block",when:"path",className:"path",data:p=>i.pathToQuery(p.path),content:"text"},{view:"h1",className:"type",content:["text:name",`html:"<span class=\\"usage-stat\\">" + (
                    count = total
                        ? "only this type is used"
                        : "used in <span class=\\"num\\">" + count + "</span> of <span class=\\"num\\">" + total + "</span> cases (<span class=\\"num\\">" + percent + "</span>)"
                ) + "</span>"`]},...c],{...d,name:t.name,path:t.path,total:u,percent:Zi(100*d.count/u,1)+"%"},{})}var Xh={beforeDemo:['md:"The `signature` view is used to output a type definition for current data using TypeScript like style:"'],demo:{view:"signature",expanded:!0}};function Eu(r){let t=new WeakMap,i=({target:a})=>{let u="expand",c=a.closest(`
            .view-signature .expand,
            .view-signature [data-action]
        `);if(!c)return;c.dataset.action&&(u=c.dataset.action,c=c.parentNode);let d=t.get(c);if(d){let{path:p,map:m,offset:w}=d,x=document.createDocumentFragment();switch(u){case"sort-keys":m.sortKeys=!m.sortKeys;break;case"dict-mode":if(m.dictMode)m.dictMode=null;else{let S=m.dictMode={keys:new Set,count:0,map:Object.create(null)};m.forEach((T,M)=>{for(let O in M)hasOwnProperty.call(M,O)&&(S.keys.add(O),S.count++,is(M[O],1,S.map))})}break;default:m.properties===null?(m.properties=new Map,m.forEach((S,T)=>Tu(T,1,m))):m.properties=null}ss(x,{object:m},t,p,w),c.replaceWith(x)}};r.addHostElEventListener("click",i,!1),new r.view.Popup({className:"signature-details",hoverPin:"trigger-click",hoverTriggers:`
            .view-signature .property,
            .view-signature .type
        `,render:function(a,u){let c=t.get(u);switch(c.type){case"property":return Qh(a,c,r);case"type":return Lu(a,c,r)}}}),r.view.define("signature",function(a,u,c){let{expanded:d,path:p}=u,m=is(c,d),w=Array.isArray(p)?p:void 0;ss(a,m,t,w)},{usage:Xh})}var Ig=Bn(Tg(),1),Vn=Bn(Tr(),1),$C=Bn(fu(),1),qC=Bn(Mg(),1),VC=Bn(Ng(),1);var Pu={};Ye(Pu,{equal:()=>as});var{hasOwnProperty:va}=Object;function as(r,t){if(r===t)return!0;for(let i in r)if(va.call(r,i)&&(!va.call(t,i)||r[i]!==t[i]))return!1;for(let i in t)if(va.call(t,i)&&(!va.call(r,i)||r[i]!==t[i]))return!1;return!0}var ls='let name = "world";\n\nconsole.log(`Hello, ${name}!`);',Dg={demo:{view:"source",data:{syntax:"js",content:ls}},examples:[{title:"Supported syntaxes",beforeDemo:['md:"Following values (for both `name` and `mime`) are supported for `syntax` option:"',{view:"table",data:"#.options.syntaxes",cols:{name:{content:"comma-list:name"},mime:{content:"comma-list:mime"}}},"md:\"More syntaxes may be added via `import 'codemirror/mode/[name]/[name]';`\""],source:!1},{title:"Highlight ranges",demo:{view:"source",data:{syntax:"js",content:ls,refs:[{range:[4,8]},{range:[21,28],type:"link",href:"#example",tooltip:{position:"trigger",content:['text:"Link to "',"text:href"]}}]}}},{title:"Custom line numbers",demo:{view:"source",data:{content:ls,syntax:"js",lineNum:r=>r+5}}},{title:"Without line numbers",demo:{view:"source",data:{content:ls,syntax:"js",lineNum:!1}}},{title:"Max content size for highlight",beforeDemo:['md:"By default a syntax highlighing is not appling to a source which is bigger than 250Kb. Option `maxSourceSizeToHighlight` is using to change max size of source to be highlighted."'],demo:{view:"source",data:{content:ls,syntax:"js",maxSourceSizeToHighlight:4}}}]};var k1=250*1024;Vn.default.modeToMime={js:"application/javascript",ts:"application/typescript",typescript:"application/typescript",json:"application/json",html:"text/html",css:"text/css",scss:"text/x-scss",less:"text/x-less"};function S1(){let r=new Set,t=new Map,i=a=>{let u=Vn.default.resolveMode(a),c=[...t.keys()].find(d=>as(d,u));return c||(t.set(u,{name:new Set,mime:new Set}),u)};for(let[a,u]of Object.entries(Vn.default.modeToMime)){let c=t.get(i(u));c.mime.add(u),c.name.add(a),r.add(a)}for(let[a,u]of Object.entries(Vn.default.mimeModes)){let c=t.get(i(a));c.mime.add(a),typeof u=="string"&&(c.name.add(u),r.add(u))}for(let[a]of Object.entries(Vn.default.modes))if(!r.has(a)){let u=Vn.default.modes[a];t.has(u)||t.set(u,{name:new Set,mime:[]}),t.get(u).name.add(a)}return[...t.values()].map(a=>({name:[...a.name],mime:[...a.mime]}))}function C1(r,t){let i=Vn.default.getMode(Vn.default.defaults,{name:Vn.default.modeToMime[r]||r,isDiscoveryViewDefined:a=>t.view.isDefined(a)});return(a,u)=>{let c=Vn.default.startState(i),d=a.split(/(\n|\r\n?)/),p=0;for(let m=0;m<d.length;m++){if(m%2===0){let w=new Vn.default.StringStream(d[m],4,{lookAhead:x=>d[m+x],baseToken:function(){}});for(;!w.eol();){let x=i.token(w,c);x&&u(p+w.start,p+w.pos,x),w.start=w.pos}}p+=d[m].length}}}function T1(r,t){let i=r&&r.className,a=[t,Array.isArray(i)?i.join(" "):typeof i=="string"?i:!1].filter(Boolean).join(" ");return a?` class="${a}"`:""}function Pg(r){return`${T1(r,"spotlight")}${r.marker?` data-marker="${r.marker}"`:""}${typeof r.tooltipId=="number"?` data-tooltip-id="${r.tooltipId}"`:""}`}var L1={html:{open({data:r}){switch(r.type){case"link":return`<a href="${r.href}"${Pg(r)}>`;case"spotlight":return`<span${Pg(r)}>`}},close({data:r}){switch(r.type){case"link":return"</a>";case"spotlight":return"</span>"}}}};function _g(r){r.view.define("source",function(t,i,a,u){let c=new Map,d=[],{mime:p,binary:m,size:w,maxSourceSizeToHighlight:x=k1,syntax:S,lineNum:T=!0,content:M,refs:O}=a;if(typeof M=="string")if(M.length<x&&d.push([C1(S||p,r),{html:{open({data:L}){return'<span class="token '+L+'">'},close(){return"</span>"}}}]),Array.isArray(O)&&d.push([(L,A)=>O.forEach(I=>{if(I.range){let k;I.tooltip&&c.set(k=c.size,I),A(I.range[0],I.range[1],{type:"spotlight",...I,tooltipId:k})}}),L1]),m)t.innerHTML="Binary content"+(typeof w=="number"?" ("+w+" bytes)":"");else{let L=typeof T=="function"?T:I=>I+1,A=T?'<div class="lines">'+M.split(/\r\n?|\n/g).map((I,k)=>"<span>"+L(k)+"</span>").join("")+"</div>":"";t.innerHTML=A+"<div>"+(0,Ig.default)(d,"html")(M)+"</div>";for(let I of t.querySelectorAll(":scope [data-tooltip-id]")){let k=c.get(Number(I.dataset.tooltipId));delete I.dataset.tooltipId,this.tooltip(I,k.tooltip,k,u)}}},{usage:Dg,get syntaxes(){return S1()}})}var ju={};Ye(ju,{jsonStringifyAsJavaScript:()=>$r,jsonStringifyInfo:()=>ya});var Xg=Bn(Qg(),1),{stringifyInfo:ya}=Xg.default;function n0(r,t,i){let a=String(r),[u,c]=a.match(/^(?:\S+\s+)?(\S+)\(/)||[];if(u!=="function"&&u!=="function*"&&c===i.trim().slice(0,-1)&&(i=""),a.indexOf(`
`)===-1)return i+a;let d=a.split(/\n/),p=d[d.length-1].match(/^\s*/)[0].length,m=new RegExp("^\\s{0,"+p+"}");return i+d.map((w,x)=>x&&w.length?w.replace(m,t):w).join(`
`)}function r0(r,t,i){return typeof r=="function"?n0(r,t,i):r instanceof Date?`${i}new Date("${r.toISOString()}")`:i+String(r)}var{toString:Zg}=Object.prototype,i0=new Set(["[object Function]","[object RegExp]","[object Date]"]);function $r(r,t,i=4){let a=[],u=function(c,d){return typeof d=="string"&&Zg.call(this[c])==="[object Date]"&&(d=this[c]),d!==null&&i0.has(Zg.call(d))?(a.push(d),"{{{__placeholder__}}}"):d};return String(JSON.stringify(r,t||u,i)).replace(/"((?:\\.|[^"])*)"(:?)/g,(c,d,p)=>p&&/^[a-z$_][a-z$_\d]*$/i.test(d)?d+p:`'${d.replace(/\\"/g,'"').replace(/'/g,"\\'")}'`+p).replace(/(^|\n)([ \t]*)(.*?)([a-zA-Z$_][a-zA-Z0-9$_]+:\s*)?'{{{__placeholder__}}}'/g,(c,d,p,m,w)=>d+p+m+r0(a.shift(),p,w))}var ba=U("div",{style:["position: fixed","overflow: hidden","font-size: 1px","width: 1px","height: 1px","top: 0","left: 0","white-space: pre"].join(";")},["text"]);function o0(r){document.body.append(ba);try{let t=window.getSelection(),i=document.createRange();ba.firstChild.nodeValue=r,i.selectNodeContents(ba),t.removeAllRanges(),t.addRange(i),document.execCommand("copy")}finally{ba.remove()}}async function zn(r){try{if(navigator.clipboard){let t=await navigator.permissions.query({name:"clipboard-write"});if(t.state==="granted"||t.state==="prompt")return navigator.clipboard.writeText(r)}}catch{}o0(r)}var s0=/^(?:https?:)?\/\/(?:[a-z0-9\-]+(?:\.[a-z0-9\-]+)+|\d+(?:\.\d+){3})(?:\:\d+)?(?:\/\S*?)?$/i;function mr(r,t){return`<span class="${r}">${t}</span>`}function Fu(r){return mr("more",`\u2026${$n(r)} more\u2026`)}function Xi(r,t,i){switch(typeof r){case"boolean":case"undefined":return mr("keyword",r);case"number":case"bigint":return mr("number",$n(r));case"symbol":return mr("symbol",String(r));case"function":return"\u0192n";case"string":{let a=t?i.maxCompactStringLength:i.maxStringLength;if(r.length>a+i.allowedExcessStringLength)return mr("string",Lt(JSON.stringify(r.slice(0,a)).slice(0,-1))+Fu(r.length-a)+'"');let u=JSON.stringify(r);return mr("string",!t&&(r[0]==="h"||r[0]==="/")&&s0.test(r)?`"<a href="${Lt(r)}" target="_blank">${Lt(u.slice(1,-1))}</a>"`:Lt(u))}case"object":{if(r===null)return mr("keyword","null");switch(toString.call(r)){case"[object Array]":{let d=i.limitCollapsed===!1?r.length:i.limitCollapsed,p=r.slice(0,d).map(m=>Xi(m,!0,i));return r.length>d&&p.push(`${Fu(r.length-d)} `),`[${p.join(", ")}]`}case"[object Date]":return mr("date",r);case"[object RegExp]":return mr("regexp",r)}if(t){for(let d in r)if(hasOwnProperty.call(r,d))return"{\u2026}";return"{}"}let a=i.limitCollapsed===!1?1/0:i.limitCollapsed,u=[],c=0;for(let d in r)if(hasOwnProperty.call(r,d)){if(c<a){let p=Lt(d.length>i.maxCompactPropertyLength?d.slice(0,i.maxCompactPropertyLength)+"\u2026":d);u.push(`${mr("property",p)}: ${Xi(r[d],!0,i)}`)}c++}return c>a&&u.push(Fu(c-a)),u.length?`{ ${u.join(", ")} }`:"{}"}default:return`unknown type "${typeof r}"`}}var a0=["none","default","badge"];function Hu(r){let t=Date.now()+8,i=0;for(;i<r.length&&!(Date.now()>t);i++){let{el:a,config:u,renderer:c,data:d,context:p}=r[i],{place:m="after",className:w,text:x=typeof u!="object"?String(u):"",icon:S,href:T,external:M,tooltip:O}=u,L=a0.includes(u.style)?u.style:m==="before"?"none":"default",A=x!=="",I=["value-annotation","style-"+L,m==="before"?"before":"after",A?"has-text":"",w||""].join(" "),k=U(T?"a":"span",{class:I,href:T,target:M?"_blank":void 0},A?[x]:void 0);S&&(k.classList.add("icon"),/^[a-z_$][a-z0-9_$-]*$/i.test(S)?k.classList.add("icon-"+S):k.style.setProperty("--annotation-image",`url("${S}")`)),O&&c.tooltip(k,O,d,{...p,config:u}),m==="before"?a.before(k):a.parentNode.append(k)}r.splice(0,i)}var em={level_1:{level_2:{level_3:{level_4:{}},level_3_2:2,level_3_3:3,level_3_4:4,level_3_5:5,level_3_6:6},level_2_2:2,level_2_3:3,level_2_4:4,level_2_5:5,level_2_6:6},level_1_2:2,level_1_3:3,level_1_4:4,level_1_5:5,level_1_6:6,level_1_7:7},tm={beforeDemo:['md:"View to display the structure of any value. This is the simplest yet powerful way to enable data exploration."'],demo:{view:"struct",data:{foo:"bar",baz:[1,2,3]}},examples:[{title:"Default expanded depth",highlightProps:["expanded"],beforeDemo:['md:"By default `struct` view is collapsed in one line. The `expand` option is using to specify an initial expanded depth. A value for the option can be a boolean or a positive number."'],demoData:em,demo:['badge:"Default (expanded option is not used)"',{view:"struct"},'badge:"expanded = true"',{view:"struct",expanded:!0},'badge:"expanded = 2"',{view:"struct",expanded:2}]},{title:"Annotations",highlightProps:["annotations"],beforeDemo:[{view:"md",source:["Clarity of data can be improved by adding annotations. An annotation is special marker before or after a value which displaying for expanded objects and arrays only.","Any number of annotations can be applied to a single value.","","Annotations are adding with `annotations` option which should contain an array of strings (jora queries) and functions to compute an annotation config. An annotation config is an object with following fields:","```ts","type AnnotationConfig = {",'   place?: "before" | "after"; // the placement of an annotation, "after" is by default','   style?: "none" | "badge" | "default"; // appereance of annotation, "default" is by default',"   className?: string;         // a class to add to an annotation element","   text?: any;                 // text content of an annotation element","   icon?: string;              // name of icon or url to an image","   href?: string;              // annotation is a link and that's an URL","   external?: boolean;         // open a link in new tab, make sence when `href` is specified only","   tooltip?: TooltipConfig;    // configuration for a tooltip, the same as for any view","}","```","",'An annotation is not displayed (not rendered) when computed annotation config is a falsy value. Any other value (truthy, but not an object) is used as value for `text` option, i.e. `"example"` is the same as `{ text: "example" }`.',"","In addition to a string or function, an object can be used as an element of `annotations` array","* `query` \u2013 a string (jora query) or a function to compute an annotation config","* `debug` (optional) - when truthy a debug information is output to the console; when value is a string, it's used in debug message"]}],demoData:{items:[{id:1,value:"example"},{id:2,value:"bar"},{id:3,value:"baz"}],"annotation styles":["none","default","badge"]},demo:{view:"struct",expanded:3,annotations:['#.key = "items" ? { place: "before", style: "badge", text: "view as table", tooltip: "table" } : null',`$ ~= /az/ and "Value has 'az' substring!"`,'$ in ["none", "default", "badge"] and { style: $, place: "before", text: $ + " before" }','$ in ["none", "default", "badge"] and { style: $, text: $ + " after" }']}},{title:"Limit number of elements and entries",beforeDemo:{view:"md",source:["The following options define the maximum number of elements in array or entries in object:","* `limit` (default: 50) defines max count for expanded array/object","* `limitCollapsed` (default: 4) defines max count for collapsed array/object"]},highlightProps:["limit","limitCollapsed"],demoData:em,demo:{view:"struct",limit:4,limitCollapsed:1,expanded:2}},{title:"Maximum length for strings",beforeDemo:{view:"md",source:["The following options define the maximum string length in various cases:","* `maxStringLength` (default: 150) defines max length for strings when a host object is expanded","* `maxCompactStringLength` (default: 40) defines max length for strings when a host object is collapsed",'* `allowedExcessStringLength` (default: 10) defines allowed excess in length before a string will be cut and \\"N more\\" label will be added']},highlightProps:["maxStringLength","maxCompactStringLength","allowedExcessStringLength"],demo:{view:"struct",maxStringLength:30,maxCompactStringLength:10,allowedExcessStringLength:5,expanded:1},demoData:{stringsInExpandedObject:"Quite a long string value Quite a long string value",string_34_chars:"String with 34 chars length demo x",string_35_chars:"String with 35 chars length demo xx",string_36_chars:"String with 36 chars length demo xxx",level2:{stringsInCollapsedObject:"Quite a long string value Quite a long string value",string_14_chars:"Short string x",string_15_chars:"Short string xx",string_16_chars:"Short string xxx"}}}]};var Un={get collapse(){return U("span",{class:"struct-action-button struct-collapse-value","data-action":"collapse"})},get signature(){return U("span",{class:"struct-action-button show-signature","data-action":"show-signature"})},get actions(){return U("span",{class:"struct-action-button",title:"Value actions","data-action":"value-actions"})},get stringMode(){return U("span",{class:"struct-action-button",title:"Toggle string show mode","data-action":"toggle-string-mode"})},get viewAsTable(){return U("span",{class:"struct-action-button",title:"Toggle view as table","data-action":"toggle-view-as-table"})},get sortKeys(){return U("span",{class:"struct-action-button",title:"Toggle key sorting","data-action":"toggle-sort-keys"})}},nm=fi('"',Un.collapse,Un.actions,Un.stringMode,U("span","string-length"),U("span","string-text-wrapper",[U("span","string-text")]),'"'),rm=fi("[",Un.collapse,Un.signature,Un.actions,Un.viewAsTable,U("span","value-size"),"]"),im=fi("{",Un.collapse,Un.signature,Un.actions,Un.viewAsTable,Un.sortKeys,U("span","value-size"),"}"),om=U("div","entry-line"),sm=U("span","value"),am=U("span","label",["\xA0\xA0\xA0\xA0",U("span","property"),":\xA0"]);var l0=Object.prototype.hasOwnProperty,u0=Object.prototype.toString,lm=50,c0=4,f0=10,d0=150,p0=40,h0=35;function wa(r,t){return typeof r=="number"&&isFinite(r)&&r>=1?parseInt(r,10):t}function um(r,t){if(Array.isArray(r))return r.length>0;if(typeof r=="string"&&(r.length>t.maxStringLength||/[\r\n\f\t]/.test(r)))return!0;if(r&&u0.call(r)==="[object Object]"){for(let i in r)if(l0.call(r,i))return!0}return!1}function Bu(r,t){r.appendChild(document.createTextNode(t))}function cm(r){return r?", "+$n(r)+" bytes":""}function fm(r,t,i){t.length>1&&(r.lastElementChild.innerHTML=$n(t.length)+" "+i)}function g0(r,t,i){t.length<=1||t.every(([u],c)=>c===0||u>t[c-1][0])?r.querySelector('[data-action="toggle-sort-keys"]').remove():i&&t.sort(([u],[c])=>u<c?-1:u>c?1:0)}function m0(r,t){let i=am.cloneNode(!0);Bu(i.firstElementChild,t),r.appendChild(i)}function Wu(r){function t(k){let _=S.get(k),P=w.get(k);k.classList.add("struct-expand-value"),k.innerHTML=Xi(P,!1,_)}function i(k,_,P){let R=w.get(k);if(k.classList.remove("struct-expand-value"),typeof R=="string"){let j=nm.cloneNode(!0),B=j.lastChild.previousSibling,K=JSON.stringify(R);Bu(B.firstChild,K.slice(1,-1)),B.previousSibling.innerHTML=`length: ${$n(K.length)} chars`,k.innerHTML="",k.appendChild(j)}else if(Array.isArray(R)){let j=x.get(k),B=S.get(k);k.innerHTML="",k.appendChild(rm.cloneNode(!0)),fm(k,R,"elements"),u(k,k.lastChild,R,(K,H,ie)=>{a(K,H,_,B,Object.freeze({parent:j,host:R,key:ie,index:ie}))},0,B.limit)}else{let j=x.get(k),B=S.get(k),K=Object.entries(R);k.innerHTML="",k.appendChild(im.cloneNode(!0)),fm(k,K,"entries"),g0(k,K,P),u(k,k.lastChild,K,(H,[ie,W],q)=>{m0(H,ie),a(H,W,_,B,Object.freeze({parent:j,host:R,key:ie,index:q}))},0,B.limit)}}function a(k,_,P,R,j){let B=um(_,R),K=sm.cloneNode(!0);w.set(K,_),x.set(K,j),S.set(K,R),B&&typeof _!="string"&&P?(k.classList.add("struct-expanded-value"),i(K,P-1)):(B&&K.classList.add("struct-expand-value"),K.innerHTML=Xi(_,!1,R)),p(K,_,R,j),k.appendChild(K)}function u(k,_,P,R,j=0,B=lm){let K=P.length-j-1,H=document.createDocumentFragment();B===!1&&(B=P.length),P.slice(j,j+B).forEach((ie,W)=>{let q=om.cloneNode(!0);R(q,ie,j+W),W!==K&&Bu(q,","),H.appendChild(q)}),k.insertBefore(H,_),r.view.maybeMoreButtons(k,_,P.length,j+B,B,(ie,W)=>u(k,_,P,R,ie,W))}function c(k){let _=w.get(k);Array.isArray(_)||(_=Object.entries(_).map(([P,R])=>({"[key]":P,"[value]":R}))),r.view.render(k,"table",_,{}),k.append(k.lastChild.previousSibling)}function d(k){let _=[],P=x.get(k);for(;P!==null&&P.parent!==null;)_.unshift(P.key),P=P.parent;return _}function p(k,_,P,R){if(!!P.annotations.length){for(let j of P.annotations)try{let{query:B,debug:K}=j,H={...R,context:P.context},ie=r.query(B,_,H);K&&console.info(`Compute struct view annotation${typeof K=="string"?` "${K}"`:""}:`,{data:_,context:H,query:B,queryResult:ie}),ie&&M.push(ie.tooltip?{el:k,config:ie,renderer:P.renderer,data:_,context:H}:{el:k,config:ie})}catch(B){console.error(B)}m()}}function m(){O===null&&M.length&&(O=Promise.resolve().then(()=>{O=null,Hu(M),M.length&&m()},0))}let w=new WeakMap,x=new WeakMap,S=new WeakMap,T=new WeakSet,M=[],O=null,L=new r.view.Popup({className:"view-struct-actions-popup",render:(k,_)=>{let P=_.parentNode,R=w.get(P),j=[];if(typeof R=="string")j=[{text:"Copy as quoted string",action:()=>zn(JSON.stringify(R))},{text:"Copy as unquoted string",action:()=>zn(JSON.stringify(R).slice(1,-1))},{text:"Copy a value (unescaped)",action:()=>zn(R)}];else{let B=r.pathToQuery(d(P)),K=1024*1024*1024,H=!1,ie=!1,W=0,q=0;try{let{minLength:C,circular:Z}=ya(R);W=C,Z.length?ie="Converting circular structure to JSON":W>K?ie="Resulting JSON is over 1 Gb":(q=ya(R,null,4).minLength,q>K&&(H="Resulting JSON is over 1 Gb"))}catch(C){ie=/Maximum call stack size|too much recursion/i.test(C.message)?"Too much nested structure":C.message}ie&&(ie="Can't be copied: "+ie,H||(H=ie)),B&&j.push({text:"Copy path:",notes:Lt(B),action:()=>zn(B)}),j.push({text:"Copy as JSON",notes:`(formatted${cm(q)})`,error:H,disabled:Boolean(H),action:()=>zn(JSON.stringify(R,null,4))}),j.push({text:"Copy as JSON",notes:`(compact${ie?"":cm(W)})`,error:ie,disabled:Boolean(ie),action:()=>zn(JSON.stringify(R))})}r.view.render(k,{view:"menu",onClick(B){L.hide(),B.action()},item:["html:text",{view:"block",when:"notes",className:"notes",content:"html:notes"},{view:"block",when:"error",className:"error",content:"text:error"}]},j)}}),A=new r.view.Popup({hoverPin:"popup-hover",hoverTriggers:".view-struct .show-signature",render:function(k,_){let P=_.parentNode,R=w.get(P);r.view.render(k,{view:"signature",expanded:2,path:d(P)},R)}}),I=({target:k})=>{let _="expand",P=k.closest(`
            .view-struct.struct-expand,
            .view-struct .struct-expand-value,
            .view-struct .struct-action-button
        `);if(!!P)switch(P.dataset.action&&(_=P.dataset.action),_){case"expand":P.classList.contains("struct-expand")&&(P=P.lastChild),i(P,0),m(),P.parentNode.classList.add("struct-expanded-value"),T.has(P.parentNode)&&P.parentNode.classList.remove("struct-expand");break;case"collapse":P=P.parentNode,t(P),m(),P.parentNode.classList.remove("struct-expanded-value"),P.classList.remove("view-as-table"),T.has(P.parentNode)&&P.parentNode.classList.add("struct-expand");break;case"show-signature":A.show(P);break;case"value-actions":L.show(P);break;case"toggle-sort-keys":i(P.parentNode,0,P.parentNode.classList.toggle("sort-keys")),m();break;case"toggle-string-mode":P=P.parentNode;let R=P.querySelector(".string-text").firstChild;R.nodeValue=P.classList.toggle("string-value-as-text")?JSON.parse(`"${R.nodeValue}"`):JSON.stringify(R.nodeValue).slice(1,-1);break;case"toggle-view-as-table":if(P=P.parentNode,P.classList.toggle("view-as-table"))c(P);else{let B=P.querySelector(":scope > .view-table");B&&B.remove()}break}};return r.addHostElEventListener("click",I,!1),r.view.define("struct",function(k,_,P,R){let{expanded:j,limit:B,limitCollapsed:K,annotations:H,allowedExcessStringLength:ie,maxStringLength:W,maxCompactStringLength:q,maxCompactPropertyLength:C}=_,Z=H?(r.annotations||[]).concat(H.map(ce=>typeof ce=="string"||typeof ce=="function"?{query:ce}:ce)):r.annotations,X={renderer:this,context:R,limitCollapsed:r.view.listLimit(K,c0),limit:r.view.listLimit(B,lm),annotations:Z,allowedExcessStringLength:wa(ie,f0),maxStringLength:wa(W,d0),maxCompactStringLength:wa(q,p0),maxCompactPropertyLength:wa(C,h0)};T.add(k),a(k,P,j,X,{parent:null,host:{"":P},key:"",index:0}),m(),!j&&um(P,X)&&k.classList.add("struct-expand")},{usage:tm}),()=>{document.removeEventListener("click",I,!1)}}var dm={demo:{view:"switch",data:{enabled:!0},content:[{when:"not enabled",content:'text:"I am disabled"'},{when:"enabled",content:'text:"I am enabled"'}]},examples:[{title:"Using with tabs",demo:{view:"context",modifiers:{view:"tabs",tabs:["foo","bar","baz"],name:"section"},content:{view:"switch",content:[{when:'#.section="foo"',content:'text:"FOO!"'},{when:'#.section="bar"',content:'text:"BAR!!"'},{content:'text:"When no other conditions are met"'}]}}}]};function pm(r){r.view.define("switch",function(t,i,a,u){let{content:c}=i,d='alert-warning:"No case choosen"';if(Array.isArray(c))for(let p=0;p<c.length;p++){let m=c[p];if(m&&r.queryBool(m.when||!0,a,u)){d="data"in m?{view:"context",data:m.data,content:m.content}:m.content;break}}return r.view.render(t,d,a,u)},{tag:!1,usage:dm})}var hm={demo:{view:"table",data:[{foo:1,bar:"bar",baz:"zab"},{foo:2,baz:"xyz"},{foo:3,bar:"qux",baz:"baz"},{foo:4,bar:"aaa",baz:"abc"}]},examples:[{title:"Columns setup",demo:{view:"table",cols:[{header:"Header Col 1",data:"col1",content:'text:"prefix-" + $'},{header:"Header Col 3",data:"col3",content:'text:$ + "-suffix"'}],data:[{col1:"foo",col2:"bar",col3:"baz"},{col1:"qux",col2:"oof",col3:"zab"}]}}]};var eo=Object.hasOwnProperty;function $u(r){return{header:r,view:"table-cell",data:t=>t[r],sorting:`$[${JSON.stringify(r)}] ascN`}}function v0(r,t,i){let a="",u="";if("data"in r&&r.data!==void 0)switch(typeof r.data){case"string":u=`(${r.data})`;break;case"function":a="$dataQuery;",u="$dataQuery(#)";break;default:a="$dataQuery;",u="$dataQuery"}if(typeof r.content=="string"){let c=r.content.indexOf(":");if(c===-1)return;let d=r.content.slice(c+1);d&&(u=u?`(${u} | ${d})`:`(${d})`)}return u?t.query(`${a} ${u} ascN`,{dataQuery:r.data},i):!1}function y0(r,t){return typeof t=="string"&&(t={content:t}),eo.call(t,"content")||eo.call(t,"data")?{header:r,view:"table-cell",...t}:{...$u(r),...t}}function gm(r,t){if(typeof t!="function")return!1;let i=0;try{for(let a=1;a<r.length;a++){let u=Math.sign(t(r[a-1],r[a]));if(u){if(i&&u!==i)return!1;i=u}}}catch(a){return console.error("[Discovery] Error on column order detection in table view",a),0}return-i}function mm(r){return r===null||typeof r!="object"||r instanceof RegExp}function vm(r){r.view.define("table",function(t,i,a,u){let{cols:c,rowConfig:d,limit:p}=i,m;Array.isArray(a)||(a=a?[a]:[]);let w=t.appendChild(U("thead")).appendChild(U("tr")),x=[],S=t.appendChild(U("tbody")),T=t.appendChild(U("tbody")),M=T.appendChild(U("tr")).appendChild(U("td")),O=L=>{S.innerHTML="",M.innerHTML="";for(let A of x){let I=gm(L,A.sorting);A.el.classList.toggle("asc",I===1),A.el.classList.toggle("desc",I===-1)}return r.view.renderList(S,m,L,{...u,isScalar:mm,cols:c},0,r.view.listLimit(p,25),M).then(()=>T.hidden=!M.firstChild)};if(Array.isArray(c))c=c.map((L,A)=>typeof L=="string"?$u(L):{header:"col"+A,view:"table-cell",...L});else{let L=new Set,A=c&&typeof c=="object"?c:{},I=!1;c=[];for(let k of a)if(mm(k))I=!0;else for(let _ of Object.keys(k))L.add(_);for(let k of Object.keys(A))A[k]?L.add(k):L.delete(k);I&&c.push({header:"[value]",view:"table-cell",sorting:"$ ascN",scalarAsStruct:!0,colSpan:"=$isScalar:#.isScalar;$isScalar() ? #.cols.size() : 1"});for(let k of L)c.push(eo.call(A,k)?y0(k,A[k]):$u(k))}c=c.filter(L=>!eo.call(L,"when")||r.queryBool(L.when,a,u));for(let L of c){if(eo.call(L,"whenData")&&L.whenData!==void 0){let{whenData:P,content:R}=L;L.whenData=void 0,L.content=(j,B)=>r.queryBool(P,j,B)?{content:R}:void 0}let A=w.appendChild(U("th")),I={el:A};x.push(I),A.textContent=L.header;let k=eo.call(L,"sorting")?r.query(L.sorting,null,u):v0(L,r,u),_=typeof k=="function"?gm(a,k):0;_!==0?(L.sorting=k,I.sorting=k,A.classList.add("sortable"),A.addEventListener("click",()=>{A.classList.contains("asc")?O(a.slice().sort((P,R)=>-k(P,R))):A.classList.contains("desc")&&!_?O(a):O(a.slice().sort(k))})):L.sorting=!1}return M.colSpan=c.length,m=this.composeConfig({view:"table-row",cols:"=$isScalar:#.isScalar;$isScalar() ? [#.cols[]] : #.cols"},d),O(a)},{tag:"table",usage:hm})}function ym(r){r.view.define("table-row",function(t,i,a,u){let{cols:c}=i;if(Array.isArray(c))return Promise.all(c.map((d,p)=>r.view.render(t,d,a,{...u,colIndex:p})))},{tag:"tr"})}var b0={view:"struct",expanded:1},w0=Object.hasOwnProperty;function x0(r,t,i){if(Array.isArray(t)){r.classList.add("complex"),r.textContent=t.length?"[\u2026]":"[]";return}if(i){r.classList.add("complex");for(let a in t)if(w0.call(t,a)){r.textContent="{\u2026}";return}r.textContent="{}";return}if(t!==void 0){if(typeof t=="number"){let a=String(t);r.classList.add("number"),a.length>3?r.innerHTML=$n(a,!1):r.textContent=a;return}r.textContent=String(t)}}function bm(r){r.view.define("table-cell",function(t,i,a,u){let{content:c,details:d,colSpan:p,scalarAsStruct:m}=i,w=a!==null&&typeof a=="object"&&!(a instanceof RegExp);if(typeof p=="number"&&p>1&&(t.colSpan=p),typeof c=="function"){if(c=c(a,u),!c)return;c=c.content}if((d||!c&&w)&&(t.classList.add("details"),t.addEventListener("click",x=>{let S=x.target;if(S===t){let T=S.parentNode,M=T.parentNode,O=Array.from(M.querySelectorAll(".view-table-cell.details-expanded")).find(A=>A.parentNode.parentNode===M),L=null;if(O){let A=O.parentNode;if(O.classList.remove("details-expanded"),O===t){T.parentNode.removeChild(T.nextSibling);return}A!==T?A.parentNode.removeChild(A.nextSibling):(L=T.nextSibling.firstChild,L.innerHTML="")}L===null&&(L=T.parentNode.insertBefore(document.createElement("tr"),T.nextSibling).appendChild(document.createElement("td")),L.parentNode.className="view-table-cell-details-row",L.className="view-cell-details-content",L.colSpan=1e3),t.classList.add("details-expanded"),r.view.render(L,d||b0,a,u)}})),m&&!c&&!w&&(c="struct"),c)return r.view.render(t,c,a,u);x0(t,a,w)},{tag:"td"})}var wm={demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}},examples:[{title:"With before and after content",demo:{view:"tabs",name:"example",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],beforeTabs:'text:"<Content before tabs>"',afterTabs:'text:"<Content after tabs>"',content:'text:"Selected: " + #.example'}},{title:"On change handler",demo:{view:"tabs",name:"example",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],onChange:new Function('return (value) => alert("changed to " + value)')(),content:'text:"Selected: " + #.example'}}]};function xm(r){r.view.define("tabs",function(t,i,a,u){async function c(R){let j=k?x:w;if(_===R)return;let B=p||m||d?{...u,[S]:R}:null;_=R,k=!0,Array.isArray(T)&&(O.innerHTML="",p&&(A.innerHTML="",await r.view.render(A,p,a,B),O.appendChild(A)),await Promise.all(T.map(K=>r.view.render(O,r.view.composeConfig(K,{active:K.value===_}),a,u))),m&&(I.innerHTML="",await r.view.render(I,m,a,B),O.appendChild(I))),d&&(L.innerHTML="",await r.view.render(L,d,a,B)),typeof j=="function"&&j(_,S,a,u)}let{content:d,beforeTabs:p,afterTabs:m,onInit:w,onChange:x}=i,{name:S,tabs:T,tabConfig:M}=i,O=t.appendChild(document.createElement("div")),L=null,A=null,I=null,k=!1,_=NaN,P="value"in i?i.value:S in u?u[S]:void 0;return T=r.query(T,a,u),M=r.view.composeConfig({view:"tab",onClick:c},M),O.className="view-tabs-buttons",p&&(A=document.createElement("div"),A.className="view-tabs-buttons-before"),m&&(I=document.createElement("div"),I.className="view-tabs-buttons-after"),d&&(L=t.appendChild(document.createElement("div")),L.className="view-tabs-content"),typeof S!="string"&&(S="filter"),Array.isArray(T)?T=T.map(R=>{let j=typeof R;return(j==="string"||j==="number"||j==="boolean")&&(R={value:R}),(P===void 0||R.active)&&(P=R.value),r.view.composeConfig(M,R)}):T=[],c(P)},{usage:wm})}var qu=()=>alert("clicked!"),km={demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}},examples:[{title:"Active & disabled tab",demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One"},{value:"two",text:"Two",active:!0},{value:"three",text:"Three",disabled:!0}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}}},{title:"On click handler",demo:{view:"tabs",name:"tabs",tabs:[{value:"one",text:"One",onClick:qu},{value:"two",text:"Two",onClick:qu},{value:"three",text:"Three",onClick:qu}],content:{view:"switch",content:[{when:'#.tabs="one"',content:'text:"One"'},{when:'#.tabs="two"',content:'text:"Two"'},{when:'#.tabs="three"',content:'text:"Three"'}]}}}]};function Sm(r){r.view.define("tab",function(t,i,a,u){let{content:c,active:d=!1,disabled:p=!1,onClick:m,value:w,text:x=String(w).replace(/^./,S=>S.toUpperCase())}=i;if(r.query(p,a,u)?t.classList.add("disabled"):typeof m=="function"&&(t.addEventListener("click",()=>m(w)),t.classList.add("onclick")),d&&t.classList.add("active"),c)return r.view.render(t,c,a,u);t.textContent=x},{usage:km})}var Cm={demo:{view:"text",data:'"Hello world!"'},examples:[{title:"Shorthand usage",view:'text:"Hello world!"'}]};function Tm(r){r.view.define("text",function(t,i,a){t.appendChild(document.createTextNode(String(a)))},{tag:!1,usage:Cm})}var Uu={};Ye(Uu,{has:()=>k0,matchAll:()=>Vu});var{toString:Mm}=Object.prototype,Lm=(r,t,i)=>{let a=r.slice(i).search(t);return a!==-1?{offset:i+a,length:RegExp.lastMatch.length}:null},Em=(r,t,i)=>{let a=r.indexOf(t,i);return a!==-1?{offset:a,length:t.length}:null};function k0(r,t,i){return Mm.call(t)==="[object RegExp]"?i&&!t.ignoreCase?new RegExp(t,t.flags+"i").test(r):t.test(r):typeof t=="string"?i?String(r).toLowerCase().indexOf(t.toLowerCase()):String(r).indexOf(t)!==-1:!1}function Vu(r,t,i,a,u){let c=Mm.call(t)==="[object RegExp]"?Lm:typeof t=="string"?Em:null,d=String(r);if(u)switch(c){case Lm:t.ignoreCase||(t=new RegExp(t,t.flags+"i"));break;case Em:d=d.toLowerCase(),t=t.toLowerCase();break}if(c===null){i(r);return}let p=0;do{let m=c(d,t,p);if(m===null||m.length===0&&m.offset===p){i(p>0?r.slice(p):r);break}m.length!==0&&(m.offset!==p&&i(r.slice(p,m.offset)),a(r.substr(m.offset,m.length))),p=m.offset+m.length}while(p!==r.length)}var Om={demo:{view:"text-match",data:{text:"I am matched text or a text with matches!",match:/match/}},examples:[{title:"Raw string as match",demo:{view:"text-match",data:{text:"I am matched text or a text with matches!",match:"match"}}},{title:"Using with a link",demo:{view:"link",data:{href:"#"},content:'text-match:{ text: "Test link", match: /\\w+/i }'}},{title:"Various configurations",demo:{view:"table",cols:[{header:"text-match",content:"text-match"},{header:"Config",content:"struct"}],data:[null,{},{},{match:"test"},{match:"Test"},{match:"test",ignoreCase:!0},{match:"Test",ignoreCase:!0},{match:/test/},{match:/test/g},{match:/test/i},{match:/test/,ignoreCase:!0},{match:/test/g,ignoreCase:!0}].map((r,t)=>t>1?{text:"test Test",...r}:r)}}]};var S0=U("span","view-text-match");function Am(r){r.view.define("text-match",function(t,i,a){let{text:u,match:c,ignoreCase:d=!1}=a||{};Vu(String(u),c,p=>t.appendChild(xn(p)),p=>t.appendChild(S0.cloneNode()).appendChild(xn(p)),d)},{tag:!1,usage:Om})}var Nm={demo:{view:"text-numeric",data:'"Like a `text` view but adds a thousands separator to integer part of numbers, e.g. 12345678 or 12345.67890"'},examples:[{title:"Shorthand usage",view:"text-numeric:1234567"}]};function Dm(r){r.view.define("text-numeric",function(t,i,a){t.innerHTML=$n(a)},{tag:"span",usage:Nm})}function Pm(r){r.view.define("toc-section",function(t,i,a,u){let{header:c,content:d}=i;return r.view.render(t,[{view:"block",className:"header",content:c},{view:"block",className:"content",content:d}],a,u)},{tag:"section"})}var xa={demo:{view:"context",modifiers:{view:"toggle-group",name:"toggleValue",data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}]},content:{view:"switch",content:[{when:'#.toggleValue="one"',content:'text:"One"'},{when:'#.toggleValue="two"',content:'text:"Two"'},{when:'#.toggleValue="three"',content:'text:"Three"'}]}},examples:[{title:"With before and after content",demo:{view:"toggle-group",data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}],beforeToggles:'text:"<Content before toggles>"',afterToggles:'text:"<Content after toggles>"'}},{title:"On change handler",demo:{view:"toggle-group",name:"example",onChange:new Function('return (value) => alert("changed to " + value)')(),data:[{value:"one",text:"One"},{value:"two",text:"Two"},{value:"three",text:"Three"}]}}]};function Im(r){r.view.define("toggle",function(t,i,a,u){let{content:c,disabled:d=!1,onToggle:p,value:m,text:w=String(m).replace(/^./,S=>S.toUpperCase())}=i,{checked:x=!1}=i;if(d?t.classList.add("disabled"):typeof p=="function"&&(t.addEventListener("click",()=>{x=!x,p(x,m)}),t.classList.add("onclick")),x&&t.classList.add("checked"),c)return r.view.render(t,c,a,u);t.textContent=w},{usage:xa})}function _m(r){r.view.define("toggle-group",function(t,i,a,u){async function c(k,_){let P=L?w:m;A!==_&&(A=_,L=!0,Array.isArray(T)&&(t.innerHTML="",d&&(M.innerHTML="",await r.view.render(M,d,a,{...u,[x]:_}),t.appendChild(M)),p&&(O.innerHTML="",await r.view.render(O,p,a,{...u,[x]:_}),t.appendChild(O)),await Promise.all(T.map((R,j)=>r.view.render(t,r.view.composeConfig(R,{checked:R.value===A}),a[j],u)))),typeof P=="function"&&P(A,x,a,u))}let{beforeToggles:d,afterToggles:p,onInit:m,onChange:w}=i,{name:x,toggleConfig:S}=i,T=[],M=null,O=null,L=!1,A=NaN,I="value"in i?i.value:x in u?u[x]:void 0;return S=r.view.composeConfig({view:"toggle",onToggle:c},S),d&&(M=document.createElement("div"),M.className="view-toggle-group-before"),p&&(O=document.createElement("div"),O.className="view-toggle-group-after"),typeof x!="string"&&(x="filter"),Array.isArray(a)&&(T=a.map(k=>{let _=typeof k;return(_==="string"||_==="number"||_==="boolean")&&(k={value:k}),(I===void 0||k.active)&&(I=k.value),r.view.composeConfig(S,k)})),c(!0,I)},{usage:xa})}var C0=()=>alert("toggled!"),Rm=([r,...t],i="")=>{let a=[];for(let u=0;u<r;u++){let c=i+"."+(u+1);a.push({title:c,children:t.length?Rm(t,c):null})}return a},zm={demo:{view:"tree",item:"text:text",data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}},examples:[{title:"Expanded tree",demo:{view:"tree",item:"text:text",expanded:999,data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}}},{title:"With empty text",demo:{view:"tree",emptyText:"This tree is empty",data:null}},{title:"With toggle handler",demo:{view:"tree",item:"text:text",onToggle:C0,data:{text:"Root",children:[{text:"Child"},{text:"Another child",children:[{text:"Lvl 2 child"},{text:"Lvl 2 child"}]}]}}},{title:"limitLines",demo:{view:"tree",item:"text:title",limitLines:7,data:Rm([5,3,3])}}]};function jm(r){function t(a,u,c,d,p,m){return m===!1&&(m=c.length),a.classList.add("incomplete"),c.slice(p,p+m).reduce((w,x)=>w.then(()=>{let{container:S,itemConfig:T}=u;return r.view.render(S,r.view.composeConfig(T,{expanded:x.expanded,last:x.last,hasChildren:x.hasChildren,children:x.children}),x.data,d).then(()=>{if(x.expanded&&x.hasChildren){let M=S.lastChild.querySelector(".view-tree-leaf-children");M.classList.add("incomplete"),u={container:M,itemConfig:r.view.composeConfig(T,T.itemConfig),prev:u}}else for(;x.shift--;)u.container.classList.remove("incomplete"),u=u.prev})}),Promise.resolve()).then(()=>r.view.maybeMoreButtons(a,null,c.length,p+m,m,(w,x)=>t(a,u,c,d,w,x))||a.classList.remove("incomplete"))}function i(a,u,c,d){function p(x,S,T,M=0){x.forEach((O,L,A)=>{let I=r.query(T.children,O,u),k=Array.isArray(I)&&I.length>0,_=L===A.length-1,P=w.has(O)?0:typeof S=="function"?S(O,u):S;w.add(O),m.push({data:O,expanded:P,last:_,hasChildren:k,children:P?null:T.children,shift:_&&(!P||!k)?M+1:0}),k&&P&&p(I,typeof S=="number"?S-1:S,r.view.composeConfig(T,T.itemConfig),_?M+1:0)})}let m=[],w=new Set;return p(a,d,c),m}r.view.define("tree",function(u,c,d,p){let{children:m="children",item:w="text",itemConfig:x,collapsible:S,emptyText:T,onToggle:M}=c,{expanded:O,limit:L,limitLines:A=!0}=c;if(T!==!1&&T!==""&&u.setAttribute("emptyText",T||"Empty tree"),!Array.isArray(d)&&d&&(d=[d]),Array.isArray(d)){if(L=r.view.listLimit(L,25),A=r.view.listLimit(A,25),O=typeof O=="function"?O:r.view.listLimit(O,1),A){let I=i(d,p,this.composeConfig({children:m},x),O),k={container:u,itemConfig:this.composeConfig({view:"tree-leaf",itemConfig:x,content:w,collapsible:S,onToggle:M},x)};return t(u,k,I,p,0,A)}return this.renderList(u,this.composeConfig({view:"tree-leaf",itemConfig:x,content:w,collapsible:S,expanded:O,children:m,limit:L,onToggle:M},x),d,p,0,L)}},{tag:"ul",usage:zm})}function Fm(r){let t=new WeakMap,i=({target:a})=>{let u=a.closest(".view-tree-leaf-toggle");if(u){let c=t.get(u),d=!u.parentNode.classList.toggle("collapsed");typeof c.render=="function"&&c.render(),typeof c.onToggle=="function"&&c.onToggle(d,u.parentNode,c.data,c.context)}};r.addHostElEventListener("click",i,!1),r.view.define("tree-leaf",async function(a,u,c,d){let{expanded:p,content:m="text",itemConfig:w,collapsible:x=!0,last:S,hasChildren:T,children:M,limit:O,onToggle:L}=u,A=a.appendChild(U("span","view-tree-leaf-toggle")),I=a.appendChild(U("span","view-tree-leaf-content")),k=null,_=T;if(S&&a.classList.add("last"),x||a.classList.add("non-collapsible"),await this.render(I,m,c,d),M&&(k=r.query(M,c,d),_=Array.isArray(k)&&k.length>0),_){let P=a.appendChild(U("ul","view-tree-leaf-children")),R={data:c,context:d,onToggle:L,render:null},j=(B,K)=>{typeof K=="number"&&K--,this.renderList(P,this.composeConfig({view:"tree-leaf",expanded:K,itemConfig:w,content:m,collapsible:x,children:M,limit:O,onToggle:L},w),B,d,0,this.listLimit(O,25))};a.classList.add("has-children"),t.set(A,R),(typeof p=="function"?p(c,d):p)?k&&await j(k,p):(a.classList.add("collapsed"),k&&(R.render=()=>{R.render=null,j(k,p||1)}))}},{tag:"li"})}var gs={};Ye(gs,{default:()=>Hm,notFound:()=>Bm,report:()=>tv,viewsShowcase:()=>nv});function Hm(r){r.page.define("default",{view:"switch",content:[{when:"not #.dataLoaded",content:[{view:"h1",className:"no-data-loaded",content:'text:"Discovery.js"'},{view:"markdown",when:"#.meta.description",source:"=#.meta.description"},'html:"<br>"',"preset/upload"]},{content:['page-header{ content: "h1:#.name" }',{view:"struct",expanded:1}]}]})}function Bm(r){r.page.define("not-found",['alert-warning:"Page `" + name + "` not found"'])}var Sa={};Ye(Sa,{decode:()=>hs,encode:()=>ps});var qr=[],ds="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),ka=ds.reduce(function(r,t,i){return r[t]=i,r},{});for(fs=0;fs<255;fs++)qr[fs]=String.fromCharCode(fs);var fs;function T0(r){let t="";for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?t+=qr[a]:a<2048?t+=qr[a>>6|192]+qr[a&63|128]:t+=qr[a>>12|224]+qr[a>>6&63|128]+qr[a&63|128]}return t}function L0(r){r=T0(r);let t=new Array(r.length);for(let i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return t}function E0(r){let t="";for(let i=0;i<r.length;){let a=r.charCodeAt(i++);if(a<128)t+=String.fromCharCode(a);else{let u=r.charCodeAt(i++);if(a&32){let c=r.charCodeAt(i++);t+=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}else t+=String.fromCharCode((a&31)<<6|u&63)}}return t}function M0(r){return E0(r.map(function(t){return qr[t]}).join(""))}function ps(r){let t="";Array.isArray(r)||(r=L0(r));for(let i=0;i<r.length;){let a=r[i++],u=r[i++],c=r[i++],d=a>>2,p=(a&3)<<4|u>>4,m=(u&15)<<2|c>>6,w=c&63;u==null?m=w=64:c==null&&(w=64),t+=ds[d]+ds[p]+ds[m]+ds[w]}return t}function hs(r){let t=[],i,a,u,c;r=r.replace(/[^a-zA-Z0-9\+\/]/g,"");for(let d=0;d<r.length;){i=ka[r.charAt(d++)],a=ka[r.charAt(d++)],u=ka[r.charAt(d++)],c=ka[r.charAt(d++)];let p=i<<2|a>>4,m=(a&15)<<4|u>>2,w=(u&3)<<6|c;t.push(p,m,w)}return(u==null||u==64)&&t.pop(),(c==null||c==64)&&t.pop(),M0(t)}function Wm(r,t){return typeof r=="string"?r:t||""}var qm=["query","view","title","dzen","noedit"],O0=["q","v","title","dzen","noedit"];function Vm(r){let{query:t,view:i,title:a,dzen:u,noedit:c,...d}=typeof r=="string"?{query:r}:r,p=[];return u&&p.push(["dzen"]),c&&p.push(["noedit"]),a&&p.push(["title",a]),t&&p.push(["q",ps(t)]),typeof i=="string"&&p.push(i?["v",ps(i)]:["v"]),Object.keys(d||{}).sort().forEach(m=>{qm.includes(m)||p.push([m,m.endsWith("-b64")&&typeof d[m]=="string"?ps(d[m]):d[m]])}),p}function Um(r){let t=Object.fromEntries(r),i={title:t.title||"",query:hs(Wm(t.q,"")),view:"v"in t?hs(Wm(t.v,"")):void 0,dzen:"dzen"in t,noedit:"noedit"in t};return Object.keys(t).forEach(a=>{O0.includes(a)||(i[a]=a.endsWith("-b64")&&typeof t[a]=="string"?hs(t[a]):t[a])}),i}function A0(r){return Object.fromEntries(Object.entries(r).filter(([t])=>!qm.includes(t)))}function $m(r,t,i){for(let a of Object.keys(r))if(a!==i&&r[a]!==t[a])return!1;for(let a of Object.keys(t))if(a!==i&&r[a]!==t[a])return!1;return!0}function Ca(r,t={}){let i={...r,params:A0(r.params)};return!$m(t,i,"params")||!$m(t.params,i.params)?i:t}function N0(r){let t=d=>d.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'"),{title:i,query:a,view:u}=r,c={title:i,query:a,view:u};return`{
${Object.keys(c).reduce((d,p)=>d.concat(c[p]?`    ${p}: '${t(c[p])}'`:[]),[]).join(`,
`)}
}`}function D0(r){if(r&&(typeof r=="number"||typeof r=="string")){let t=new Date(r);return isNaN(t)?null:t}return r instanceof Date?r:null}function Gm(r){let t=D0(r);return t?t.toISOString().replace(/^(\d{4})-(\d{2})-(\d{2})T([\d:]+).*/,"$3/$2/$1 $4"):null}function Ym(r,t){let i,a,u,c,d=new r.view.Popup({render:(x,S,T)=>r.view.render(x,{view:"menu",data:[{text:"Copy link to report",action:()=>zn(location)},{text:"Copy report as JSON",action:()=>zn(N0(r.pageParams))}],onClick(M){T(),M.action()}})}),p=U("div","report-actions",[c=U("button",{class:"edit-mode discovery-hidden-in-dzen",title:"Toggle edit mode",onclick:({target:x})=>{x.blur(),t({noedit:!r.pageParams.noedit})}}),U("button",{class:"share",title:"Share ...",onclick:({target:x})=>{x.blur(),d.show(x)}}),U("button",{class:"toggle-fullscreen",title:"Toggle full page mode",onclick:({target:x})=>{x.blur(),t({dzen:!r.pageParams.dzen})}})]),m=x=>{x.parentNode.dataset.title=x.value||x.placeholder},w=U("div","report-header",[U("div",{class:"report-header-text","data-title":"\xA0"},[i=U("input",{class:"discovery-hidden-in-dzen",placeholder:"Untitled report",oninput:({target:x})=>{m(x)},onchange:({target:x})=>{m(x),t({title:x.value},!0)},onkeypress:x=>{(x.charCode===13||x.keyCode===13)&&x.target.blur()}}),U("span","timestamp",[a=U("span",null,"&nbsp;"),u=U("span")])])]);return{el:[p,w],render(x,S){let{title:T,noedit:M}=S.params,O=Gm(S.createdAt);i.value=T,m(i),c.classList.toggle("disabled",M),a.innerText=O?"Data collected at "+O+" | ":"",u.innerText="Rendered at "+Gm(new Date)}}}function Km(r,t,i){return r.length?`${r.length} ${r.length===1?t:i}`:"empty"}function P0(r){return Array.isArray(r)?`Array (${Km(r,"element","elements")})`:r&&typeof r=="object"?`Object (${Km(Object.keys(r),"key","keys")})`:`Scalar (${r===null?"null":typeof r})`}function Jm(r,t){let i=!1,a={},u,c=(T,M,O,L)=>r.querySuggestions(T,M,O,L),d=new r.view.QueryEditor(c).on("change",T=>u.checked&&t({query:T},!0)),p=r.getQueryEngineInfo(),m=U("div","buttons"),w=U("div","data-query-result"),x=U("div","form query-editor-form",[U("div","query-editor",[d.el,U("div","editor-toolbar",[U("span","syntax-hint",`Use <a class="view-link" href="${p.link}" target="_blank">${p.name}</a> ${p.version||""} syntax for queries`),U("label","view-checkbox",[u=U("input",{class:"live-update",type:"checkbox",checked:!0,onchange:T=>{T.target.checked&&t({query:d.getValue()},!0)}}),U("span","view-checkbox__label","process on input")]),m])]),w]);r.view.render(m,{view:"button-primary",content:'text:"Process"',onClick:()=>{a={},t({query:d.getValue()},!0),r.scheduleRender("page")}});let S;return{el:x,perform(T,M){let O=Ca(M,a.context),L=M.params.query,A,I;if(d.setValue(L,T,O),a.query===L&&a.data===T&&a.context===O)I=a.results;else{S&&(S.clear(),S=null);try{A=Date.now(),I=r.query(L,T,O),A=Date.now()-A}catch(k){let _=k.details&&k.details.loc,P=d.cm.doc;if(_){let[R,j]=k.details.loc.range;S=k.details.token==="EOF"||R===j||L[R]===`
`?P.setBookmark(P.posFromIndex(R),{widget:U("span","discovery-editor-error"," ")}):P.markText(P.posFromIndex(R),P.posFromIndex(j),{className:"discovery-editor-error"})}return a={},w.innerHTML='<div class="report-error query-error">'+Lt(k.message)+"</div>",{error:k}}a={data:T,context:O,query:L,results:I},w.innerHTML="",r.view.render(w,{view:"expand",header:`text:"${P0(I)} in ${parseInt(A,10)}ms"`,expanded:i,onToggle:k=>i=k,content:{view:"struct",expanded:1}},I)}return{data:I}}}}function Ta(r){return Boolean(r&&r.nodeType===Node.TEXT_NODE)}function Gu(r,t=`
`){let i="";for(let a of r.childNodes)!Ta(a)&&a.previousSibling&&!Ta(a.previousSibling)&&(i+=t),i+=I0(a,t);return i}function I0(r,t=`
`){switch(r.nodeType){case Node.ELEMENT_NODE:let[i,a=""]=r.cloneNode().outerHTML.split(/(?=<\/[^>]+>$)/);return i+(r.firstChild&&!Ta(r.firstChild)?t+"  ":"")+Gu(r,t+"  ")+(r.lastChild&&!Ta(r.lastChild)?t:"")+a;case Node.TEXT_NODE:return r.nodeValue;case Node.COMMENT_NODE:return"<!--"+r.nodeValue+"-->";case Node.DOCUMENT_FRAGMENT_NODE:return Gu(r,t)}return""}function Qm(r,t){let i=[],a=[...Array.isArray(r.highlight)?r.highlight:r.highlight?[r.highlight]:[]];Array.isArray(r.highlightProps)&&a.push(`(")?(?:${r.highlightProps.join("|")})\\1(?=:)`);for(let u of a){let c=new RegExp(u,"gm"),d;for(;d=c.exec(t);)i.push({range:[d.index,d.index+d[0].length]})}return i}function La(r){let t={view:"context",modifiers:[{view:"switch",when:"beforeDemo",content:[{when:({beforeDemo:i})=>typeof i=="string",content:'html:"<p>" + beforeDemo + "</p>"'},{content:{view:"render",config:"beforeDemo",context:"{ __demoContext: true, ...(#.viewDef | { name, group, options }) }"}}]},{view:"block",when:"demo or view",className:"usage-render",postRender:(i,{onInit:a},{demoFixed:u})=>{u&&(i.classList.add("demo-fixed"),i.style.height=u+"px"),a(i,"root")},content:{view:"render",config:"demo or view",data:"demoData",context:"{ __demoContext: true, ...(#.viewDef | { name, group, options }) }"}},{view:"switch",when:"afterDemo",content:[{when:({afterDemo:i})=>typeof i=="string",content:'html:"<p>" + afterDemo + "</p>"'},{content:{view:"render",config:"afterDemo",context:"{ __demoContext: true, ...(#.viewDef | { name, group, options }) }"}}]}],content:{view:"tabs",when:"source != false",className:"usage-sources",name:"code",tabs:[{value:"config",text:"Config (JS)"},{value:"config-json",text:"Config (JSON)"},{value:"html",text:"Rendered HTML"}],content:{view:"switch",content:[{when:'#.code="config"',content:[{view:"expand",when:'"demoData" in $',header:'text:"Input data"',content:{view:"struct",expanded:2,data:"demoData"}},{view:"source",className:"first-tab",data:i=>{let a=$r(i.demo||i.view);return{syntax:"discovery-view",content:a,refs:Qm(i,a)}}}]},{when:'#.code="config-json"',content:[{view:"expand",when:'"demoData" in $',header:'text:"Input data"',content:{view:"struct",expanded:2,data:"demoData"}},{view:"source",data:i=>{let a=JSON.stringify(i.demo||i.view,null,4);return{syntax:"json",content:a,refs:Qm(i,a)}}}]},{when:'#.code="html"',content:{view:"source",data:(i,a)=>({syntax:"html",content:Gu(a.root)})}}]}}};return{view:"block",className:"discovery-view-usage",data({name:i,options:a},u){let c=[...r.view.values].filter(d=>d.options.usage===a.usage).map(d=>d.name);return c.includes(i)||c.unshift(i),u.viewDef={demo:{view:i,data:'"'+i+'"'},...typeof a.usage=="function"?a.usage(i,c):Array.isArray(a.usage)?{examples:a.usage}:a.usage,name:i,group:c,options:a}},content:["h1:name",t,{view:"list",data:"examples",itemConfig:{className:"usage-section"},item:["h2{ anchor: true, data: title }",t]}]}}var Zm=`{
    view: 'struct',
    expanded: 1
}`,Xm=[{name:"Table",content:$r({view:"table"})},{name:"Auto-link list",content:$r({view:"ol",item:"auto-link"})},{name:"Signature",content:$r({view:"signature",expanded:2})}];function _0(r,t,i){return U("div",{class:"report-editor-tab",onclick:()=>i({view:t})},r||"Untitled preset")}function ev(r,t){let i={},a=Array.isArray(r.options.viewPresets)?Xm.concat(r.options.viewPresets):Xm,u,c,d,p,m,w,x=new r.view.ViewEditor(r).on("change",O=>w.checked&&t({view:O},!0)),S=U("div","buttons"),T=U("div","form view-editor-form",[U("div","view-editor-form-header",[U("div","report-editor-tabs view-mode",m=["Default","Custom"].map(O=>U("div",{class:"report-editor-tab","data-mode":O.toLowerCase(),onclick:()=>t({view:O==="Default"?void 0:Zm},!0)},O))),U("div","report-editor-tabs presets",a.map(({name:O,content:L})=>_0(O,L,t))),U("div","view-editor-form-header-links",'<a href="#views-showcase" class="view-link">Views showcase</a>')]),u=U("div",{class:"view-editor-form-content",hidden:!0},[U("button",{class:"view-button formatting",title:"Prettify (input should be a JSON)",onclick(){x.focus();try{let O=x.getValue().trim(),L=new Function("return 0,"+O)();t({view:$r(L)})}catch(O){console.error("[Discovery] Prettify failed",O)}}}),x.el,U("div","editor-toolbar",[c=U("div","view-expand",[U("div",{class:"header",onclick:()=>{c.classList.toggle("expanded"),p.classList.toggle("visible")}},[d=U("div","header-content"),U("div","trigger")]),p=U("div","view-editor-view-list")]),U("label","view-checkbox",[w=U("input",{class:"live-update",type:"checkbox",checked:!0,onchange:O=>{O.target.checked&&t({view:x.getValue()},!0)}}),U("span","view-checkbox__label","build on input")]),S])])]);r.view.render(S,{view:"button-primary",content:'text:"Build"',onClick:()=>{i={},t({view:x.getValue()},!0),r.scheduleRender("page")}}),new r.view.Popup({className:"view-editor-view-list-hint",hoverTriggers:".view-editor-view-list .item.with-usage",render:function(O,L){r.view.render(O,La(r),r.view.get(L.textContent),{})}}),d.textContent=`Available ${[...r.view.entries].filter(([,O])=>O.options.usage).length} views`;let M=()=>p.innerHTML='<a href="#views-showcase" class="view-link">Views showcase</a><br><br>'+[...r.view.entries].sort().map(([O,L])=>`<div><a class="item view-link${L.options.usage?" with-usage":""}" ${L.options.usage?'href="#views-showcase:'+O+'"':""}>${O}</a></div>`).join("");return M(),r.view.on("define",Lr(M,100)),{el:T,render(O,L,A){let I=Ca(L,i.context),k=typeof L.params.view=="string"?"custom":"default",_=L.params.view,P=null;if(x.setValue(_),u.hidden=k!=="custom",m.forEach(R=>R.classList.toggle("active",R.dataset.mode===k)),!_&&k==="default"&&(_=Zm),i.view!==_||i.data!==O||i.context!==I){A.innerHTML="";try{P=Function("return "+(_?"0,"+_:"null"))(),r.view.render(A,P,O,I)}catch(R){r.view.render(A,j=>{j.className="report-error render-error",j.innerHTML=Lt(String(R))+"<br>(see details in console)",console.error(R)})}i={data:O,context:I,view:_}}}}}function tv(r){function t(u,c){return r.setPageParams({...r.pageParams,...u},c)}function i(){if(a!==null)return a;let u=Ym(r,t),c=Jm(r,t),d=ev(r,t),p=U("div",{class:"report-editor discovery-hidden-in-dzen",hidden:!0},[c.el,d.el]),m=U("div","report-content"),w=[...u.el,p,m];return a={header:u,queryEditor:c,viewEditor:d,reportEditorEl:p,reportContentEl:m,layout:w}}let a=null;r.page.define("report",function(u,c,d){let{header:p,queryEditor:m,viewEditor:w,reportEditorEl:x,reportContentEl:S}=i();x.hidden=d.params.noedit,p.render(c,d);let T=m.perform(c,d);if(T.error){w.el.hidden=!0,S.hidden=!0;return}w.el.hidden=!1,S.hidden=!1,w.render(T.data,d,S)},{reuseEl:!0,init(u){i().layout.forEach(c=>u.appendChild(c))},encodeParams:Vm,decodeParams:Um})}var R0=`
## Working with views

A presentation in Discovery.js is setting up as a tree of views.
There are several ways to define a view, some may be more convenient in one case, others in another.
The main notation is an object, all other notations are converted to it.
The only required property is \`view\` which defines a view name, any other properties are optional:

\`\`\`discovery-view
{
    view: "view-name"
}
\`\`\`

The following properties are supported by any view:

- \`when\` \u2013 control view rendering (should it be rendered or not) before an input data is transformed (\`data\` is applied)
- \`data\` \u2013 transform input data for the view and its nested views
- \`whenData\` \u2013 control view rendering after an input data is transformed
- \`className\` \u2013 add class name(s) to the root element of view if any
- \`postRender\` - a function which should be invoked after view rendering but before placing to destination place in DOM
- \`tooltip\` \u2013 setup a tooltip to show on view hovering, can be applied for views with a container only

The order of evaluation during a view render:

\`\`\`js
                          input data | output data (the result of "data" evaluation if any)
                                     |
render start ---> [when] --> [data] -|-> [whenData] --> [postRender] --> [className] --> render finish
                                     |
\`\`\`

When \`data\` property is specified, it changes flow's data according the following rules:

- a string \u2013 treated as a query which result is used as the output data
- a function like \`fn(data, context)\` \u2013 the result of the function invocation is used as the output data
- any other value used as the output data

> Note: Only \`when\` and \`data\` properties get an input data, any other functions and queries receive
a result of \`data\` property evalution. When \`data\` is not specified all the queries and functions
receive the same input data.

Properties \`when\` and \`whenData\` can take:

- a string \u2013 treated as a query
- \`true\` \u2013 treated as a empty query which mean that the data itself is examinated with no any transformation
- \`undefined\` \u2013 same when not specified, just render (ignore the property)
- a function like \`fn(data, context)\`
- any other value used as is

Regardless of how the value is obtained, it is coerce to a boolean.
Plase note, that Jora rules are used which mean that empty arrays and object with no own keys are falsy (truthy in JavaScript).
The view is only rendered if the resulting value is truthy.

## Queries for properties

In some cases, it is necessary to compute the value of a property based on the data.
To do this, you can use a string value for a property that starts with \`=\`.
This will mean that everything after the \`=\` is a query which will take output data and produce a value for the property.
Other values are passed to the view render as is, without any changes.

In the following, limit number of items rendered at once only if there are more than 12 items:

\`\`\`discovery-view
{
    view: 'list',
    limit: '=size() <= 12 and 10'  // the same as '=size() <= 12 ? false : 10'
}
\`\`\`

> Note: In those rare cases when you need to pass to a property a string that starts with \`=\`,
you can use a query like \`="=some string"\`,<br>e.g. \`{ view: 'example', prop: '="=string="' }\`

## Shorthand notations

| Shorhand notation | Expands into ... |
| --- | --- |
| \`'name'\` | \`{ view: 'name' }\`
| \`'name:<query>'\` | \`{ view: 'name', data: '<query>' }\`
| \`'name{ foo: size() / 2, bar: "qux" }'\` | \`{ view: 'name', foo: '=size() / 2', bar: 'qux' }\`

## List of views

If you need to specify a list of views, then you must use an array.
An array with view definitions can be passed anywhere a view is accepted as a value.

\`\`\`discovery-view
[
    {
        view: 'list',
        item: [
            'text:name',
            { view: 'badge', data: 'something.size()' }
        ]
    },
    'table{ limit: 10 }'
]
\`\`\`

## Tooltip

A canonical form for a toolup setup is an object with fields (all are optional):

\`\`\`js
{
    className: 'string',
    position: 'trigger', // 'trigger' or 'pointer' (default)
    content: 'a view setup'
}
\`\`\`

Instead of such object, any view notation can be used, i.e. a string, an object with \`view\` property, an array or a function:

| Shorhand notation | Expands into ... |
| --- | --- |
| \`'name'\` | \`{ content: 'name' }\`
| \`{ view: 'name' }\` | \`{ content: { view: 'name' } }\`
| \`['view', { view: 'name' }]\` | \`{ content: ['view', { view: 'name' }] }\`

A content is rendering into a popup container. When \`className\` is used it behaves the same as for a view but applies to a popup container.
`;function nv(r){r.page.define("views-showcase",{view:"context",data:()=>[...r.view.values],modifiers:[{view:"block",className:"sidebar",content:{view:"content-filter",content:{view:"menu",name:"view",limit:!1,data:`
                            .[name ~= #.filter]
                            .sort(name asc)
                            .({ ..., disabled: no options.usage })
                        `,item:"text-match:{ text: name, match: #.filter }"}}}],content:{view:"block",className:"content",data:"$[=> name=(#.view.name or #.id)]",content:{view:"switch",content:[{when:"no $ and #.id",content:'alert-warning:"View \\"" + #.id + "\\" not found"'},{when:"no $",content:['h1:"Views showcase"','alert:"\u2190 Select a view to get details"',{view:"markdown",source:R0}]},{content:[{view:"context",postRender:function(t,i,a,u){r.setPageRef(a.name),r.cancelScheduledRender(),u.id=r.pageRef}},La(r)]}]}}},{sidebar:!1})}function ms(r,t){let i=U("style",null,":host{display:none}"),a=new Set,u=Promise.resolve();return Array.isArray(t)&&(r.append(...t.map(c=>{switch(typeof c=="string"&&(c={type:"style",content:c}),c.type){case"style":case"inline":return U("style",{media:c.media},c.content);case"link":case"external":{let d,p,m=new Promise((x,S)=>{d=x,p=S});return a.add(m),U("link",{rel:"stylesheet",href:c.href,media:c.media,onerror(x){a.delete(m),p(x),a.size||i.remove()},onload(){a.delete(m),d(),a.size||i.remove()}})}default:throw new Error(`Unknown type "${c.type}" for a style descriptor`)}})),a.size&&(u=Promise.all(a),r.append(i))),u}var Yu=0,rv=[{view:"badge",when:'view.data != parent.(view or viewRoot).data or "data" in view.config',data:{text:"D"},tooltip:'text:"Data value was changed"'},{view:"badge",when:"view.context != parent.(view or viewRoot).context",data:{text:"C"},tooltip:'text:"Context value was changed"'}];function z0(r){let t=Xo(r),i=gr(r,t),a=0,u=0,{scrollTop:c,scrollLeft:d,clientWidth:p,clientHeight:m}=t,w=c+a,x=d+u,S=d+p,T=c+m,M=c+i.top,O=d+i.left,L=O+i.width,A=c,I=d;(M<w||M>T)&&(A=M-a),O<x?I=O-u:L>S&&(I=Math.max(O,d-(L-S))-u),t?.scrollTo(I,A)}function iv(){Yu=0}function ov(r,{selectTreeViewLeaf:t,detailsSidebarLeafExpanded:i}){return{view:"tree",when:"#.selectedView",data:"$[0]",className:"sidebar",limitLines:!1,itemConfig:{collapsible:"=not viewRoot",expanded:a=>i.has(a),onToggle:(a,u,c)=>a?i.add(c):i.delete(c)},item:{view:"switch",content:[{when:"viewRoot",content:{view:"block",className:"view-root",content:"text:viewRoot.name"}},{when:"$ = #.selectedView",content:[{view:"block",className:[a=>a.view?.skipped?"skipped":!1,"selected"],content:'text:view.config.view or "#root" | $ + "" = $ ? $ : "\u0192n"',postRender(a){requestAnimationFrame(()=>{r.querySelector(".sidebar").scrollTop=Yu,z0(a)})}},...rv]},{content:[{view:"link",className:a=>a.view?.skipped?"skipped":!1,data:'{ text: view.config.view or "#root" | $ + "" = $ ? $ : "\u0192n", href: false, view, self: $ }',onClick(a,u){Yu=r.querySelector(".sidebar")?.scrollTop||0,t(u.self)}},...rv]}]}}}var sv={view:"block",className:["content","props-config"],data:"#.view | view or viewRoot",content:[{view:"block",className:"content-section skip",when:"skipped",content:'block{ content: "badge:{ text: skipped }" }'},{view:"block",className:"content-section render",when:'config | view + "" != view',content:'source:{ content: config.view + "", syntax: "js" }'},{view:"block",when:"props != undefined",className:"content-section props",content:{view:"struct",expanded:2,data:"props"}},{view:"block",className:"content-section config",content:[{view:"struct",expanded:1,data:"config"},{view:"tree",data:(r,t)=>t.host.view.getViewConfigTransitionTree(r.config).deps,whenData:!0,expanded:3,children:"deps",item:{view:"struct",expanded:1,data:"value"}}]}]};function j0(r){r=r.replace(/^(?:\s*[\n]+)+?([ \t]*)/,"$1").trimRight(),r=r.replace(/\n[ \t]+\n/g,`

`);let t=r.split(/\n+/),i=Number(r.match(/^\s/)===null),a=1e3;for(var u=i;u<t.length;u++){let c=t[u].match(/^\s*/);if(c[0].length<a&&(a=c[0].length),a==0)break}return a>0&&(r=r.replace(new RegExp("(^|\\n) {"+a+"}","g"),"$1")),r}var av={view:"list",className:"data-flow-transitions",limit:1,when:".[view]",data:`
        [null]    // to show empty list on first render
        + .[view] // filter viewRoot
        .(
            $parent;
            $parentName: parent.view.config.view;
            $queryData: view | inputDataIndex != undefined ? inputData[inputDataIndex] : inputData;

            view | [
                ...'data' in config ? { inputData: $queryData, transition: config.data, name: config.view, view: $, $parent } : [],
                ...inputDataIndex != undefined ? { inputData, transition: \`$[\${inputDataIndex}]\`, name: \`\${$parentName} \u2192 \${config.view}\`, view: $, $parent } : []
            ]
        )
    `,whenData:"size() > 1",itemConfig:{when:!0},item:[{view:"block",className:"root-data",when:"inputData = ..parent.viewRoot[].data",content:'badge:"Root data"'},{view:"struct",data:"inputData"},{view:"block",className:"data-flow-transition",content:[{view:"switch",content:[{when:"$isString: #.isString; transition | $isString() or $ = undefined",content:{view:"context",data(r){return{content:j0(r.transition),refs:[]}},content:{view:"source",data:`{
                                    ...,
                                    syntax: "jora",
                                    lineNum: false
                                }`}}},{content:{view:"struct",data:"transition"}}]},{view:"block",className:"view-name",content:"text:name"}]}]},lv={view:"block",className:"content-section data",data:"#.view",content:[{view:"context",data:"..parent",content:av},{view:"context",content:{...av,limit:!1}},{view:"block",className:"root-data",when:"view or viewRoot | data = ([@] + @..parent).viewRoot[].data",content:'badge:"Root data"'},{view:"struct",expanded:1,data:"view or viewRoot | data"}]};function F0(r,t){if(r===null)return!0;for(let i of["top","left","width","height"])if(r[i]!==t[i])return!0;return!1}var Ea=r=>{let t=!1,i=null,a=null,u=null,c=null,d,p=new Set,m=new Map,w=new Map,x=U("div","cancel-hint view-alert view-alert-warning"),S=U("div",{class:"discovery-view-inspector-overlay",onclick:()=>I(a&&!u?a:null)},[x]),T=Lr(()=>{if(!t||u!==null)return;let j=r.view.getViewTree([P.el]),B=new Set([...w.keys()]);(function H(ie,W){for(let q of ie){if(!q.node||!q.view&&!q.viewRoot){q.children.length&&H(q.children,W);continue}let C=gr(q.node,W),Z=w.get(q.node)||null;Z===null?(Z={el:W.appendChild(document.createElement("div")),box:null},Z.el.className=q.viewRoot?"overlay view-root":"overlay",w.set(q.node,Z),m.set(Z.el,q)):B.delete(q.node),F0(Z.box,C)&&(Z.el.style.top=`${C.top}px`,Z.el.style.left=`${C.left}px`,Z.el.style.width=`${C.width}px`,Z.el.style.height=`${C.height}px`,Z.box=C),q.children.length&&(q.node.nodeType===1&&(Z.el.style.overflow=getComputedStyle(q.node).overflow!=="visible"?"hidden":"visible"),H(q.children,Z.el))}})(j,S);for(let H of B)w.get(H).el.remove(),w.delete(H);M()},{maxWait:0,wait:50}),M=()=>{let{x:j,y:B}=Wr.value;_([...r.dom.container.parentNode.elementsFromPoint(j|0,B|0)||[]].find(K=>m.has(K))||null)},O=j=>{(j.key==="Escape"||j.keyCode===27||j.which===27)&&r.inspectMode.set(!1)},L=()=>{t||(t=!0,document.addEventListener("scroll",T,Wn),document.addEventListener("keydown",O,!0),Wr.subscribe(T),d=setInterval(T,500),r.dom.container.append(S),T())},A=()=>{t&&(t=!1,clearInterval(d),document.removeEventListener("scroll",T,Wn),document.removeEventListener("keydown",O,!0),Wr.unsubscribe(T),R=!1,delete x.dataset.alt,S.remove(),k())},I=j=>{u=j||null,j?(P.show(),P.freeze(),delete x.dataset.alt):R?r.inspectMode.set(!1):(p.clear(),iv(),k(),T())},k=()=>{i&&i.classList.remove("hovered"),i=null,a=null,u=null,P.hide()},_=j=>{if(j===i)return;if(i!==null&&i.classList.remove("hovered"),i=j,j===null){c=setTimeout(k,100);return}j.classList.add("hovered");let B=m.get(j)||null;if(B===null){a=null;return}a!==null&&B.view===a.view||(a=B,clearTimeout(c),P.show())},P=new r.view.Popup({className:"discovery-inspect-details-popup",position:"pointer",hideIfEventOutside:!1,hideOnResize:!1,render(j){let B=u||a,K=[],H=B;for(;H!==null&&(H.view||H.viewRoot);)H!==B&&u!==null&&p.add(H),K.unshift(H),H=H.parent;r.view.render(j,{view:"context",modifiers:[ov(j,{selectTreeViewLeaf:I,detailsSidebarLeafExpanded:p})],content:{view:"context",data(ie,W){return W.isString=q=>typeof q=="string",ie},modifiers:{view:"block",className:"toolbar",content:[{view:"toggle-group",className:"stack-view-chain",name:"view",data:".({ value: $ })",value:"=$[-1].value",toggleConfig:{className:[ie=>ie.value.viewRoot?"view-root":!1,ie=>ie.value.view&&ie.value.view.skipped?"skipped":!1],content:['text:value | viewRoot.name or view.config.view | $ + "" = $ ? $ : "\u0192n"']}},{view:"button",when:u!==null,content:'text:"Close inspector"',onClick(){r.inspectMode.set(!1)}}]},content:[sv,{view:"block",className:["content","data-context"],content:[lv,{view:"block",className:"content-section context",data:"$[-1] | view or viewRoot",content:{view:"struct",expanded:1,data:"context"}}]}]}},K,{selectedView:u,host:r})}});r.action.define("startInspect",L),r.action.define("stopInspect",A),r.inspectMode.subscribeSync(j=>j?L():A());let R=!1};var Qu={};Ye(Qu,{localStorageEntry:()=>Ju,sessionStorageEntry:()=>B0});function H0(r){let t="__storage_test__"+Math.random(),i;try{i=window[r]}catch{return null}try{i.setItem(t,t),i.removeItem(t)}catch(a){if(!(a instanceof DOMException&&(a.code===22||a.code===1014||a.name==="QuotaExceededError"||a.name==="NS_ERROR_DOM_QUOTA_REACHED")&&i.length!==0))return null}return i}function uv(r){let t=new Map;return t.storage=H0(r),t.getOrCreate=i=>t.get(i)||W0(i,t),t.getOrCreate.available=t.storage!==null,t}var Ku=new Map([["session",uv("sessionStorage")],["local",uv("localStorage")]]),B0=Ku.get("session").getOrCreate,Ju=Ku.get("local").getOrCreate;addEventListener("storage",r=>{for(let[,t]of Ku)t.storage===r.storageArea&&t.has(r.key)&&t.get(r.key).forceSync()});function W0(r,t){let i=null,a=new tr,u=(d=t.storage.getItem(r))=>{i!==d&&a.emit("change",i=d)},c={get value(){return this.get()},get(){return i},set(d){t.storage&&(t.storage.setItem(r,d),u())},delete(){t.storage&&(t.storage.removeItem(r),u())},forceSync(){return t.storage&&u(),this.get()},on(d,p){return a.on("change",d),p&&d(i),()=>a.off("change",d)},off(d){a.off("change",d)}};return t.set(r,c),c.forceSync(),c}var fv=new Set([!0,!1,"auto","disabled"]),Ma=new Set,Oa=matchMedia("(prefers-color-scheme:dark)"),Zu=Ju("discoveryjs:darkmode"),cv=new Map([["true",!0],["false",!1],["auto","auto"]]),Aa=null;function $0(){for(let r of Ma)r.mode==="auto"&&r.set("auto")}function dv(r){let t=cv.has(r)?cv.get(r):null;if(Aa!==t){Aa=t;for(let i of Ma)i.persistent&&i.mode!=="disabled"&&i.set(t!==null?t:"auto")}}dv(Zu.value);Zu.on(dv);Oa.addListener($0);function pv(r,t){return(r==="off"||r==="disable")&&(r="disabled"),r!=="disabled"&&t&&Aa!==null&&(r=Aa),r}function hv(r){return fv.has(r)||(r="disabled"),r==="auto"?Oa.matches:r===!0}function gv(r,t){return hv(pv(r,t))}var Na=class{constructor(t,i){this.persistent=i?Zu:null,this.handlers=[],this.set(pv(t,i),!0),Ma.add(this)}subscribe(t,i){let a={fn:t};return this.handlers.push(a),i&&a.fn(this.value,this.mode),()=>{let u=this.handlers.indexOf(a);a=null,u!==-1&&this.handlers.splice(u,1)}}destroy(){Ma.delete(this)}set(t,i){let a=this.value,u=this.mode;fv.has(t)||(console.warn('Bad value "'+t+'" for darkmode, fallback to "disabled"'),t="disabled"),this.mode=typeof t=="boolean"?"manual":t,this.value=hv(t),this.mode!=="disabled"&&(this.persistent&&!i&&this.persistent.set(this.mode==="auto"?"auto":this.value),(this.value!==a||this.mode!==u)&&this.handlers.forEach(({fn:c})=>c(this.value,this.mode)))}toggle(t){switch(this.mode){case"auto":this.set(!Oa.matches);break;case"manual":this.set(t&&this.value!==Oa.matches?"auto":!this.value);break}}};var Xu={};Ye(Xu,{ContentRect:()=>vs});var q0=typeof ResizeObserver=="function",vs=class extends wn{constructor(){super(),this.el=null,q0&&(this.observer=new ResizeObserver(t=>{for(let i of t)this.set(i.contentRect)}))}observe(t){t=t||null,this.observer&&this.el!==t&&(this.el!==null&&this.observer.unobserve(this.el),t!==null&&this.observer.observe(t)),this.el=t}};var ys={};Ye(ys,{darkmodeToggle:()=>rc,indexPage:()=>ec,inspect:()=>ic,loadData:()=>nc,reportPage:()=>tc});function ec(r){r.nav.append({name:"index-page",when:"#.widget | pageId != defaultPageId",data:'{ text: "Index", href: pageLink(#.widget.defaultPageId) }'})}function tc(r){r.nav.append({name:"report-page",when:"#.widget | pageId != reportPageId",data:'{ text: "Make report", href: pageLink(#.widget.reportPageId) }'})}function nc(r){r.nav.append({name:"load-data",when:"#.actions.uploadFile and (#.dataLoaded or (#.widget | pageId != defaultPageId))",content:'text:"Open file\u2026"',onClick:"=#.actions.uploadFile"})}function rc(r){let t=()=>{};r.nav.menu.append({view:"block",className:["toggle-menu-item","dark-mode-switcher"],name:"dark-mode",when:'#.widget | darkmode.mode != "disabled"',postRender:(i,a,u,{widget:c,hide:d})=>{let p;t(),t=c.darkmode.subscribe((m,w)=>{let x=w==="auto"?"auto":m;x!==p&&(i.innerHTML="",p=x,c.view.render(i,{view:"toggle-group",beforeToggles:'text:"Color schema"',onChange:S=>{p=S,c.darkmode.set(S),d()},value:x,data:[{value:!1,text:"Light"},{value:!0,text:"Dark"},{value:"auto",text:"Auto"}]},null,{widget:c}))},!0)}})}function ic(r){r.nav.append({name:"inspect",onClick:()=>r.inspectMode.set(!r.inspectMode.value),postRender(t){t.title="Enable view inspection"}})}function oc(r,t){let i=[],a=(u,c,d)=>{switch(c){case"after":c=i.findIndex(p=>p.name===d),c===-1?c=i.length:c++;break;case"before":c=i.findIndex(p=>p.name===d),c===-1&&(c=i.length);break;default:(c===void 0||isNaN(c)||!isFinite(c))&&(c=i.length)}i.splice(Math.max(0,Math.min(i.length,c)),0,r.view.composeConfig(t,u))};return Object.assign(i,{insert:a,prepend(u){a(u,0)},append(u){a(u)},before(u,c){a(c,"before",u)},after(u,c){a(c,"after",u)},replace(u,c){let d=i.findIndex(p=>p.name===u);d!==-1?i[d]=c:a(c)},remove(u){let c=i.findIndex(d=>d.name===u);if(c!==-1)return i.splice(c,1)[0]}})}var Da=class{constructor(t){let i=U("div","powered-by-discoveryjs",["powered by ",U("a",{class:"view-link",href:"https://github.com/discoveryjs/discovery",target:"_blank"},"Discovery.js"),` ${Uo}`]);this.host=t,this.popup=null,this.data=null,this.context=null,this.primary=oc(t,"nav-button"),this.secondary=oc(t,"nav-button"),this.menu=oc(t,"menu-item"),this.config=[this.secondary,{view:"nav-button",name:"burger",data:()=>{let a=fi();return this.host.view.render(a,this.menu,this.host.data,{...this.context,hide:()=>this.popup&&this.popup.hide()}).then(()=>[...a.childNodes].filter(u=>u.nodeType===1||u.nodeType===3))},whenData:!0,onClick:(a,u)=>{this.popup||(this.popup=new this.host.view.Popup({className:"discovery-nav-popup"}),this.popup.el.addEventListener("click",({target:c})=>{c.closest("a[href]")&&setTimeout(()=>this.popup.hide(),50)},!0)),this.popup.toggle(a,c=>c.append(...u,i))}},this.primary],Object.assign(this,this.secondary),this.contentRect=new vs,this.contentRect.subscribe(({width:a,height:u})=>{let{container:c}=t.dom;c&&(c.style.setProperty("--discovery-nav-width",a+"px"),c.style.setProperty("--discovery-nav-height",u+"px"))})}render(t,i,a){this.contentRect.observe(t),t&&(this.data=i,this.context={...a,widget:this.host},this.host.view.setViewRoot(t,"nav",{config:this.config,data:this.data,context:this.context}),t.innerHTML="",this.host.view.render(t,this.config,this.data,this.context))}};var to=new Map,sc=null;function V0(){sc=null;for(let[r,t]of to.entries())console.groupCollapsed(`${r} (${t.length})`),t.forEach(i=>console.warn(...i)),console.groupEnd();to.clear()}function U0(r,...t){sc===null&&to.size===0&&(sc=setTimeout(V0,1)),to.has(r)?to.get(r).push(t):to.set(r,[t])}function yv(r,t,i){switch(typeof t){case"function":return t;case"string":return Object.assign(a=>a&&Object.hasOwnProperty.call(a,t)?a[t]:void 0,{getterFromString:`object[${JSON.stringify(t)}]`});default:throw new Error(`[Discovery] Bad type "${typeof key}" for ${i} in object marker "${r}" config (must be a string or a function)`)}}function mv(r,t,i,a){return t&&hasOwnProperty.call(t,i)?yv(r,t[i],`"${i}" option`):a}function vv(r,t,i){return(Array.isArray(t[i])?t[i]:[]).map(a=>yv(r,a,`"${i}" option`))}function G0(r){let{name:t,indexRefs:i,lookupRefs:a,page:u,getRef:c,getTitle:d}=r;u&&(c!==null?i.unshift(c):console.warn(`Option "ref" for "${t}" marker must be specified when "page" options is defined ("page" option ignored)`)),i.length>0&&a.unshift(M=>M);let p=new Set,m=new Map,w=new Map,x=new WeakMap;return{page:c!==null?u:null,mark:M=>{if(M===null||typeof M!="object"){console.warn(`Invalid value used for "${t}" marker (should be an object)`);return}p.add(M);for(let O of i){let L=O(M),A=L===null?"null":typeof L;if(A==="object"||A==="string"||A==="number"){if(!m.has(L)){m.set(L,M);continue}m.get(L)!==M&&U0(`The same reference value used for different objects for "${t}" marker`,`Reference value "${L}"`,{refGetter:O.getterFromString||O,ref:L,currentObject:m.get(L),newObject:M})}}},lookup:M=>{let O=M===null?"null":typeof M;if(O!=="object"&&O!=="string"&&O!=="number")return null;if(w.has(M))return w.get(M);if(x.has(M))return x.get(M);let L=null,A=null;if(p.has(M))A=M;else for(let I of a){let k=I(M);if(m.has(k)){A=m.get(k);break}}if(A!==null){if(w.has(A))L=w.get(A);else{let I=c!==null?c(A):null;L=Object.freeze({type:t,object:A,ref:I,title:d(A),href:u!==null&&I!==null?`#${encodeURIComponent(u)}:${encodeURIComponent(I)}`:null}),w.set(A,L)}M!==A&&(typeof M!="object"?w.set(M,L):x.set(M,L))}return L}}}var bs=class extends Rn{define(t,i){if(this.isDefined(t)){console.error(`[Discovery] Object marker "${t}" is already defined, new definition ignored`);return}i=i||{};let a=vv(t,i,"refs"),u=vv(t,i,"lookupRefs"),c=typeof i.page=="string"?i.page:null,d=mv(t,i,"ref",null),p=mv(t,i,"title",d||(()=>null));return super.define(t,G0({name:t,indexRefs:a,lookupRefs:u,page:c,getRef:d,getTitle:p}))}lookup(t,i){if(i)return this.get(i)?.lookup(t);for(let{lookup:a}of this.values){let u=a(t);if(u!==null)return u}return null}lookupAll(t){let i=[];for(let{lookup:a}of this.values){let u=a(t);u!==null&&i.push(u)}return i}};var bv="1.0.0-beta.7";var Y=function(r,t,i={}){return r.forEach(a=>i[a]=t),i},Vr=[2,5],jn=[1,13],fe=[1,41],de=[1,18],Ie=[1,7],_e=[1,8],Re=[1,10],ze=[1,11],je=[1,12],ve=[1,19],ye=[1,20],be=[1,21],we=[1,22],xe=[1,23],ke=[1,24],Se=[1,25],Ce=[1,29],Te=[1,32],Le=[1,33],Ee=[1,34],Me=[1,35],Oe=[1,36],Ae=[1,37],Ne=[1,42],De=[1,43],Pe=[1,40],ac=[5,18,56,59],jt=[1,47],nt=[1,55],rt=[1,54],bt=[1,48],wt=[1,49],xt=[1,50],kt=[1,51],Et=[1,52],At=[1,53],Je=[1,56],Qe=[1,57],Ze=[1,58],dt=[1,59],pt=[1,60],st=[1,61],at=[1,62],lt=[1,63],ut=[1,64],ht=[1,65],Nt=[1,66],no=[5,9,14,15,17,18,19,22,23,24,44,45,46,47,48,49,50,54,56,58,59,60,61,62,63,64,72,73,76,77,80],Ur=[5,10,11,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,56,59,66,74,75,77],lc=[1,67],uc=[1,68],cc=[1,69],fc=[1,70],dc=[1,71],pc=[1,72],wv=[1,73],Ke=[1,76],xv=[5,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,54,56,59,60,61,62,63,64,66,74,75,77,84],kv=[2,46],Sv=[1,82],Cv=[1,83],Tv=[2,48],Lv=[1,84],hc=[1,86],He=[5,10,11,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,54,56,59,60,61,62,63,64,66,74,75,77,84],Ev=[5,10,11,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,54,56,58,59,60,61,62,63,64,66,74,75,77,84],ro=[1,93],Mv=[1,94],ws=[1,95],Pa=[1,111],Ia=[1,110],Ov=[1,116],_a=[1,119],Ra=[1,120],za=[1,121],ja=[1,122],Fa=[1,123],Av=[9,14,15,17,19,22,23,24,44,45,46,47,48,49,50,54,58,60,61,62,63,64,72,73,74,75,76],Ha=[5,10,11,18,21,56,59,66,74,75,77],Nv=[5,10,11,18,21,29,30,41,56,59,66,74,75,77],Ba=[5,10,11,18,21,23,24,25,26,27,28,29,30,34,35,36,37,38,39,40,41,56,59,66,74,75,77],io=[56,66],Dv=[2,115],Pv=[11,56],dn=[66,77],Iv=[2,102],_v=[2,103],Wa=[5,10,11,18,21,25,26,27,28,29,30,41,56,59,66,74,75,77],gc=[5,10,11,18,21,25,26,27,28,29,30,34,35,40,41,56,59,66,74,75,77],$a=[5,10,11,18,21,25,26,27,28,29,30,34,35,36,37,38,39,40,41,56,59,66,74,75,77],Rv=[1,199],zv=[1,201],jv=[59,66],Fv=[1,211],Hv=[2,109],Y0=function(){return{yy:{},options:{ranges:!0},rules:[/^(?:\/\/.*?(?:\n|\r\n?|\u2028|\u2029|$)|\/\*(?:.|\s)*?(?:\*\/|$))/,/^\s+/,/^\//,/^<(?!=)/,/^/,(t,i)=>{if(t[0]!==(i==="template"?"}":"`"))return null;for(let a=1;a<t.length;a++){if(t[a]==="`")return a+1;if(t[a]==="$"&&t[a+1]==="{")return a+2;t[a]==="\\"&&a++}return null},(t,i)=>{if(t[0]!==(i==="template"?"}":"`"))return null;for(let a=1;a<t.length;a++){if(t[a]==="`")return a+1;if(t[a]==="$"&&t[a+1]==="{")return a+2;t[a]==="\\"&&a++}return null},/^/,/^\(/,/^\)/,/^\[/,/^\]/,/^\{/,/^\}/,/^(?:(true|false|null|undefined|Infinity|NaN)\b)/,/^and\b/,/^or\b/,/^has\s+no\b/,/^has\b/,/^in\b/,/^not\s+in\b/,/^not?\b/,/^(?:(asc|desc)(NA?|AN?)?\b)/,/^(?:(\d+\.|\.)?\d+([eE][-+]?\d+)?\b)/,/^0[xX][0-9a-fA-F]+/,/^(?:"(?:\\[\\"]|[^"])*")/,/^(?:'(?:\\[\\']|[^'])*')/,/^(?:\/(?:\\.|[^/])+\/[gimsu]*)/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^(?:\$(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^@/,/^#/,/^\$\$/,/^\$/,/^=>/,/^<(?!=)/,/^=/,/^!=/,/^~=/,/^>=/,/^<=/,/^</,/^>/,/^\.\.\(/,/^\.\(/,/^\.\[/,/^\.\.\./,/^\.\./,/^\./,/^\?/,/^,/,/^:/,/^;/,/^\-/,/^\+/,/^\*/,/^\//,/^\%/,/^(?:\|)/,/^./,/^$/],conditions:{preventPrimitive:{rules:[0,1,2,3,4,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0},template:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0}},performAction(t,i,a,u){let c=u;switch(a){case 0:{t.commentRanges.push(i.yylloc.range);break}case 1:break;case 2:{return this.popState(),32;break}case 3:{return this.popState(),36;break}case 4:{this.done=!1,this.popState();break}case 5:{let d=i.yytext.endsWith("`")?"TEMPLATE":"TPL_START";return i.yytext=this.toStringLiteral(i.yytext,!0,1+Number(d!=="TEMPLATE")),d==="TEMPLATE"&&t.pps(),d;break}case 6:{let d=i.yytext.endsWith("`")?"TPL_END":"TPL_CONTINUE";return i.yytext=this.toStringLiteral(i.yytext,!0,1+Number(d!=="TPL_END")),this.popState(),d==="TPL_END"&&t.pps(),d;break}case 7:{this.parseError("Unexpected end of input");break}case 8:return 58;case 9:{return t.pps(),59;break}case 10:return 54;case 11:{return t.pps(),56;break}case 12:return 76;case 13:{if(this.bracketStack[this.bracketStack.length-1]!=="TPL_END")return t.pps(),77;this.unput("}"),this.begin("template");break}case 14:{return i.yytext=this.toLiteral(i.yytext),50;break}case 15:return 29;case 16:return 30;case 17:return 28;case 18:return 26;case 19:return 25;case 20:return 27;case 21:return 22;case 22:return 84;case 23:{return t.pps(),i.yytext=Number(i.yytext),48;break}case 24:{return t.pps(),i.yytext=parseInt(i.yytext,16),48;break}case 25:{return t.pps(),i.yytext=this.toStringLiteral(i.yytext),47;break}case 26:{return t.pps(),i.yytext=this.toStringLiteral(i.yytext),47;break}case 27:{return t.pps(),i.yytext=this.toRegExp(i.yytext),49;break}case 28:{return t.pps(),i.yytext=this.ident(i.yytext),14;break}case 29:{return t.pps(),i.yytext=this.ident(i.yytext.slice(1)),15;break}case 30:{return t.pps(),44;break}case 31:{return t.pps(),45;break}case 32:{return t.pps(),46;break}case 33:{return t.pps(),9;break}case 34:return 19;case 35:{return this.fnOpened++,17;break}case 36:return 34;case 37:return 35;case 38:return 40;case 39:return 39;case 40:return 37;case 41:return 36;case 42:return this.fnOpened?(this.fnOpened--,18):38;case 43:return 64;case 44:return 61;case 45:return 62;case 46:return 80;case 47:{return t.pps(),63;break}case 48:{return t.pps(),60;break}case 49:return 41;case 50:return 66;case 51:return 11;case 52:return 10;case 53:return 23;case 54:return 24;case 55:return 31;case 56:return 32;case 57:return 33;case 58:return 21;case 59:{this.parseError(`Bad input on line ${i.yylloc.first_line} column ${i.yylloc.first_column}
`+this.showPosition(),{text:i.yytext,token:"BAD_TOKEN"});break}case 60:return 5}},setInput(t,i){return this.yy=i||this.yy||{},this._input=t,this._more=!1,this._backtrack=!1,this.done=!1,this.currentCondition="INITIAL",this.conditionStack=["INITIAL"],this.offset=0,this.yytext=this.match="",this.yyleng=0,this.yylineno=0,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.yylloc.range=[0,0],this},parseError(t,i){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,i)},input(){let t=this._input[this.offset],i=/\n|\r\n?|\u2028|\u2029/g.test(t);return this.offset++,this.yyleng++,this.yytext=this.match=this.yytext+t,i?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,t},lineColumnForOffset(t=this.offset,i=this._input,a=1,u=0){let c=/\n|\r\n?|\u2028|\u2029/g,d=a,p=u,m=0,w;for(;(w=c.exec(i))!==null;)if(w.index<t)d++,p=0,m=w.index+w[0].length;else{p+=t-m,m=-1;break}return m!==-1&&(p+=t-m),{line:d,column:p}},setMatch(t,i){let a=this._input.slice(t,i),u=t!==this.offset?this.lineColumnForOffset(t):{line:this.yylloc.last_line,column:this.yylloc.last_column},c=t!==i?this.lineColumnForOffset(i-t,a,u.line,u.column):u;this.yytext=this.match=a,this.yyleng=i-t,this.offset=i,this.yylineno=c.line-1,this.yylloc={first_line:u.line,first_column:u.column,last_line:c.line,last_column:c.column},this.yylloc.range=[t,i]},less(t){let i=this.offset-this.match.length;this.setMatch(i,i+t)},unput(t){let i=this.match.length-t.length;if(!this.match.startsWith(t,i))throw new Error("Lexer#unput() should receive a part of matched text only");this.less(i)},more(){this._more=!0},reject(){throw new Error("reject() is allowed only when options.backtrack_lexer = true")},showPosition(t=this.offset-this.match.length){let i=this._input,a=Math.max(t-20,0),u=Math.min(t+20,i.length),c=(a===0?"":"...")+i.slice(a,t).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n"),d=i.slice(t,u).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n")+(u===i.length?"":"...");return c+d+`
${"-".repeat(c.length)}^`},test_match(t,i){let a;this._more=!1,this._backtrack=!1,this.setMatch(this.offset,this.offset+t[0].length),this.matches=t;let u=this.performAction.call(this,this.yy,this,i,this.conditionStack[this.conditionStack.length-1]);return!u&&this._backtrack?(Object.assign(this,a),!1):(this.eof()||(this.done=!1),typeof u=="number"&&this.yy.parser?this.yy.parser.terminals_[u]:u||!1)},eof(){return this.offset===this._input.length},next(){if(this.done)return 1;this.eof()&&(this.done=!0),this._more||(this.yytext="",this.match="");let t,i;for(let a of this.conditions[this.currentCondition].rules){let u=this.rules[a],c=this._input.slice(this.offset),d;if(typeof u=="function"){let p=u(c,this.currentCondition);switch(typeof p){case"string":d=[p];break;case"number":d=[c.slice(0,p)];break;default:d=p}}else d=c.match(u);if(d&&(!t||d[0].length>t[0].length)){t=d,i=a;break}}if(t)return this.test_match(t,i);if(this.eof())return 1;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex(){let t;for(;!t;)t=this.next();return t},begin(t){this.currentCondition=t,this.conditionStack.push(t)},pushState(t){this.begin(t)},popState(){return this.conditionStack.pop(),this.currentCondition=this.conditionStack.length?this.conditionStack[this.conditionStack.length-1]:"INITIAL"},topState(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},stateStackSize(){return this.conditionStack.length}}}();function mc(){this.yy={}}mc.prototype={Parser:mc,lexer:Y0,symbols_:{error:2,root:3,block:4,EOF:5,definitions:6,e:7,def:8,$:9,";":10,":":11,$ident:12,ident:13,IDENT:14,$IDENT:15,query:16,FUNCTION_START:17,FUNCTION_END:18,FUNCTION:19,sortingCompareList:20,"|":21,NOT:22,"-":23,"+":24,IN:25,HAS:26,NOTIN:27,HASNO:28,AND:29,OR:30,"*":31,"/":32,"%":33,"=":34,"!=":35,"<":36,"<=":37,">":38,">=":39,"~=":40,"?":41,queryRoot:42,relativePath:43,"@":44,"#":45,$$:46,STRING:47,NUMBER:48,REGEXP:49,LITERAL:50,template:51,object:52,array:53,"[":54,sliceNotation:55,"]":56,"method()":57,"(":58,")":59,".":60,".(":61,".[":62,"..":63,"..(":64,arguments:65,",":66,templateString:67,templateStart:68,templateTail:69,templateEnd:70,templateContinue:71,TEMPLATE:72,TPL_START:73,TPL_CONTINUE:74,TPL_END:75,"{":76,"}":77,objectEntries:78,objectEntry:79,"...":80,arrayElements:81,arrayElement:82,sortingCompare:83,ORDER:84,sliceNotationComponent:85,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",9:"$",10:";",11:":",14:"IDENT",15:"$IDENT",17:"FUNCTION_START",18:"FUNCTION_END",19:"FUNCTION",21:"|",22:"NOT",23:"-",24:"+",25:"IN",26:"HAS",27:"NOTIN",28:"HASNO",29:"AND",30:"OR",31:"*",32:"/",33:"%",34:"=",35:"!=",36:"<",37:"<=",38:">",39:">=",40:"~=",41:"?",44:"@",45:"#",46:"$$",47:"STRING",48:"NUMBER",49:"REGEXP",50:"LITERAL",54:"[",56:"]",58:"(",59:")",60:".",61:".(",62:".[",63:"..",64:"..(",66:",",72:"TEMPLATE",73:"TPL_START",74:"TPL_CONTINUE",75:"TPL_END",76:"{",77:"}",80:"...",84:"ORDER"},productions_:[0,[3,2],[4,2],[4,1],[4,1],[4,0],[6,1],[6,2],[8,2],[8,4],[8,2],[8,4],[13,1],[12,1],[7,1],[7,3],[7,2],[7,1],[7,3],[7,4],[7,2],[7,2],[7,2],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,5],[16,1],[16,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,1],[42,3],[42,1],[42,1],[42,3],[42,4],[42,2],[42,2],[42,3],[42,3],[42,2],[42,2],[42,3],[43,3],[43,4],[43,4],[43,3],[43,3],[43,4],[43,4],[43,3],[43,3],[43,4],[57,3],[57,4],[57,3],[57,4],[65,1],[65,3],[51,1],[51,2],[69,1],[69,2],[69,2],[69,3],[67,1],[68,1],[71,1],[70,1],[52,2],[52,3],[52,4],[52,3],[52,4],[52,5],[78,1],[78,3],[79,1],[79,1],[79,1],[79,3],[79,3],[79,3],[79,3],[79,3],[79,5],[79,1],[79,2],[81,1],[81,3],[82,1],[82,1],[82,2],[53,2],[53,3],[53,4],[20,1],[20,3],[83,2],[55,1],[55,2],[55,2],[55,3],[85,1],[85,2]],table:[{3:1,4:2,5:Vr,6:3,7:4,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{1:[3]},{5:[1,44]},Y(ac,[2,3],{16:6,20:9,12:14,42:15,43:16,83:17,51:26,52:27,53:28,13:30,57:31,67:38,68:39,7:45,8:46,9:jn,14:fe,15:de,17:Ie,19:_e,22:Re,23:ze,24:je,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,54:Ce,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,72:Ne,73:De,76:Pe}),Y(ac,[2,4],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(no,[2,6]),Y(Ur,[2,14],{54:lc,60:uc,61:cc,62:fc,63:dc,64:pc,84:wv}),{4:74,6:3,7:4,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,18:Vr,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:75,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y([5,10,11,18,21,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,56,59,74,75,77],[2,17],{66:[1,78]}),{7:79,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:80,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:81,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(xv,kv,{10:Sv,11:Cv}),Y(xv,Tv,{10:Lv,11:[1,85],58:hc}),Y(He,[2,42]),Y(He,[2,43]),Y(Ur,[2,121]),Y(Ev,[2,13]),Y(He,[2,44]),Y(He,[2,45]),Y(He,[2,47]),Y(He,[2,49]),Y(He,[2,50]),Y(He,[2,51]),Y(He,[2,52]),Y(He,[2,53]),Y(He,[2,54]),Y(He,[2,55]),{7:91,9:Ke,11:ro,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,55:87,56:[1,88],57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,80:Mv,81:89,82:92,83:17,85:90},Y(He,[2,57],{58:ws}),Y(He,[2,58]),{6:97,7:96,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{12:100,13:98,14:fe,15:de,57:99},{4:101,6:3,7:4,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,59:Vr,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{4:102,6:3,7:4,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,56:Vr,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{12:100,13:103,14:fe,15:de,57:104},{4:105,6:3,7:4,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,59:Vr,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(He,[2,84]),{7:108,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,69:106,70:107,71:109,72:Ne,73:De,74:Pa,75:Ia,76:Pe,83:17},{6:114,8:5,9:Ov,12:117,13:118,14:fe,15:de,47:_a,48:Ra,50:za,54:ja,77:[1,112],78:113,79:115,80:Fa},Y(Ev,[2,12]),Y(He,[2,90]),Y(Av,[2,91]),{1:[2,1]},Y(ac,[2,2],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(no,[2,7]),{6:125,7:124,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:126,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:127,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:128,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:129,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:130,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:131,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:132,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:133,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:134,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:135,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:136,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:137,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:138,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:139,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:140,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:141,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:142,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:143,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:144,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:146,9:Ke,11:ro,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,55:147,56:[1,145],57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17,85:90},{12:100,13:148,14:fe,15:de,57:149},{4:150,6:3,7:4,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,59:Vr,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{4:151,6:3,7:4,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,56:Vr,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{12:100,13:152,14:fe,15:de,57:153},{4:154,6:3,7:4,8:5,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,59:Vr,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(Ur,[2,123]),{18:[1,155]},Y(Ha,[2,16],{23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(He,kv),Y(He,Tv,{58:hc}),{9:Ke,12:77,13:30,14:fe,15:de,16:157,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:156},Y(Nv,[2,20],{23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht}),Y(Ba,[2,21],{31:Je,32:Qe,33:Ze}),Y(Ba,[2,22],{31:Je,32:Qe,33:Ze}),Y(no,[2,8]),{7:158,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(no,[2,10]),{7:159,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:162,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,59:[1,160],60:Le,61:Ee,62:Me,63:Oe,64:Ae,65:161,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{56:[1,163]},Y(He,[2,118]),{56:[1,164],66:[1,165]},{11:ro,56:[2,124],85:166},Y(io,Dv,{85:167,11:ro,21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(io,[2,113]),Y(Pv,[2,128],{16:6,20:9,42:15,43:16,83:17,51:26,52:27,53:28,13:30,57:31,67:38,68:39,12:77,7:168,9:Ke,14:fe,15:de,17:Ie,19:_e,22:Re,23:ze,24:je,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,54:Ce,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,72:Ne,73:De,76:Pe}),Y(io,[2,116],{16:6,20:9,42:15,43:16,83:17,51:26,52:27,53:28,13:30,57:31,67:38,68:39,12:77,7:169,9:Ke,14:fe,15:de,17:Ie,19:_e,22:Re,23:ze,24:je,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,54:Ce,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,72:Ne,73:De,76:Pe}),{7:162,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,59:[1,170],60:Le,61:Ee,62:Me,63:Oe,64:Ae,65:171,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt,59:[1,172]},{7:173,8:46,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(He,[2,61],{58:ws}),Y(He,[2,62]),{58:hc},{59:[1,174]},{56:[1,175]},Y(He,[2,65],{58:ws}),Y(He,[2,66]),{59:[1,176]},Y(He,[2,85]),Y(He,[2,86]),{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt,70:177,71:178,74:Pa,75:Ia},{7:108,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,69:179,70:107,71:109,72:Ne,73:De,74:Pa,75:Ia,76:Pe,83:17},Y(He,[2,93]),Y(Av,[2,92]),Y(He,[2,94]),{66:[1,181],77:[1,180]},{8:46,9:Ov,12:117,13:118,14:fe,15:de,47:_a,48:Ra,50:za,54:ja,77:[1,182],78:183,79:115,80:Fa},Y(dn,[2,100]),Y(dn,Iv,{10:Sv,11:Cv}),Y(dn,_v,{10:Lv,11:[1,184]}),Y(dn,[2,104],{11:[1,185]}),{11:[1,186]},{11:[1,187]},{11:[1,188]},{7:189,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(dn,[2,111],{42:15,43:16,51:26,52:27,53:28,13:30,57:31,67:38,68:39,12:77,16:190,9:Ke,14:fe,15:de,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,54:Ce,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,72:Ne,73:De,76:Pe}),Y(Ha,[2,18],{23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),{7:191,8:46,9:jn,12:14,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(Wa,[2,23],{23:nt,24:rt,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht}),Y(Wa,[2,24],{23:nt,24:rt,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht}),Y(Wa,[2,25],{23:nt,24:rt,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht}),Y(Wa,[2,26],{23:nt,24:rt,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht}),Y(Nv,[2,27],{23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht}),Y([5,10,11,18,21,30,41,56,59,66,74,75,77],[2,28],{23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht}),Y(Ba,[2,29],{31:Je,32:Qe,33:Ze}),Y(Ba,[2,30],{31:Je,32:Qe,33:Ze}),Y(Ur,[2,31]),Y(Ur,[2,32]),Y(Ur,[2,33]),Y(gc,[2,34],{23:nt,24:rt,31:Je,32:Qe,33:Ze,36:st,37:at,38:lt,39:ut}),Y(gc,[2,35],{23:nt,24:rt,31:Je,32:Qe,33:Ze,36:st,37:at,38:lt,39:ut}),Y($a,[2,36],{23:nt,24:rt,31:Je,32:Qe,33:Ze}),Y($a,[2,37],{23:nt,24:rt,31:Je,32:Qe,33:Ze}),Y($a,[2,38],{23:nt,24:rt,31:Je,32:Qe,33:Ze}),Y($a,[2,39],{23:nt,24:rt,31:Je,32:Qe,33:Ze}),Y(gc,[2,40],{23:nt,24:rt,31:Je,32:Qe,33:Ze,36:st,37:at,38:lt,39:ut}),{11:[1,192],21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt},Y(He,[2,68]),{11:ro,21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt,56:[1,193],85:167},{56:[1,194]},Y(He,[2,71],{58:ws}),Y(He,[2,72]),{59:[1,195]},{56:[1,196]},Y(He,[2,75],{58:ws}),Y(He,[2,76]),{59:[1,197]},Y(Ur,[2,15]),Y(Ur,[2,122]),{54:lc,60:uc,61:cc,62:fc,63:dc,64:pc,84:wv},{10:[1,198],21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt},{10:Rv,21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt},Y(He,[2,80]),{59:[1,200],66:zv},Y(jv,[2,82],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(He,[2,56]),Y(He,[2,119]),{7:204,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,56:[1,202],57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,80:Mv,82:203,83:17},{56:[2,125]},{11:ro,56:[2,126],85:205},Y(Pv,[2,129],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(io,[2,117],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(He,[2,78]),{59:[1,206],66:zv},Y(He,[2,59]),{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt,59:[1,207]},Y(He,[2,63]),Y(He,[2,64]),Y(He,[2,67]),Y(He,[2,87]),{7:108,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,69:208,70:107,71:109,72:Ne,73:De,74:Pa,75:Ia,76:Pe,83:17},Y(He,[2,88]),Y(He,[2,95]),{9:Fv,12:212,13:118,14:fe,15:de,47:_a,48:Ra,50:za,54:ja,77:[1,209],79:210,80:Fa},Y(He,[2,97]),{66:[1,214],77:[1,213]},{7:215,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:216,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:217,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:218,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{7:219,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt,56:[1,220]},Y(dn,[2,112],{54:lc,60:uc,61:cc,62:fc,63:dc,64:pc}),Y(Ha,[2,19],{23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),{7:221,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(He,[2,69]),Y(He,[2,70]),Y(He,[2,73]),Y(He,[2,74]),Y(He,[2,77]),Y(no,[2,9]),Y(no,[2,11]),Y(He,[2,81]),{7:222,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(He,[2,120]),Y(io,[2,114]),Y(io,Dv,{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),{56:[2,127]},Y(He,[2,79]),Y(He,[2,60]),Y(He,[2,89]),Y(He,[2,96]),Y(dn,[2,101]),Y(dn,Iv),Y(dn,_v,{11:[1,223]}),Y(He,[2,98]),{9:Fv,12:212,13:118,14:fe,15:de,47:_a,48:Ra,50:za,54:ja,77:[1,224],79:210,80:Fa},Y(dn,Hv,{10:Rv,21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(dn,[2,105],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(dn,[2,106],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(dn,[2,107],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(dn,[2,108],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),{11:[1,225]},Y(Ha,[2,41],{23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(jv,[2,83],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),{7:226,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(He,[2,99]),{7:227,9:Ke,12:77,13:30,14:fe,15:de,16:6,17:Ie,19:_e,20:9,22:Re,23:ze,24:je,42:15,43:16,44:ve,45:ye,46:be,47:we,48:xe,49:ke,50:Se,51:26,52:27,53:28,54:Ce,57:31,58:Te,60:Le,61:Ee,62:Me,63:Oe,64:Ae,67:38,68:39,72:Ne,73:De,76:Pe,83:17},Y(dn,Hv,{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt}),Y(dn,[2,110],{21:jt,23:nt,24:rt,25:bt,26:wt,27:xt,28:kt,29:Et,30:At,31:Je,32:Qe,33:Ze,34:dt,35:pt,36:st,37:at,38:lt,39:ut,40:ht,41:Nt})],defaultActions:{44:[2,1],166:[2,125],205:[2,127]},performAction(r,t,i,a,u,c,d){let p=c.length-1;switch(u){case 1:return a.buildResult(c[p-1]);case 2:this.$={type:"Block",definitions:c[p-1],body:c[p],range:this._$.range};break;case 3:this.$={type:"Block",definitions:c[p],body:{type:"Placeholder",range:[d[p].range[1],d[p].range[1]]},range:this._$.range};break;case 4:this.$={type:"Block",definitions:[],body:c[p],range:this._$.range};break;case 5:this.$={type:"Block",definitions:[],body:{type:"Placeholder",range:[d[p].range[1],d[p].range[1]]},range:this._$.range};break;case 6:case 82:case 84:case 100:case 113:case 121:this.$=[c[p]];break;case 7:c[p-1].push(c[p]);break;case 8:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:d[p-1].range},value:null,range:this._$.range};break;case 9:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:d[p-3].range},value:c[p-1],range:this._$.range};break;case 10:this.$={type:"Definition",declarator:{type:"Declarator",name:c[p-1].name,range:d[p-1].range},value:null,range:this._$.range};break;case 11:this.$={type:"Definition",declarator:{type:"Declarator",name:c[p-3].name,range:d[p-3].range},value:c[p-1],range:this._$.range};break;case 12:case 13:this.$={type:"Identifier",name:c[p],range:this._$.range};break;case 14:case 42:case 43:case 54:case 55:case 115:break;case 15:this.$={type:"Function",arguments:[],body:c[p-1],legacy:!0,range:this._$.range};break;case 16:this.$={type:"Function",arguments:[],body:c[p],legacy:!1,range:this._$.range};break;case 17:this.$={type:"SortingFunction",compares:c[p],range:this._$.range};break;case 18:this.$={type:"Pipeline",left:c[p-2],right:c[p],range:this._$.range};break;case 19:this.$={type:"Pipeline",left:c[p-3],right:{type:"Block",definitions:c[p-1],body:c[p]},range:this._$.range};break;case 20:case 21:case 22:this.$={type:"Unary",operator:c[p-1],argument:c[p],range:this._$.range};break;case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:this.$={type:"Binary",operator:c[p-1],left:c[p-2],right:c[p],range:this._$.range};break;case 41:this.$={type:"Conditional",test:c[p-4],consequent:c[p-2],alternate:c[p],range:this._$.range};break;case 44:this.$={type:"Data",range:this._$.range};break;case 45:this.$={type:"Context",range:this._$.range};break;case 46:this.$={type:"Current",range:this._$.range};break;case 47:this.$={type:"Arg1",range:this._$.range};break;case 48:this.$={type:"Reference",name:c[p],range:this._$.range};break;case 49:case 50:case 51:case 52:case 90:case 91:case 92:case 93:this.$={type:"Literal",value:c[p],range:this._$.range};break;case 53:this.$={type:"Template",values:c[p],range:this._$.range};break;case 56:this.$={type:"SliceNotation",value:null,arguments:c[p-1],range:this._$.range};break;case 57:case 61:this.$={type:"GetProperty",value:null,property:c[p],range:this._$.range};break;case 58:case 62:this.$={type:"MethodCall",value:null,method:c[p],range:this._$.range};break;case 59:this.$={type:"Parentheses",body:c[p-1],range:this._$.range};break;case 60:this.$={type:"Parentheses",body:{type:"Block",definitions:c[p-2],body:c[p-1]},range:this._$.range};break;case 63:this.$={type:"Map",value:null,query:c[p-1],range:this._$.range};break;case 64:this.$={type:"Filter",value:null,query:c[p-1],range:this._$.range};break;case 65:this.$={type:"MapRecursive",value:null,query:{type:"GetProperty",value:null,property:c[p]},range:this._$.range};break;case 66:this.$={type:"MapRecursive",value:null,query:{type:"MethodCall",value:null,method:c[p]},range:this._$.range};break;case 67:this.$={type:"MapRecursive",value:null,query:c[p-1],range:this._$.range};break;case 68:this.$={type:"Pick",value:c[p-2],getter:null,range:this._$.range};break;case 69:this.$={type:"Pick",value:c[p-3],getter:c[p-1],range:this._$.range};break;case 70:this.$={type:"SliceNotation",value:c[p-3],arguments:c[p-1],range:this._$.range};break;case 71:this.$={type:"GetProperty",value:c[p-2],property:c[p],range:this._$.range};break;case 72:this.$={type:"MethodCall",value:c[p-2],method:c[p],range:this._$.range};break;case 73:this.$={type:"Map",value:c[p-3],query:c[p-1],range:this._$.range};break;case 74:this.$={type:"Filter",value:c[p-3],query:c[p-1],range:this._$.range};break;case 75:this.$={type:"MapRecursive",value:c[p-2],query:{type:"GetProperty",value:null,property:c[p]},range:this._$.range};break;case 76:this.$={type:"MapRecursive",value:c[p-2],query:{type:"MethodCall",value:null,method:c[p]},range:this._$.range};break;case 77:this.$={type:"MapRecursive",value:c[p-3],query:c[p-1],range:this._$.range};break;case 78:this.$={type:"Method",reference:c[p-2],arguments:[],range:this._$.range};break;case 79:this.$={type:"Method",reference:c[p-3],arguments:c[p-1],range:this._$.range};break;case 80:this.$={type:"Method",reference:{type:"Reference",name:c[p-2]},arguments:[],range:this._$.range};break;case 81:this.$={type:"Method",reference:{type:"Reference",name:c[p-3]},arguments:c[p-1],range:this._$.range};break;case 83:case 101:case 114:case 122:c[p-2].push(c[p]);break;case 85:this.$=[c[p-1],...c[p]];break;case 86:case 124:this.$=[null,c[p]];break;case 87:case 126:this.$=[c[p-1],c[p]];break;case 88:this.$=[null,c[p-1],...c[p]];break;case 89:this.$=[c[p-2],c[p-1],...c[p]];break;case 94:case 97:this.$={type:"Object",properties:[],range:this._$.range};break;case 95:this.$={type:"Object",properties:c[p-1],range:this._$.range};break;case 96:this.$={type:"Object",properties:c[p-2],range:this._$.range};break;case 98:this.$={type:"Block",definitions:c[p-2],body:{type:"Object",properties:c[p-1]},range:this._$.range};break;case 99:this.$={type:"Block",definitions:c[p-3],body:{type:"Object",properties:c[p-2]},range:this._$.range};break;case 102:this.$={type:"ObjectEntry",key:{type:"Current"},value:null,range:this._$.range};break;case 103:this.$={type:"ObjectEntry",key:{type:"Reference",name:c[p]},value:null,range:this._$.range};break;case 104:this.$={type:"ObjectEntry",key:c[p],value:null,range:this._$.range};break;case 105:this.$={type:"ObjectEntry",key:c[p-2],value:c[p],range:this._$.range};break;case 106:case 107:case 108:this.$={type:"ObjectEntry",key:{type:"Literal",value:c[p-2]},value:c[p],range:this._$.range};break;case 109:this.$={type:"ObjectEntry",key:{type:"Identifier",name:"$"+c[p-2].name},value:c[p],range:this._$.range};break;case 110:this.$={type:"ObjectEntry",key:c[p-3],value:c[p],range:this._$.range};break;case 111:this.$={type:"Spread",query:null,array:!1,range:this._$.range};break;case 112:this.$={type:"Spread",query:c[p],array:!1,range:this._$.range};break;case 116:this.$={type:"Spread",query:null,array:!0,range:this._$.range};break;case 117:this.$={type:"Spread",query:c[p],array:!0,range:this._$.range};break;case 118:this.$={type:"Array",elements:[],range:this._$.range};break;case 119:this.$={type:"Array",elements:c[p-1],range:this._$.range};break;case 120:this.$={type:"Array",elements:c[p-2],range:this._$.range};break;case 123:this.$={type:"Compare",query:c[p-1],order:c[p],range:this._$.range};break;case 125:this.$=[null,c[p-1],c[p]];break;case 127:this.$=[c[p-2],c[p-1],c[p]];break;case 128:this.$=null;break;case 129:this.$=c[p];break}},trace(...r){this.DEBUG&&Jison.print(...r)},parseError(r,t){if(t.recoverable)this.trace(r);else{let i=new Error(r);throw i.hash=t,i}},parse(r,...t){let p=H=>{L.length-=2*H,A.length-=H,I.length-=H},m=()=>{let H=w.lex()||1;return typeof H!="number"&&(H=this.symbols_[H]||H),H},w=Object.create(this.lexer),x=w.options&&w.options.ranges,S={...this.yy,parser:this,lexer:w};w.setInput(r,S),typeof S.parseError=="function"&&(this.parseError=S.parseError),typeof w.yylloc>"u"&&(w.yylloc={});let T=this.table,M={},O=w.yylloc,L=[0],A=[null],I=[O],k=[],_="",P=0,R=0,j=0,B,K;for(;;){let H=L[L.length-1],ie;if(this.defaultActions[H]?ie=this.defaultActions[H]:((B===null||typeof B>"u")&&(B=m()),ie=T[H]&&T[H][B]),!ie||!ie[0]){let C=function(Z){let X=L.length-1,ce=0;for(;;){if(2 .toString()in T[Z])return ce;if(Z===0||X<2)return!1;X-=2,Z=L[X],++ce}},W,q="";if(!j){let Z=[];for(let X in T[H])X in this.terminals_&&X>2&&Z.push("'"+this.terminals_[X]+"'");q=w.showPosition?"Parse error on line "+(P+1)+`:
`+w.showPosition()+`
Expecting `+Z.join(", ")+", got '"+(this.terminals_[B]||B)+"'":"Parse error on line "+(P+1)+": Unexpected "+(B===1?"end of input":"'"+(this.terminals_[B]||B)+"'"),this.parseError(q,{text:w.match,token:this.terminals_[B]||B,line:w.yylineno,loc:O,expected:Z})}if(j===3){if(B===1||K===1)throw new Error(q||"Parsing halted while starting to recover from another error.");R=w.yyleng,_=w.yytext,P=w.yylineno,O=w.yylloc,B=m()}if(W===!1)throw new Error(q||"Parsing halted. No suitable error recovery rule available.");p(W),K=B==2?null:B,B=2,H=L[L.length-1],ie=T[H]&&T[H][2],j=3}if(Array.isArray(ie[0])&&ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+H+", token: "+B);switch(ie[0]){case 1:L.push(B),A.push(w.yytext),I.push(w.yylloc),L.push(ie[1]),B=null,K?(B=K,K=null):(R=w.yyleng,_=w.yytext,P=w.yylineno,O=w.yylloc,j>0&&j--);break;case 2:{let W=this.productions_[ie[1]][1],q=I[I.length-(W||1)],C=I[I.length-1];M.$=A[A.length-W],M._$={first_line:q.first_line,last_line:C.last_line,first_column:q.first_column,last_column:C.last_column},x&&(M._$.range=[q.range[0],C.range[1]]);let Z=this.performAction.call(M,_,R,P,S,ie[1],A,I,...t);if(typeof Z<"u")return Z;W&&p(W),L.push(this.productions_[ie[1]][0]),A.push(M.$),I.push(M._$),L.push(T[L[L.length-2]][L[L.length-1]]);break}case 3:return!0}}}};var K0=function(t){function i(k,_){Object.entries(_).forEach(([P,R])=>k[P]=R(k[P]))}let a=new Map([["EOF",["<end of input>"]],["IDENT",["ident"]],["$IDENT",["$ident"]],["FUNCTION_START",["'<'"]],["FUNCTION_END",["'>'"]],["FUNCTION",["'=>'"]],["NOT",["'not'"]],["IN",["'in'"]],["HAS",["'has'"]],["NOTIN",["'not in'"]],["HASNO",["'has no'"]],["AND",["'and'"]],["OR",["'or'"]],["STRING",["string"]],["TPL_START",["template"]],["TEMPLATE",["template"]],["NUMBER",["number"]],["REGEXP",["regexp"]],["LITERAL",["'true'","'false'","'null'","'undefined'"]],["ORDER",["'asc'","'desc'","'ascN'","'descN'"]]]),u=k=>a.get(k)||`'${k}'`,c=function(k,_={},P){if(_.recoverable)this.trace(k);else{if(Array.isArray(_.inside)){let H=P.lexer.offset-P.lexer.match.length;P.lexer.setMatch(H+_.inside[0],H+_.inside[1])}let R=P.lexer.yylloc,j=[k.split(/\n/)[0],"",P.lexer.showPosition()],B=Array.isArray(_.expected)?[...new Set([].concat(..._.expected.map(H=>u(H.slice(1,-1)))))]:null;B&&j.push("","Expecting "+B.join(", ")+" got "+u(_.token));let K=new SyntaxError(j.join(`
`));throw K.details={rawMessage:k,text:_.text,token:_.token,expected:B,loc:{range:R.range,start:{line:R.first_line,column:R.first_column,offset:R.range[0]},end:{line:R.last_line,column:R.last_column,offset:R.range[1]}}},K}},d=new Set([`
`,"\r","\u2028","\u2029"]),p=new Map([["null",null],["false",!1],["true",!0],["Infinity",1/0],["NaN",NaN]]);Object.assign(t.lexer,{ident:k=>k.replace(/\\u[0-9a-fA-F]{4}/g,_=>String.fromCharCode(parseInt(_.slice(2),16))),toLiteral:k=>p.get(k),toStringLiteral(k,_=!1,P=1){let R=k.length-P,j="";for(let B=1;B<R;B++){if(!_&&d.has(k[B])&&this.parseError("Invalid line terminator",{inside:[B,B+1]}),k[B]!=="\\"){j+=k[B];continue}B===R-1&&this.parseError("Invalid backslash",{inside:[B,B+1]});let K=k[++B];switch(K){case"\r":B+=k[B+1]===`
`;break;case`
`:case"\u2028":case"\u2029":break;case"0":j+="\0";break;case"b":j+="\b";break;case"n":j+=`
`;break;case"r":j+="\r";break;case"f":j+="\f";break;case"t":j+="	";break;case"v":j+="\v";break;case"u":{let[H=""]=k.slice(B+1,B+5).match(/^[0-9a-f]*/i)||[];if(H.length===4){j+=String.fromCharCode(parseInt(H,16)),B+=4;break}this.parseError("Invalid Unicode escape sequence",{inside:[B-1,Math.min(B+1+H.length,R)]});break}case"x":{let[H=""]=k.slice(B+1,B+3).match(/^[0-9a-f]*/i)||[];if(H.length===2){j+=String.fromCharCode(parseInt(H,16)),B+=2;break}this.parseError("Invalid hexadecimal escape sequence",{inside:[B-1,Math.min(B+1+H.length,R)]});break}default:j+=K}}return j},toRegExp(k){let _=k.lastIndexOf("/")+1,P=k.substr(_);return P.split("").forEach((R,j,B)=>{let K=B.indexOf(R,j+1);K!==-1&&this.parseError("Duplicate flag in regexp",{inside:[_+K,_+K+1]})}),new RegExp(k.substr(1,k.lastIndexOf("/")-1),P)}}),i(t.lexer,{setInput:k=>function(_,P){let R=[];return P.commentRanges=R,P.buildResult=j=>({ast:j,commentRanges:R}),P.parseError=function(...j){return c.call(this,...j,P)},P.pps=()=>{this.eof()||this.begin("preventPrimitive")},this.fnOpened=0,this.fnOpenedStack=[],this.bracketStack=[],this.prevToken=null,this.prevYylloc={first_line:1,last_line:1,first_column:0,last_column:0,range:[0,0]},k.call(this,_,P)}});let m=new t.Parser;m.lexer={...t.lexer},m.yy={...t.yy};let w=["AND","OR","IN","NOTIN","HAS","HASNO"],x=[...w,"NOT","ORDER"],S=["+","-","*","/","%","|","=","!=","~=",">=","<=","<",">"],T=[null,":",";",",",".","..","(","[",".(","..(",".[","FUNCTION",...S,...w,"NOT"],M=new Set([",","?",":",";","EOF","]",")","}","TPL_CONTINUE","TPL_END",...S,...w,"ORDER"]),O=new Map(T.map(k=>[k,M]));O.set("{",new Set([","])),O.set("[",new Set([...M,","])),O.set("(",new Set([...M,","])),i(m.lexer,{lex:k=>function(){let P=this.offset,R=k.call(this);if(O.has(this.prevToken)&&O.get(this.prevToken).has(R)){let j={first_line:this.prevYylloc.last_line,last_line:this.yylloc.first_line,first_column:this.prevYylloc.last_column,last_column:this.yylloc.first_column,range:[this.prevYylloc.range[1],this.yylloc.range[0]]};if(this.unput(this.match),this.pushState("preventPrimitive"),this.done=!1,this.yytext="",this.yylloc=this.prevYylloc=j,P!==this.offset&&x.includes(R))switch(this._input[P]){case" ":case"	":j.last_column--,j.range[1]--;break;case`
`:{let B=this._input.lastIndexOf(`
`,P-1);j.last_line--,j.last_column=B===-1?j.last_column-1:P-B,j.range[1]--;break}}return this.prevToken="IDENT"}if(this.prevYylloc=this.yylloc,x.includes(R))switch(this._input[this.offset]){case" ":case"	":this.prevYylloc={...this.prevYylloc,last_column:this.prevYylloc.last_column+1,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break;case`
`:this.prevYylloc={...this.prevYylloc,last_line:this.prevYylloc.last_line+1,last_column:0,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break}return this.prevToken=R}});let L=new Map([["(",")"],[".(",")"],["..(",")"],["[","]"],[".[","]"],["{","}"],["TPL_START","TPL_END"]]),A=new Set([")","]","}","TPL_END"]),I=k=>function(){let P=k.call(this);if(A.has(P)){let R=this.bracketStack.pop();R!==P&&this.parseError(`Expected "${R}" got "${P}"`),this.fnOpened=this.fnOpenedStack.pop()||0}return L.has(P)&&(this.bracketStack.push(L.get(P)),this.fnOpenedStack.push(this.fnOpened),this.fnOpened=0),P};return i(t.lexer,{lex:I}),i(m.lexer,{lex:I}),{parse(k,_){return _?m.parse(k):t.parse(k)},*tokenize(k,_,P){let R=_?m:t,j=Object.create(R.lexer);for(j.setInput(k,{parser:R});!j.done;){let B={type:j.lex(),value:j.match,offset:j.yylloc.range[0]};P&&(B.loc={range:j.yylloc.range,start:{line:j.yylloc.first_line,column:j.yylloc.first_column},end:{line:j.yylloc.last_line,column:j.yylloc.last_column}}),yield B}}}}(new mc),qa=K0;var vc={};Ye(vc,{compile:()=>J0,stringify:()=>Z0,walk:()=>Q0});function J0(r,t){t.put(t.scope.arg1?"arguments[1]":"undefined")}function Q0(){}function Z0(r,t){t.put("$$")}var yc={};Ye(yc,{compile:()=>ex,stringify:()=>nx,suggest:()=>X0,walk:()=>tx});function X0(r,t){r.elements.length===0&&t.queryRoot(r.range[0]+1,r.range[1]-1)}function ex(r,t){t.put("["),t.list(r.elements,","),t.put("]")}function tx(r,t){t.list(r.elements)}function nx(r,t){t.put("["),t.list(r.elements,","),t.put("]")}var bc={};Ye(bc,{compile:()=>ix,stringify:()=>sx,suggest:()=>rx,walk:()=>ox});var Bv={in:"in","not in":"notIn",has:"has","has no":"hasNo",and:"and",or:"or","+":"add","-":"sub","*":"mul","/":"div","%":"mod","=":"eq","!=":"ne","<":"lt","<=":"lte",">":"gt",">=":"gte","~=":"match"};function Va(r,t,i){if(i.type==="Array"){if(i.elements.length===0){r.range([i.range[0]+1,i.range[1]-1],"value-subset",t,!1);return}let a=[];for(let{type:c,range:d,value:p}of i.elements)d&&(c==="Literal"||c==="Identifier")&&a.push(p);let u=a.length?r.literalList(a):!1;for(let{type:c,range:d,value:p}of i.elements)d&&(c==="Literal"||c==="Identifier"||c==="GetProperty"&&p===null)&&r.range(d,"value-subset",t,u)}}function rx(r,t){switch(r.operator){case"in":t.range(r.left.range,"in-value",r.right,null),Va(t,r.left,r.right);break;case"not in":Va(t,r.left,r.right);break;case"has":t.range(r.right.range,"in-value",r.left,null),Va(t,r.right,r.left);break;case"has no":Va(t,r.right,r.left);break;case"=":case"!=":t.range(r.right.range,"value",r.left,null);break}}function ix(r,t){if(!(r.operator in Bv)){t.error('Unknown operator "'+r.operator+'"',r);return}switch(r.operator){case"and":t.put("!");case"or":{let i=t.allocateVar();t.put(`${t.buildinFn("bool")}(${i}=`),t.node(r.left),t.put(`)?${i}:`),t.scope.captureCurrent.disabled=!0,t.node(r.right),t.scope.captureCurrent.disabled=!1;break}case"has no":t.put("!");case"has":t.put(t.buildinFn("in")),t.put("("),t.node(r.right),t.put(","),t.node(r.left),t.put(")");break;default:t.put(t.buildinFn(Bv[r.operator])),t.put("("),t.node(r.left),t.put(","),t.node(r.right),t.put(")")}}function ox(r,t){t.node(r.left),t.node(r.right)}function sx(r,t){t.node(r.left),/^[a-z]/i.test(r.operator)?(t.put(" "),t.put(r.operator),t.put(" ")):t.put(r.operator),t.node(r.right)}var wc={};Ye(wc,{compile:()=>lx,stringify:()=>cx,suggest:()=>ax,walk:()=>ux});function ax(r,t){r.body===null&&t.queryRoot(r.range[1])}function lx(r,t){r.definitions.length?t.createScope(()=>{t.put("(()=>{"),t.list(r.definitions),t.put("return "),t.nodeOrCurrent(r.body),t.put("})()")},(i,a)=>i+a+";"):r.body&&r.body.type==="Object"?(t.put("("),t.nodeOrCurrent(r.body),t.put(")")):t.nodeOrCurrent(r.body)}function ux(r,t){t.list(r.definitions),t.nodeOrNothing(r.body)}function cx(r,t){t.list(r.definitions),t.nodeOrNothing(r.body)}var xc={};Ye(xc,{compile:()=>fx,stringify:()=>px,walk:()=>dx});var Wv={"":"cmp",N:"cmpNatural",A:"cmpAnalytical",NA:"cmpNaturalAnalytical",AN:"cmpNaturalAnalytical"};function fx(r,t){r.order.startsWith("desc")&&t.put("-"),t.createScope(()=>{let i=Wv[r.order.slice(3+r.order.startsWith("desc"))]||Wv[""];t.put(t.buildinFn(i)),t.put("((_q=$=>("),t.node(r.query),t.put("))(a),_q(b))")},(i,a)=>i+a+",")}function dx(r,t){t.node(r.query)}function px(r,t){t.node(r.query),t.put(" "),t.put(r.order)}var kc={};Ye(kc,{compile:()=>hx,stringify:()=>mx,walk:()=>gx});function hx(r,t){t.put(t.buildinFn("bool")),t.put("("),t.node(r.test),t.scope.captureCurrent.disabled=!0,t.put(")?"),t.node(r.consequent),t.put(":"),t.node(r.alternate),t.scope.captureCurrent.disabled=!1}function gx(r,t){t.node(r.test),t.node(r.consequent),t.node(r.alternate)}function mx(r,t){t.node(r.test),t.put("?"),t.node(r.consequent),t.put(":"),t.node(r.alternate)}var Sc={};Ye(Sc,{compile:()=>vx,stringify:()=>bx,walk:()=>yx});function vx(r,t){t.put("context")}function yx(){}function bx(r,t){t.put("#")}var Cc={};Ye(Cc,{compile:()=>xx,stringify:()=>Sx,suggest:()=>wx,walk:()=>kx});function wx(r,t){r.range&&t.range(r.range,"var")}function xx(r,t){t.put("$")}function kx(){}function Sx(r,t){t.put("$")}var Tc={};Ye(Tc,{compile:()=>Cx,stringify:()=>Lx,walk:()=>Tx});function Cx(r,t){t.put("data")}function Tx(){}function Lx(r,t){t.put("@")}var Lc={};Ye(Lc,{compile:()=>Ex,stringify:()=>Ox,walk:()=>Mx});function Ex(r,t){r.name&&t.put("$"+r.name)}function Mx(){}function Ox(r,t){t.put(r.name?"$"+r.name:"$")}var Ec={};Ye(Ec,{compile:()=>Dx,stringify:()=>Ix,suggest:()=>Nx,walk:()=>Px});function Ua(r,t){return{type:"GetProperty",value:r,property:t}}function Ga(r){return{type:"Identifier",name:r}}var Ax=["data","context","ctx","array","idx","index"];function Nx(r,t){r.value===null&&t.range(r.declarator.range,"path")}function Dx(r,t){if(r.declarator.name===null){t.node(r.declarator),t.nodeOrCurrent(r.value),t.put(";");return}if(t.scope.own.includes(r.declarator.name)){t.error(`Identifier "$${r.declarator.name}" has already been declared`,r.declarator);return}if(Ax.includes(r.declarator.name)){t.error(`Identifier "$${r.declarator.name}" is reserved for future use`,r.declarator);return}t.put("const "),t.node(r.declarator),t.put("="),t.node(r.value||Ua(null,Ga(r.declarator.name))),t.put(";"),t.scope.push(r.declarator.name),t.scope.own.push(r.declarator.name)}function Px(r,t){t.node(r.declarator),t.nodeOrNothing(r.value)}function Ix(r,t){t.node(r.declarator),r.value!==null&&(t.put(":"),t.node(r.value)),t.put(";")}var Mc={};Ye(Mc,{compile:()=>_x,stringify:()=>zx,walk:()=>Rx});function _x(r,t){t.put(t.buildinFn("filter")),t.put("("),t.nodeOrCurrent(r.value),t.createScope(()=>{t.put(",$=>"),t.node(r.query)},(i,a)=>(t.put(")"),i+"("+a+",")),t.put(")")}function Rx(r,t){t.nodeOrNothing(r.value),t.node(r.query)}function zx(r,t){t.nodeOrNothing(r.value),t.put(".["),t.node(r.query),t.put("]")}var Oc={};Ye(Oc,{compile:()=>jx,stringify:()=>Hx,walk:()=>Fx});function jx(r,t){t.createScope(()=>{t.scope.arg1=!0,t.put("function($){return "),t.node(r.body),t.put("}")},(i,a)=>i+a+",")}function Fx(r,t){t.node(r.body)}function Hx(r,t){r.legacy?(t.put("<"),t.node(r.body),t.put(">")):(t.put("=>"),t.node(r.body))}var Ac={};Ye(Ac,{compile:()=>Wx,stringify:()=>qx,suggest:()=>Bx,walk:()=>$x});function Bx(r,t){t.range(r.property.range,"path",r.value||void 0,!r.value),r.value===null&&t.range(r.property.range,"var"),r.range&&r.value===null&&r.property.range[0]!==r.range[0]&&t.queryRoot(r.range[0])}function Wx(r,t){t.put(t.buildinFn("map")),t.put("("),t.nodeOrCurrent(r.value),t.put(","),r.property.type==="Identifier"?t.put(JSON.stringify(r.property.name)):t.node(r.property),t.put(")")}function $x(r,t){t.nodeOrNothing(r.value),t.node(r.property)}function qx(r,t){t.nodeOrNothing(r.value)&&t.put("."),t.node(r.property)}var Nc={};Ye(Nc,{compile:()=>Vx,stringify:()=>Gx,walk:()=>Ux});function Vx(r,t){t.put(r.name)}function Ux(){}function Gx(r,t){t.put(r.name)}var Dc={};Ye(Dc,{compile:()=>Yx,stringify:()=>Jx,walk:()=>Kx});function Yx(r,t){t.put(typeof r.value=="string"?JSON.stringify(r.value):String(r.value))}function Kx(){}function Jx(r,t){t.put(typeof r.value=="string"?JSON.stringify(r.value):String(r.value))}var Pc={};Ye(Pc,{compile:()=>Qx,stringify:()=>Xx,walk:()=>Zx});function Qx(r,t){t.put(t.buildinFn("map")),t.put("("),t.nodeOrCurrent(r.value),t.createScope(()=>{t.put(",$=>"),t.node(r.query)},(i,a)=>(t.put(")"),i+"("+a+",")),t.put(")")}function Zx(r,t){t.nodeOrNothing(r.value),t.node(r.query)}function Xx(r,t){t.nodeOrNothing(r.value),t.put(".("),t.node(r.query),t.put(")")}var Ic={};Ye(Ic,{compile:()=>ek,stringify:()=>nk,walk:()=>tk});function ek(r,t){t.put(t.buildinFn("mapRecursive")),t.put("("),t.nodeOrCurrent(r.value),t.createScope(()=>{t.put(",$=>"),t.node(r.query)},(i,a)=>(t.put(")"),i+"("+a+",")),t.put(")")}function tk(r,t){t.nodeOrNothing(r.value),t.node(r.query)}function nk(r,t){t.nodeOrNothing(r.value),t.put(".."),t.isSimpleGetPropertyQuery(r.query)||t.isSimpleMethodCallQuery(r.query)?t.node(r.query):(t.put("("),t.node(r.query),t.put(")"))}var _c={};Ye(_c,{compile:()=>ik,stringify:()=>sk,suggest:()=>rk,walk:()=>ok});function rk(r,t){r.arguments.length===0&&t.queryRoot(r.range[1]-1)}function ik(r,t,i){t.tolerant&&t.put("(typeof "),r.reference.type==="Identifier"&&(t.usedMethods.has(r.reference.name)?t.usedMethods.get(r.reference.name).push(r.reference.range):t.usedMethods.set(r.reference.name,r.reference.range),t.put("m.")),t.node(r.reference),t.tolerant&&(t.put('==="function"?'),r.reference.type==="Identifier"&&t.put("m."),t.node(r.reference)),t.put("("),t.nodeOrCurrent(i),r.arguments.length&&(t.put(","),t.list(r.arguments,",")),t.put(")"),t.tolerant&&t.put(":undefined)")}function ok(r,t){t.node(r.reference),t.list(r.arguments)}function sk(r,t){t.node(r.reference),t.put("("),t.list(r.arguments,","),t.put(")")}var Rc={};Ye(Rc,{compile:()=>ak,stringify:()=>uk,walk:()=>lk});function ak(r,t){t.node(r.method,r.value)}function lk(r,t){t.nodeOrNothing(r.value),t.node(r.method)}function uk(r,t){t.nodeOrNothing(r.value)&&t.put("."),t.node(r.method)}var zc={};Ye(zc,{compile:()=>fk,stringify:()=>pk,suggest:()=>ck,walk:()=>dk});function ck(r,t){r.properties.length===0&&t.queryRoot(r.range[0]+1,r.range[1]-1)}function fk(r,t){t.put("{"),t.list(r.properties,","),t.put("}")}function dk(r,t){t.list(r.properties)}function pk(r,t){t.put("{"),t.list(r.properties,","),t.put("}")}var jc={};Ye(jc,{compile:()=>mk,stringify:()=>yk,suggest:()=>gk,walk:()=>vk});var hk=new Set(["Literal","Identifier","Reference","Current"]);function gk(r,t){if(r.value===null)switch(r.key.type){case"Identifier":t.range(r.range,"path"),t.range(r.range,"var");break;case"Current":case"Reference":t.range(r.range,"var");break}}function mk(r,t){let i=r.value;switch(r.key.type){case"Current":return;case"Literal":t.node(r.key);break;case"Identifier":t.node(r.key),i=i||Ua(null,Ga(r.key.name));break;case"Reference":t.node(r.key.name),i=i||r.key;break;default:t.put("["),t.node(r.key),t.put("]")}t.put(":"),t.node(i)}function vk(r,t){t.node(r.key),t.nodeOrNothing(r.value)}function yk(r,t){if(hk.has(r.key.type)){if(t.node(r.key),r.value===null)return}else t.put("["),t.node(r.key),t.put("]");t.put(":"),t.node(r.value)}var Fc={};Ye(Fc,{compile:()=>bk,stringify:()=>xk,walk:()=>wk});function bk(r,t){t.put("("),t.node(r.body),t.put(")")}function wk(r,t){t.node(r.body)}function xk(r,t){t.put("("),t.node(r.body),t.put(")")}var Hc={};Ye(Hc,{compile:()=>Sk,stringify:()=>Tk,suggest:()=>kk,walk:()=>Ck});function kk(r,t){if(r.getter===null){let i=r.range[1]-1;t.range([i,i],"key",r.value,!1),t.queryRoot(i)}else(r.getter.type==="GetProperty"||r.getter.type==="Reference"||r.getter.type==="Literal"&&typeof r.getter.value=="string")&&t.range(r.getter.range,"key",r.value,!1)}function Sk(r,t){t.put(t.buildinFn("pick")),t.put("("),t.node(r.value),r.getter&&(t.put(","),t.node(r.getter)),t.put(")")}function Ck(r,t){t.node(r.value),r.getter!==null&&t.node(r.getter)}function Tk(r,t){t.node(r.value),t.put("["),r.getter!==null&&t.node(r.getter),t.put("]")}var Bc={};Ye(Bc,{compile:()=>Lk,stringify:()=>Mk,walk:()=>Ek});function Lk(r,t){t.createScope(()=>{t.put("($=>("),t.node(r.right),t.put("))")},(i,a)=>i+a+";"),t.put("("),t.node(r.left),t.put(")")}function Ek(r,t){t.node(r.left),t.node(r.right)}function Mk(r,t){t.node(r.left),t.put("|"),t.node(r.right)}var Wc={};Ye(Wc,{compile:()=>Ak,stringify:()=>Dk,suggest:()=>Ok,walk:()=>Nk});function Ok(r,t){t.queryRoot(r.range[1])}function Ak(r,t){t.put("$")}function Nk(){}function Dk(){}var $c={};Ye($c,{compile:()=>Ik,stringify:()=>Rk,suggest:()=>Pk,walk:()=>_k});function Pk(r,t){r.range&&t.range(r.range,"var")}function Ik(r,t){if(!t.scope.includes(r.name.name)&&t.tolerant){t.put("(typeof $"),t.node(r.name),t.put('!=="undefined"?$'),t.node(r.name),t.put(":undefined)");return}t.put("$"),t.node(r.name)}function _k(r,t){t.node(r.name)}function Rk(r,t){t.put("$"),t.node(r.name)}var qc={};Ye(qc,{compile:()=>zk,stringify:()=>Fk,walk:()=>jk});function zk(r,t){t.put(t.buildinFn("slice")),t.put("("),t.nodeOrCurrent(r.value),r.arguments.slice(0,3).forEach(i=>{t.put(","),i?t.node(i):t.put("undefined")}),t.put(")")}function jk(r,t){t.nodeOrNothing(r.value);for(let i of r.arguments.slice(0,3))i&&t.node(i)}function Fk(r,t){let[i,a,u]=r.arguments;t.nodeOrNothing(r.value),t.put("["),i&&t.node(i),t.put(":"),a&&t.node(a),u&&(t.put(":"),t.node(u)),t.put("]")}var Vc={};Ye(Vc,{compile:()=>Hk,stringify:()=>Wk,walk:()=>Bk});function Hk(r,t){t.put("(a, b)=>{let _q;return "),t.list(r.compares,"||"),t.put("||0}")}function Bk(r,t){t.list(r.compares)}function Wk(r,t){t.list(r.compares,",")}var Uc={};Ye(Uc,{compile:()=>qk,stringify:()=>Uk,suggest:()=>$k,walk:()=>Vk});function $k(r,t){r.query===null&&t.queryRoot(r.range[1])}function qk(r,t){if(r.array){t.put("..."),t.put(t.buildinFn("ensureArray")),t.put("("),t.nodeOrCurrent(r.query),t.put(")");return}t.put("..."),t.nodeOrCurrent(r.query)}function Vk(r,t){t.nodeOrNothing(r.query)}function Uk(r,t){t.put("..."),t.nodeOrNothing(r.query)}var Gc={};Ye(Gc,{compile:()=>Yk,stringify:()=>Jk,suggest:()=>Gk,walk:()=>Kk});function Gk(r,t){for(let[i,a]of Object.entries(r.values))a===null&&t.queryRoot(r.values[Number(i)-1].range[1])}function Yk(r,t){for(let[i,a]of Object.entries(r.values)){let u=Number(i);a!==null&&(u!==0&&t.put("+"),u%2===0?t.put('"'+$v(a.value,Qk)+'"'):(t.put("("),t.node(a),t.put(")")))}}function Kk(r,t){for(let i of r.values)i!==null&&t.node(i)}function Jk(r,t){let i=r.values.length-1;for(let[a,u]of Object.entries(r.values)){let c=Number(a);c%2===0?(t.put(c===0?"`":"}"),t.put($v(u.value,Zk)),t.put(c===i?"`":"${")):u!==null&&t.node(u)}}var Qk=new Map([["\b","\\b"],[`
`,"\\n"],["\r","\\r"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\u2028","\\u2028"],["\u2029","\\u2029"],["\\","\\\\"],['"','\\"']]),Zk=new Map([["\b","\\b"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\\","\\\\"],["$","\\$"]]);function $v(r,t){let i="";for(let a=0;a<r.length;a++)i+=t.get(r[a])||r[a];return i}var Yc={};Ye(Yc,{compile:()=>Xk,stringify:()=>t2,walk:()=>e2});function Xk(r,t){switch(r.operator){case"no":case"not":t.put("!"),t.put(t.buildinFn("bool")),t.put("("),t.node(r.argument),t.put(")");break;case"+":case"-":t.put(r.operator),t.node(r.argument);break;default:t.error('Unknown operator "'+r.operator+'"',r)}}function e2(r,t){t.node(r.argument)}function t2(r,t){t.put(r.operator),r.operator!=="-"&&r.operator!=="+"&&t.put(" "),t.node(r.argument)}var n2={Arg1:vc,Array:yc,Binary:bc,Block:wc,Compare:xc,Conditional:kc,Context:Sc,Current:Cc,Data:Tc,Declarator:Lc,Definition:Ec,Filter:Mc,Function:Oc,GetProperty:Ac,Identifier:Nc,Literal:Dc,Map:Pc,MapRecursive:Ic,Method:_c,MethodCall:Rc,Object:zc,ObjectEntry:jc,Parentheses:Fc,Pick:Hc,Pipeline:Bc,Placeholder:Wc,Reference:$c,SliceNotation:qc,SortingFunction:Vc,Spread:Uc,Template:Gc,Unary:Yc},xs=r=>new Map(Object.entries(n2).map(([t,i])=>[t,i[r]]).filter(([,t])=>typeof t=="function")),r2={};xs("build").forEach((r,t)=>r2[t]=r);var Kc=xs("compile"),Jc=xs("walk"),Qc=xs("stringify"),Zc=xs("suggest");function ks(r,t){function i(d){if(Jc.has(d.type))u(d),Jc.get(d.type)(d,a),c(d);else throw new Error('Unknown node type "'+d.type+'"')}let a={node:i,nodeOrNothing(d){d!==null&&i(d)},list(d){d.forEach(i)}},u=()=>{},c=()=>{};typeof t=="function"&&(t={enter:t}),t&&(typeof t.enter=="function"&&(u=t.enter),typeof t.leave=="function"&&(c=t.leave)),i(r)}function qv(r,t){return t>=0&&t<r.length&&/[a-zA-Z_$0-9]/.test(r[t])}function Xc(r,t){let i=r.charCodeAt(t);return i===9||i===10||i===13||i===32}function i2(r,t,i){for(;t<i;t++)if(!Xc(r,t))return!1;return!0}function o2(r,t,i,a,u){let c=[];for(let d=0;d<a.length;d++){let[p,m]=a[d];if(p>=t)break;p<r||(c.push(r,p),r=m)}return(r!==i.length||!u)&&c.push(r,t),c}function s2(r,t,i,a){let u=[];for(let c=0;c<r.length;c++){let[d,p,m,w]=r[c];if(i2(t,d,p)){for(;d>=0&&Xc(t,d-1);)d--;for(;p<t.length&&Xc(t,p);)p++;if(qv(t,d-1)){if(d===p)continue;d++}if(qv(t,p)){if(d===p)continue;p--}}let x=o2(d,p,t,i,a);for(let S=0;S<x.length;S+=2)u.push([x[S],x[S+1],m,w])}return u}function a2(r){let t=null,i=[],a=Object.assign(new Map,{literalList:i}),u=(d,p)=>{a.has(d)?a.get(d).push(p):a.set(d,[p])},c={range(d,p,m=t,w=!0){u(m,[...d,p,w])},literalList(d){let p="l"+i.length;return i.push([p,d]),p},queryRoot(d,p=d){u(t,[d,p,"var",!0]),u(t,[d,p,"path",!0])}};return ks(r,d=>{if(Zc.has(d.type)){let p=t;t=d,Zc.get(d.type)(d,c),t=p}}),a}function Ya(r,{ast:t,commentRanges:i}){let a=a2(t),u=i.length&&i[i.length-1][1]===r.length&&!/[\r\n]$/.test(r);for(let[c,d]of a)a.set(c,s2(d,r,i,u));return a}function l2(r){return r.type==="GetProperty"}function u2(r){return r.type==="MethodCall"}function Ka(r){function t(u){if(Qc.has(u.type))Qc.get(u.type)(u,a);else throw new Error('Unknown node type "'+u.type+'"')}let i=[],a={isSimpleGetPropertyQuery:l2,isSimpleMethodCallQuery:u2,put(u){i.push(u)},node:t,nodeOrNothing(u){if(u!==null)return t(u),!0},list(u,c){if(!c){u.forEach(t);return}u.forEach((d,p)=>{p>0&&a.put(c),t(d)})}};return t(r),i.join("")}var Gn=Object.hasOwnProperty,c2=Object.prototype.toString;function oo(r,t){return t!==void 0&&(Array.isArray(t)?t.forEach(i=>r.add(i)):r.add(t)),r}function Vv(r,t){return r&&Gn.call(r,t)?r[t]:void 0}function Er(r){return r!==null&&typeof r=="object"&&r.constructor===Object}function Ja(r){return c2.call(r)==="[object RegExp]"}function Uv(r){return r&&Gn.call(r,"length")}function ef(r,t,i){let a=Object.assign(Object.create(SyntaxError.prototype),i),u=new Error;return a.name=r,a.message=t,Object.defineProperty(a,"stack",{get:function(){return(u.stack||"").replace(/^(.+\n){1,3}/,r+": "+t+`
`)}}),a}function Qa(r,t=!1,i=null){function a(A){let I="s"+m.length;return m.push(A?[I,A]:[I]),I}function u(A){let I=w.get(A);return I||w.set(A,I=a()),I}function c(A,I,k,_,P){let R=[A,I,JSON.stringify(k)];if(k==="var"){if(!L.scope.length)return;R.push(JSON.stringify(L.scope))}else _||(_=a()),R.push(_),P&&R.push(typeof P=="string"?P:u(P));return S.push(R),_}function d(A,I){let k=L.scope,_=T.length;if(L.scope=L.scope.slice(),L.scope.own=[],L.scope.firstCurrent=null,L.scope.captureCurrent=[],L.scope.arg1=k.arg1||!1,A(),L.scope.captureCurrent.length){let P=L.scope.captureCurrent.reduce((j,B)=>c(...B,j),void 0),R="stat("+P+",$)";L.scope.firstCurrent?T[L.scope.firstCurrent]=R:T[_]=I(T[_],R)}L.scope=k}function p(A,I){let k=!1;if(i!==null){if(i.has(A))for(let[_,P,R,j]of i.get(A))R==="var"?c(_,P,R):j===!0?L.scope.captureCurrent.push([_,P,R]):(k||(k=u(A),T.push("stat("+k+",")),R&&c(_,P,R,k,j));A.type==="Current"&&L.scope.firstCurrent===null&&L.scope.captureCurrent.disabled!==!0&&(L.scope.firstCurrent=T.length)}if(Kc.has(A.type))Kc.get(A.type)(A,L,I);else throw new Error('Unknown node type "'+A.type+'"');k&&T.push(")")}let m=[],w=new WeakMap,x=[],S=[],T=["((data,context)=>{","const $=data;",{toString(){return x.length>0?"let "+x+`;
`:""}},{toString(){return m.length>0?[`const stat=(s,v)=>(s.add(v),v);
`,"const "+m.map(([A,I])=>A+"=new Set("+(I?JSON.stringify(I):"")+")")+`;
`].join(""):""}},{toString(){let A=i&&Array.isArray(i.literalList)&&i.literalList.map(([I,k])=>I+"="+JSON.stringify(k));return A&&A.length?"const "+A+`;
`:""}},"return "],M={},O=new Set,L={tolerant:t,usedMethods:new Map,buildinFn(A){return O.add(A),"f."+A},scope:[],createScope:d,error:(A,I)=>{let k=new SyntaxError(A);if(I&&I.range&&(k.details={loc:{range:I.range}}),!t)throw k},allocateVar(){let A="tmp"+x.length;return x.push(A),A},put:A=>T.push(A),node:p,nodeOrCurrent(A,I){p(A||{type:"Current"},I)},list(A,I,k){A.forEach((_,P)=>{P>0&&T.push(I),p(_,k)})}};if(d(()=>p(r),(A,I)=>(T.push(")"),"("+I+","+A)),!t&&L.usedMethods.size){let{usedMethods:A}=L;T.unshift(" this.assertMethods(m)||"),M.assertMethods=function(I){for(let[k,_]of A.entries())if(!Gn.call(I,k))return()=>{throw Object.assign(new Error(`Method "${k}" is not defined`),{details:{loc:{range:_}}})}}}i!==null&&T.push(`
,[`+S.map(A=>"["+A+"]")+"]");try{let A=new Function("f,m","return"+T.join("")+"})");return Object.assign(A.bind(M),{toString(){return A.toString().replace(/^(\S+\s+)anonymous([^)\s]+)\s*\)/,"$1query$2)")}})}catch(A){throw ef("SyntaxError","Jora query compilation error",{compiledSource:T.join(""),details:A})}}var ln=(r,t)=>t<r.length?r.charCodeAt(t):0,Za=r=>r===43||r===45,Gr=r=>r>=48&&r<=57,tf=r=>r===9||r===10||r===12||r===13||r===32,nf=r=>r>32&&r<256&&(r<65||r>90)&&(r<97||r>122)&&(r<48||r>57)&&r!==43&&r!==45||r===8470;function f2(r,t,i){return Za(r)?Gr(t)?2:t===46&&Gr(i)?3:0:Gr(r)?1:0}function rf(r,t){for(;Gr(ln(r,t));)t++;return t}function d2(r,t,i){let a=ln(r,t);if(Za(a)&&(a=ln(r,t+=1)),Gr(a)&&(t=rf(r,t+1),a=ln(r,t)),a===46&&Gr(ln(r,t+1))){if(i)return t;let u=t+2;if(u=rf(r,u),ln(r,u)===46)return t;t=u}if(a=ln(r,t),a===69||a===101){let u=0;a=ln(r,t+1),Za(a)&&(u=1,a=ln(r,t+2)),Gr(a)&&(t=rf(r,t+1+u+1))}return t}function Gv(r,t,i,a){if(t>=r.length)return 0;let u=ln(r,t);if(tf(u)){let m=t+1;for(;tf(ln(r,m));)m++;return 1|m-t<<3}if(nf(u)||a&&Za(u)){let m=t+1,w=u;do u=w,w=ln(r,m++);while(nf(w)||w===u);return 2|m-t-1<<3}let c=ln(r,t+1),d=ln(r,t+2);if(f2(u,c,d))return 3|d2(r,t,i)-t<<3;let p=t;do u=c,c=d,d=ln(r,3+p++);while(p<r.length&&!tf(u)&&!nf(u)&&!Gr(u));return 4|p-t<<3}function Yv(r,t,i){let a=0,u=0,c=!1,d=!1,p=0,m=0,w=!0;do{let x=Gv(r,a,c,d),S=Gv(t,u,c,d),T=x&7,M=x>>3,O=S&7,L=S>>3;if(T!==O&&w){if((T===1||T===2)&&(O===3||O===4)){p=1,m=T,a+=M;continue}if((O===1||O===2)&&(T===3||T===4)){p=-1,m=O,u+=L;continue}}if(w=!1,T!==O)return T<O?-1:1;if(c=!1,d=!1,T===0)return p;let A=M<L?M:L,I=M-L,k=0;for(;k<A;k++){let _=r[a+k],P=t[u+k];if(_!==P){I=_<P?-1:1;break}}if(T===1||T===2)I!==0&&(p===0||T>m)&&(m=T,p=I),c=r[a+M-1]===".";else if(T===3){if(d=!0,I!==0){let _=r.substr(a,M)-t.substr(u,L);if(_!==0)return i?-_:_;if(p===0||T>m){let P=ln(r,a),R=ln(t,u),j=P===45?-1:1;m=T,p=P!==R&&(P===45||R===43)?-1:P!==R&&(P===43||R===45)?1:(M!==L?M<L:I<0)?-j:j,i&&(p=-p)}}}else{if(I!==0){if(k<A){let _=r[a+k].toLowerCase(),P=t[u+k].toLowerCase();if(_!==P)return _<P?-1:1}return I}c=r[a+M-1]==="."}a+=M,u+=L}while(!0)}function Kv(r,t){let i=typeof r,a=typeof t,u=0;return(i==="number"||i==="string")&&(a==="number"||a==="string")&&(u=Math.sign(Yv(String(r),String(t),!1))),u}function Jv(r,t){let i=typeof r,a=typeof t,u=0;return(i==="number"||i==="string")&&(a==="number"||a==="string")&&(u=Math.sign(Yv(String(r),String(t),!0))),u}var p2=1,h2=2,so=3,Ss=4,g2=5,m2=6,v2=7,y2=8;function Yr(r){switch(typeof r){case"boolean":return p2;case"number":return r!==r?h2:so;case"string":return Ss;case"object":return r===null?g2:m2;case"undefined":return y2;default:return v2}}var En=Object.freeze({ensureArray:b2,bool:hi,and:(r,t)=>hi(r)?t:r,or:(r,t)=>hi(r)?r:t,add:w2,sub:x2,mul:k2,div:S2,mod:C2,eq:T2,ne:L2,lt:E2,lte:M2,gt:O2,gte:A2,in:Xa,notIn:(r,t)=>!Xa(r,t),has:(r,t)=>Xa(t,r),hasNo:(r,t)=>!Xa(t,r),cmp:N2,cmpAnalytical:D2,cmpNatural:P2,cmpNaturalAnalytical:I2,match:_2,pick:R2,map:of,mapRecursive:z2,some:sf,filter:j2,slice:F2});function b2(r){return Array.isArray(r)?r:[r]}function hi(r){if(Array.isArray(r))return r.length>0;if(Er(r)){for(let t in r)if(Gn.call(r,t))return!0;return!1}return Boolean(r)}function w2(r,t){return Array.isArray(r)||Array.isArray(t)?[...new Set([].concat(r,t))]:r+t}function x2(r,t){if(Array.isArray(r)){let i=new Set(r);return Array.isArray(t)?t.forEach(a=>i.delete(a)):i.delete(t),[...i]}return r-t}function k2(r,t){return r*t}function S2(r,t){return r/t}function C2(r,t){return r%t}function T2(r,t){return Object.is(r,t)}function L2(r,t){return!Object.is(r,t)}function E2(r,t){return r<t}function M2(r,t){return r<=t}function O2(r,t){return r>t}function A2(r,t){return r>=t}function Xa(r,t){return Er(t)?Gn.call(t,r):t&&typeof t.indexOf=="function"?t.indexOf(r)!==-1:!1}function N2(r,t){let i=Yr(r),a=Yr(t);return i!==a?i<a?-1:1:r<t?-1:r>t?1:0}function D2(r,t){let i=Yr(r),a=Yr(t);return i!==a?i<a?-1:1:i===so?t-r:r<t?-1:r>t?1:0}function P2(r,t){let i=Yr(r),a=Yr(t);return(i===so||i===Ss)&&(a===so||a===Ss)?Kv(r,t):i!==a?i<a?-1:1:r<t?-1:r>t?1:0}function I2(r,t){let i=Yr(r),a=Yr(t);return(i===so||i===Ss)&&(a===so||a===Ss)?Jv(r,t,!0):i!==a?i<a?-1:1:r<t?-1:r>t?1:0}function _2(r,t){return typeof t=="function"?sf(r,t):Ja(t)?sf(r,t.test.bind(t)):t==null}function R2(r,t=()=>!0){if(!!r){if(typeof t=="function"){if(Array.isArray(r)||typeof r=="string"){for(let i=0;i<r.length;i++)if(t(r[i],i))return r[i]}for(let i in r)if(Gn.call(r,i)&&t(r[i],i))return r[i];return}return Array.isArray(r)||typeof r=="string"?isFinite(t)?r[t<0?r.length+Number(t):Number(t)||0]:void 0:Gn.call(r,t)?r[t]:void 0}}function of(r,t){let i=typeof t=="function"?t:a=>Vv(a,t);return Array.isArray(r)?[...r.reduce((a,u)=>oo(a,i(u)),new Set)]:r!==void 0?i(r):r}function z2(r,t){let i=new Set;return oo(i,of(r,t)),i.forEach(a=>oo(i,of(a,t))),[...i]}function sf(r,t){return Array.isArray(r)?r.some(i=>hi(t(i))):hi(t(r))}function j2(r,t){return Array.isArray(r)?r.filter(i=>hi(t(i))):hi(t(r))?r:void 0}function F2(r,t=0,i=r&&r.length,a=1){if(!Uv(r))return[];if(t=parseInt(t,10)||0,i=parseInt(i,10)||r.length,a=parseInt(a,10)||1,a!==1){let u=[];t=t<0?Math.max(0,r.length+t):Math.min(r.length,t),i=i<0?Math.max(0,r.length+i):Math.min(r.length,i);for(let c=a>0?t:i-1;c>=t&&c<i;c+=a)u.push(r[c]);return u}return typeof r=="string"?r.slice(t,i):Array.prototype.slice.call(r,t,i)}function H2(){}function B2(r){return r}function Qv(r){return{matched:r.slice(),start:r.index,end:r.index+r[0].length,input:r.input,groups:r.groups||null}}var W2=Zv(20)?1/0:Zv(10)?10:0;function Zv(r){return Array.from({length:r},(t,i)=>({idx:i})).sort((t,i)=>t.idx%2-i.idx%2).every((t,i)=>i<r/2?t.idx>>1===i:Math.ceil(r/2)+(t.idx>>1)===i)}function $2(r,t){return r.length<=W2?r.slice().sort(t):r.map((i,a)=>({value:i,idx:a})).sort((i,a)=>(i.value===void 0?a.value!==void 0:a.value===void 0?-1:t(i.value,a.value))||i.idx-a.idx).map(i=>i.value)}var Cs=Object.freeze({bool:En.bool,filter:En.filter,map:En.map,pick:En.pick,keys(r){return Object.keys(r||{})},values(r){let t=new Set;for(let i in r)Gn.call(r,i)&&oo(t,r[i]);return[...t]},entries(r){let t=[];for(let i in r)Gn.call(r,i)&&t.push({key:i,value:r[i]});return t},fromEntries(r){let t={};return Array.isArray(r)&&r.forEach(i=>{i&&(t[i.key]=i.value)}),t},size(r){return Er(r)?Object.keys(r).length:r&&r.length||0},sort(r,t){let i;return Array.isArray(r)?(typeof t=="function"?i=t.length===2?t:(a,u)=>{if(a=t(a),u=t(u),Array.isArray(a)&&Array.isArray(u)){if(a.length!==u.length)return a.length<u.length?-1:1;for(let c=0;c<a.length;c++){if(a[c]<u[c])return-1;if(a[c]>u[c])return 1}return 0}return a<u?-1:a>u}:i=En.cmp,$2(r,i)):r},reverse(r){return Array.isArray(r)?r.slice().reverse():r},slice(r,t,i){return En.slice(r,t,i)},group(r,t,i){typeof t!="function"&&(t=H2),typeof i!="function"&&(i=B2),Array.isArray(r)||(r=[r]);let a=new Map,u=[];return r.forEach(c=>{let d=t(c);Array.isArray(d)||(d=[d]),d.forEach(p=>{a.has(p)?a.get(p).add(i(c)):a.set(p,new Set([i(c)]))})}),a.forEach((c,d)=>u.push({key:d,value:[...c]})),u},split(r,t){return String(r).split(t)},join(r,t){return Array.isArray(r)?r.join(t):String(r)},match(r,t,i){let a=String(r),u=Ja(t)?t.flags:"";if(i||u.includes("g")){let d=[],p=new RegExp(t,(u||"").replace(/g|$/,"g")),m;for(;m=p.exec(a);)d.push(Qv(m));return d}let c=a.match(t);return c&&Qv(c)},reduce(r,t,i=void 0){return Array.isArray(r)?i!==void 0?r.reduce((a,u)=>t(u,a),i):r.reduce((a,u)=>t(u,a)):t(r,i)}});var q2=(r,t)=>r-t,V2=()=>!0,ao=class{constructor(t,i,a){this.maxSize=t||1/0,this.compare=i||q2,this.accept=a||V2,this.values=[]}add(t){let i=this.values.length+1;if(i>this.maxSize)this.compare(this.values[0],t)>0&&this.accept(t)&&(this.values[0]=t,this.heapify(0));else if(this.accept(t)&&(this.values.push(t),i===this.maxSize))for(let a=i-1;a>=0;a--)this.heapify(a)}heapify(t){let i=this.values.length;if(t>=i>>1)return;let a=2*t+1,u=2*t+2,c=this.values[t],d=this.compare(this.values[a],c)>0?a:t;u<i&&this.compare(this.values[u],this.values[d])>0&&(d=u),d!==t&&(this.values[t]=this.values[d],this.values[d]=c,this.heapify(d))}[Symbol.iterator](){return this.values.slice().sort(this.compare)[Symbol.iterator]()}};var U2={path:"property",key:"value",value:"value","in-value":"value","value-subset":"value",var:"variable"};function el(r,t){Object.keys(r).forEach(t.add,t)}function G2(r,t,i,a=new Set){let u=c=>{switch(typeof c){case"string":case"number":a.add(c);break}};switch(r){case"path":{let c=new Set;for(let d of t)if(Array.isArray(d))for(let p of d)Er(p)&&el(p,c);else Er(d)&&el(d,c);c.forEach(a.add,a);break}case"key":{let c=new Set;for(let d of t)d!==null&&typeof d=="object"&&!Array.isArray(d)&&el(d,c);c.forEach(a.add,a);break}case"value":for(let c of t)u(c);break;case"in-value":{let c=new Set;for(let d of t)Array.isArray(d)?d.forEach(u):Er(d)&&el(d,c);c.forEach(a.add,a);break}case"var":for(let c of t)a.add("$"+c);break;case"value-subset":{let c=new Set(i);for(let d of t)c.has(d)||u(d);break}}return a}function Xv(r,t,i,a=!1){let u=[];for(let[c,d,p,m,w=null]of i)if(t>=c&&t<=d&&(a||m.size||m.length)){let x=r.substring(c,d);/\S/.test(x)||(c=d=t,x=""),u.push({context:p,from:c,to:d,text:x,values:m,related:w})}return u}function ey(r,t){return typeof r=="function"?r:r===!0?t:!1}function ty(r){if(/^(["']).*\1$/.test(r))try{return r[0]==="'"&&(r=`"${r.slice(1,-1).replace(/\\.|"/g,t=>t==="\\'"?"'":t==='"'?'\\"':t)}"`),JSON.parse(r)}catch{}return r}function Y2(r){return t=>(typeof t=="string"?t:String(t)).toLowerCase().indexOf(r)!==-1}var af=(r,t)=>({stat(i,a){return Xv(r,i,t,a)},suggestion(i,a){let{limit:u=1/0,sort:c,filter:d}=a||{};c=ey(c,En.cmp),d=ey(d,Y2);let p=c&&isFinite(u)?ao:Set,m=Xv(r,i,t),w=new Map,x=[];for(let S of m){let{context:T,text:M,from:O,to:L,values:A,related:I}=S,k=U2[T];if(!w.has(k)){let P;switch(p){case ao:P=new ao(u,c,d&&d(ty(M)));break;case Set:P=new Set;break}w.set(k,{type:k,from:O,to:L,text:M,suggestions:P})}let{suggestions:_}=w.get(k);G2(T,A,I,_)}if(p===Set)for(let S of w.values()){let{suggestions:T}=S;if(c&&(T=[...T].sort(c)),d||isFinite(u)){let M=[],O=d?d(ty(S.text)):()=>!0;for(let L of T)if(O(L)&&M.push(L)>=u)break;T=M}S.suggestions=T}for(let S of w.values())S.suggestions=Array.isArray(S.suggestions)?S.suggestions:[...S.suggestions],S.suggestions.length&&x.push(S);return x.length?x:null}});var K2=new Map,J2=new Map,Q2=new Map,Z2=new Map;function X2(r,t){console.log(`[${r}]`),typeof t=="string"?console.log(t):t!==void 0&&console.dir(t,{depth:null}),console.log()}function lf(r,t,i,a){a=typeof a=="function"?a:Boolean(a)?X2:!1,a&&(a("========================="),a("Compile query from source",r));let u=qa.parse(r,i);a&&(a("AST",u.ast),a("Restored source",Ka(u.ast)));let c=t?Ya(r,u):null;if(a&&c){let p=S=>JSON.stringify(S).slice(1,-1),m=[].concat(...[...c.entries()].map(([S,T])=>T.map(M=>[S,...M]))),w=[],x=null;a("Stat/suggestion ranges",m.sort((S,T)=>S[1]-T[1]).map(([S,...T])=>{let[M,O,L,A]=T,I;if(M===w[0]&&O===w[1])I=" ".repeat(x.length);else{let k=p(r.slice(0,M)).length,_=p(r.substring(M,O)).length;w=T,x=" ".repeat(k)+(_?"~".repeat(_):"\\")+" "+M+":"+O,I=p(r)+`
`+x}return I+" ["+L+"] on "+S.type+(A===!0?" (current)":A&&A.type?" & "+A.type:"")}).join(`
`))}let d=Qa(u.ast,i,c);return a&&a("Compiled code",d.toString()),d}function e3(r,t){t=t||{};let i=Boolean(t.stat),a=Boolean(t.tolerant),u=t.methods?{...Cs,...t.methods}:Cs,c=i?a?Z2:J2:a?Q2:K2,d;return r=String(r),c.has(r)&&!t.debug?d=c.get(r):(d=lf(r,i,a,t.debug),c.set(r,d)),d=d(En,u),i?(p,m)=>af(r,d(p,m)):d}function t3(r){let t=new Map,i=new Map,a=new Map,u=new Map,c={...Cs};for(let[d,p]of Object.entries(r||{}))typeof p=="string"?Object.defineProperty(c,d,{configurable:!0,get(){let m=lf(p)(En,c),w=x=>m(x,null);return Object.defineProperty(c,d,{value:w}),w}}):c[d]=p;return function(p,m){m=m||{};let w=Boolean(m.stat),x=Boolean(m.tolerant),S=w?x?u:i:x?a:t,T;if(p=String(p),S.has(p)&&!m.debug)T=S.get(p);else{let M=lf(p,w,x,m.debug)(En,c);T=w?(O,L)=>af(p,M(O,L)):M,S.set(p,T)}return T}}var Mr=Object.assign(e3,{version:bv,buildin:En,methods:Cs,setup:t3,syntax:{tokenize:qa.tokenize,parse:qa.parse,suggest:Ya,walk:ks,stringify:Ka,compile:Qa}});function uf(r){let t=new bs,i=[],a=[],u=(S,T)=>t.lookup(S,T),c=S=>t.lookupAll(S),d=(S,T=!1)=>{typeof T=="boolean"&&(T={debug:T}),a.push({query:S,...T})},p=S=>{let T=[],M=typeof S;if(S&&(M==="object"||M==="string"))for(let O of i){let L=O(S);L&&T.push(L)}return T.length?T:null};function m(S,...T){let M=null;typeof T[T.length-1]=="function"&&(M=T.pop());let O=r.action.call(S,...T);return O&&M&&typeof O.then=="function"?O.then(M):M?M(O):O}let w={query:(...S)=>r.query(...S),pageLink:(S,T,M)=>r.encodePageHash(T,S,M),marker:u,markerAll:c,callAction:m,actionHandler:(S,...T)=>r.action.has(S)?()=>m(S,...T):void 0},x=Mr.setup(w);return{apply(){Object.assign(r,{objectMarkers:t,linkResolvers:i,resolveValueLinks:p,annotations:a,queryFnFromString:x})},methods:{rejectData(S,T){throw Object.assign(new Error(S),{renderContent:T})},lookupObjectMarker:u,lookupObjectMarkerAll:c,resolveValueLinks:p,defineObjectMarker(S,T){let{page:M,mark:O,lookup:L}=t.define(S,T)||{};if(!L)return()=>{};if(M!==null){if(!r.page.isDefined(T.page)){console.error(`[Discovery] Page reference "${T.page}" doesn't exist`);return}i.push(A=>{let I=L(A);if(I!==null)return{type:M,text:I.title,href:I.href,entity:I.object}}),d((A,I)=>{let k=L(A);if(k&&k.object!==I.host)return{place:"before",style:"badge",text:M,href:k.href}})}else d((A,I)=>{let k=L(A);if(k&&k.object!==I.host)return{place:"before",style:"badge",text:S}});return O},addValueAnnotation:d,addQueryHelpers(S){x=Mr.setup(w={...w,...S})},query(S,...T){return r.queryFn.call({queryFnFromString:x},S)(...T)}}}}var ny=new WeakMap,ry=["variable","property","value","method"],n3=(r,t)=>ry.indexOf(r.type)-ry.indexOf(t.type),r3=r=>(r=r.toLowerCase(),t=>t!==r&&(typeof t=="string"?t:String(t)).toLowerCase().indexOf(r)!==-1);function i3(r,t){return typeof r!="string"?String(r):(r=JSON.stringify(r),t[0]!=="'"?r:`'${r.slice(1,-1).replace(/\\.|'/g,i=>i==='\\"'?'"':i==="'"?"\\'":i)}'`)}function o3(r,t,i){if(t===i)return!0;let a=r.stat(t)||[],u=r.stat(i)||[];if(a.length!==u.length)return!1;for(let c=0;c<a.length;c++){let d=a[c],p=u[c];for(let m of Object.keys(d))if(d[m]!==p[m])return!1}return!0}function iy(r,t,i,a,u){try{let c=ny.get(r);if(!c||c.query!==t||c.data!==a||c.context!==u){let p={tolerant:!0,stat:!0};ny.set(r,c={query:t,data:a,context:u,offset:-1,suggestions:null,api:null}),c.api=r.queryFnFromString(t,p)(a,u)}if(c.api===null)return null;if(c.offset!==-1&&o3(c.api,c.offset,i))return c.suggestions;let d=c.api.suggestion(c.offset=i,{sort:!0,filter:r3,limit:50});if(d){c.suggestions=[];for(let p of d.sort(n3))c.suggestions.push(...p.suggestions.map(m=>({type:p.type,from:p.from,to:p.to,text:p.text,value:p.type==="value"?i3(m,p.text):m})))}else c.suggestions=null;return c.suggestions}catch(c){console.groupCollapsed("[Discovery] Error on getting suggestions for query"),console.error(c),console.groupEnd();return}}var oy=new WeakMap,lo=new WeakMap,s3=r=>r,a3=r=>Object.fromEntries(r);function cf(r,t,i){i?r.dataset[t]=i:delete r.dataset[t]}function l3(r,t,i,a){let u=r.page.get(t);return u&&Object.hasOwnProperty.call(u.options,i)?u.options[i]:a}function sy(r,t,i,a){let u=l3(r,t,i,a);return typeof u=="function"?u:a}var gi=class extends tr{constructor(t={}){super(),this.lib=ff,this.options=t||{};let{darkmode:i="disabled",darkmodePersistent:a=!1,defaultPageId:u,reportPageId:c,extensions:d,inspector:p=!1}=this.options;this.darkmode=new Na(i,a),this.inspectMode=new wn(!1),this.initDom(),this.action=new Go(null).on("define",()=>{this.context&&(this.scheduleRender("sidebar"),this.scheduleRender("page"))}).on("revoke",()=>{this.context&&(this.scheduleRender("sidebar"),this.scheduleRender("page"))}),this.view=new Yo(this),this.nav=new Da(this),this.preset=new Ko(this.view),this.page=new Jo(this).on("define",(m,w)=>{let{resolveLink:x}=w.options;if(typeof x<"u"&&console.warn('"resolveLink" in "page.define()" options is deprecated, use "page" option for "defineObjectMarker()" method in prepare function'),this.pageId===m&&this.pageHash!=="#"){let S=this.pageHash;this.pageHash="#",this.setPageHash(S),this.cancelScheduledRender()}}),lo.set(this,new Set),this.dataLoaded=!1,this.data=void 0,this.context=void 0,this.prepare=m=>m,uf(this).apply(),this.defaultPageId=u||"default",this.reportPageId=c||"report",this.pageId=this.defaultPageId,this.pageRef=null,this.pageParams={},this.pageHash=this.encodePageHash(this.pageId,this.pageRef,this.pageParams),this.apply(cs),this.apply(gs),this.options.defaultPage&&this.page.define(this.defaultPageId,this.options.defaultPage),d&&this.apply(d),p&&this.apply(Ea),this.nav.render(this.dom.nav,this.data,this.getRenderContext()),this.setContainer(this.options.container)}apply(t){Array.isArray(t)?t.forEach(i=>this.apply(i)):typeof t=="function"?t.call(window,this):t?this.apply(Object.values(t)):console.error("Bad type of extension:",t)}setPrepare(t){if(typeof t!="function")throw new Error("An argument should be a function");this.prepare=t}setData(t,i={},a){a=a||{};let u=Date.now(),c=uf(this),d=()=>{if(oy.get(this)!==p)throw new Error("Prevented by another setData()")},p=Promise.resolve().then(()=>(d(),this.prepare(t,c.methods)||t)).then(m=>{d(),this.dataLoaded=!0,this.data=m,this.context={...i,data:m},c.apply(),this.emit("data"),console.log(`[Discovery] Data prepared in ${Date.now()-u}ms`)});return oy.set(this,p),(!("render"in a)||a.render)&&p.then(()=>{this.scheduleRender("sidebar"),this.scheduleRender("page")}),p}async setDataProgress(t,i,a={setState(){},subscribeSync(){},finish(){}}){this.emit("startSetData",a.subscribeSync.bind(a)),await a.setState({stage:"prepare"}),await this.setData(t,i,{render:!1}),await a.setState({stage:"initui"}),this.scheduleRender("sidebar"),this.scheduleRender("page"),await Promise.all([this.dom.wrapper.parentNode?this.dom.ready:!0,lo.get(this).timer]),await a.finish()}unloadData(){!this.dataLoaded||(this.dataLoaded=!1,this.data=void 0,this.context=void 0,this.scheduleRender("sidebar"),this.scheduleRender("page"),this.emit("unloadData"))}resolveValueLinks(){return null}queryFn(t){switch(typeof t){case"function":return t;case"string":return this.queryFnFromString(t)}}query(t,i,a){switch(typeof t){case"function":return t(i,a);case"string":return this.queryFn(t)(i,a);default:return t}}queryBool(...t){return Mr.buildin.bool(this.query(...t))}queryToConfig(t,i){let{ast:a}=Mr.syntax.parse(i),u={view:t};if(a.type!=="Block")throw new SyntaxError('[Discovery] Widget#queryToConfig(): query root must be a "Block"');if(a.body.type!=="Object")throw new SyntaxError('[Discovery] Widget#queryToConfig(): query root must return an "Object"');for(let c of a.body.properties){if(c.type!=="ObjectEntry")throw new SyntaxError('[Discovery] Widget#queryToConfig(): unsupported object entry type "'+c.type+'"');let d,p=c.value;switch(c.key.type){case"Literal":d=c.key.value;break;case"Identifier":d=c.key.name,p||=c.key;break;case"Reference":d=c.key.name.name,p||=c.key;break;default:throw new SyntaxError('[Discovery] Widget#queryToConfig(): unsupported object key type "'+c.key.type+'"')}if(d==="view"||d==="postRender")throw new SyntaxError('[Discovery] Widget#queryToConfig(): set a value for "'+d+'" property in shorthand notation is prohibited');d==="when"||d==="data"||d==="whenData"?u[d]=p.type==="Literal"&&typeof p.value!="string"?p.value:Mr.syntax.stringify(p):u[d]=p.type==="Literal"&&(typeof p.value!="string"||p.value[0]!=="=")?p.value:"="+Mr.syntax.stringify(p)}return u}querySuggestions(t,i,a,u){return iy(this,t,i,a,u)}pathToQuery(t){return t.map((i,a)=>i==="*"?a===0?"values()":".values()":typeof i=="number"||!/^[a-zA-Z_][a-zA-Z_$0-9]*$/.test(i)?a===0?`$[${JSON.stringify(i)}]`:`[${JSON.stringify(i)}]`:a===0?i:"."+i).join("")}getQueryEngineInfo(){return{name:"jora",version:Mr.version,link:"https://github.com/discoveryjs/jora"}}initDom(){let t=U("div","discovery init"),i=t.attachShadow({mode:"open"}),a=ms(i,this.options.styles),u=i.appendChild(U("div"));this.dom={},this.dom.ready=Promise.all([a]),this.dom.wrapper=t,this.dom.root=i,this.dom.container=u,u.classList.add("discovery-root","discovery"),u.append(this.dom.nav=U("div","discovery-nav discovery-hidden-in-dzen"),this.dom.sidebar=U("nav","discovery-sidebar discovery-hidden-in-dzen"),this.dom.content=U("main","discovery-content",[this.dom.pageContent=U("article")])),this.dom.detachDarkMode=this.darkmode.subscribe(c=>u.classList.toggle("discovery-root-darkmode",c),!0),this.dom.ready.then(()=>{getComputedStyle(this.dom.wrapper).opacity,this.dom.wrapper.classList.remove("init")})}setContainer(t){t instanceof Node?t.append(this.dom.wrapper):this.dom.wrapper.remove()}disposeDom(){typeof this.dom.detachDarkMode=="function"&&(this.dom.detachDarkMode(),this.dom.detachDarkMode=null),this.dom.container.remove(),this.dom=null}addGlobalEventListener(t,i,a){return document.addEventListener(t,i,a),()=>document.removeEventListener(t,i,a)}addHostElEventListener(t,i,a){let u=this.dom.container;return u.addEventListener(t,i,a),()=>u.removeEventListener(t,i,a)}scheduleRender(t){let i=lo.get(this);if(!i.has(t)&&(i.add(t),!i.timer))return i.timer=Promise.resolve().then(async()=>{for(let a of i)switch(a){case"sidebar":await this.renderSidebar();break;case"page":await this.renderPage();break}i.timer=null}),i.timer}cancelScheduledRender(t){let i=lo.get(this);i&&(t?i.delete(t):i.clear())}getRenderContext(){return{page:this.pageId,id:this.pageRef,params:this.pageParams,actions:this.action.actionMap,dataLoaded:this.dataLoaded,...this.context}}renderSidebar(){if(lo.get(this).delete("sidebar"),this.dataLoaded&&this.view.isDefined("sidebar")){let t=Date.now(),i=this.data,a=this.getRenderContext();return this.view.setViewRoot(this.dom.sidebar,"sidebar",{data:i,context:a}),this.dom.sidebar.innerHTML="",this.view.render(this.dom.sidebar,"sidebar",i,a).then(()=>console.log(`[Discovery] Sidebar rendered in ${Date.now()-t}ms`))}}encodePageHash(t,i,a){let c=sy(this,t,"encodeParams",s3)(a||{});return c&&typeof c!="string"&&(Array.isArray(c)||(c=Object.entries(c)),c=c.map(d=>d.map(encodeURIComponent).join("=")).join("&")),`#${t!==this.defaultPageId?encodeURIComponent(t):""}${typeof i=="string"&&i||typeof i=="number"?":"+encodeURIComponent(i):""}${c?"&"+c:""}`}decodePageHash(t){let i=(t.indexOf("&")+1||t.length+1)-1,[a,u]=t.substring(1,i).split(":").map(decodeURIComponent),c=sy(this,a||this.defaultPageId,"decodeParams",a3),d=t.substr(i+1).split("&").filter(Boolean).map(p=>{let m=p.indexOf("=");return m!==-1?[decodeURIComponent(p.slice(0,m)),decodeURIComponent(p.slice(m+1))]:[decodeURIComponent(p),!0]});return{pageId:a||this.defaultPageId,pageRef:u,pageParams:c(d)}}setPage(t,i,a,u=!1){return this.setPageHash(this.encodePageHash(t||this.defaultPageId,i,a),u)}setPageRef(t,i=!1){return this.setPage(this.pageId,t,this.pageParams,i)}setPageParams(t,i=!1){return this.setPage(this.pageId,this.pageRef,t,i)}setPageHash(t,i=!1){let{pageId:a,pageRef:u,pageParams:c}=this.decodePageHash(t);return(this.pageId!==a||this.pageRef!==u||!as(this.pageParams,c))&&(this.pageId=a,this.pageRef=u,this.pageParams=c,this.scheduleRender("page"),t!==this.pageHash)?(this.pageHash=t,this.emit("pageHashChange",i),!0):!1}renderPage(){lo.get(this).delete("page");let t=this.data,i=this.getRenderContext(),{pageEl:a,renderState:u,config:c}=this.page.render(this.dom.pageContent,this.pageId,t,i);return this.view.setViewRoot(a,"Page: "+this.pageId,{config:c,data:t,context:i}),this.dom.pageContent=a,this.nav.render(this.dom.nav,t,i),cf(this.dom.container,"page",this.pageId),cf(this.dom.container,"dzen",Boolean(this.pageParams.dzen)),cf(this.dom.container,"compact",Boolean(this.options.compact)),u.then(()=>{if(this.pageParams["!anchor"]){let d=a.querySelector("#"+CSS.escape("!anchor:"+this.pageParams["!anchor"]));if(d){let p=a.querySelector(".view-page-header");d.style.scrollMargin=p?p.offsetHeight+"px":"",d.scrollIntoView(!0)}}}),u}};var tl=Object.assign(ly(),{setup:ly}),ay=r=>/^\./.test(r);function ly(r){return r=r||!0,function(t){let i=r.accept?String(r.accept):"application/json,.json",a=Boolean(r.dragdrop||r.dragdrop===void 0),u=i.split(",");a&&(t.dom.container.addEventListener("drop",c=>{t.loadDataFromEvent(c)},!0),t.dom.container.addEventListener("dragover",c=>{c.stopPropagation(),c.preventDefault()},!0)),t.preset.define("upload",[{view:"button-primary",onClick:"=#.actions.uploadFile",content:'text:`Open file ${#.actions.uploadFile.fileExtensions | $ ? "(" + join(", ") + ")" : ""}`'},{view:"context",when:"#.actions.uploadFile.dragdrop",content:['html:"<span style=\\"color: #888; padding: 0 1ex\\"> or </span>"','text:"drop a file on the page"']}]),t.action.define("unloadData",()=>{t.unloadData()}),t.action.define("uploadFile",Object.assign(()=>{U("input",{type:"file",accept:i,onchange:c=>t.loadDataFromEvent(c)}).click()},{fileExtensions:u.filter(c=>ay(c)),mimeTypes:u.filter(c=>!ay(c)),dragdrop:a}))}}function nl(){return[parseInt(performance.timeOrigin,10).toString(16),parseInt(1e4*performance.now(),10).toString(16),String(Math.random().toString(16).slice(2))].join("-")}var pf={};Ye(pf,{dataSource:()=>h3,jsonFromStream:()=>dy,loadDataFromEvent:()=>rl,loadDataFromFile:()=>Ts,loadDataFromPush:()=>ol,loadDataFromStream:()=>mi,loadDataFromUrl:()=>il,syncLoaderWithProgressbar:()=>df});var uy=typeof new Blob().stream=="function"?r=>r.stream():u3();function u3(){try{return new ReadableStream({type:"bytes"}),c3}catch{try{return new ReadableStream({}),f3}catch{try{return new Response(new Blob).body.getReader(),d3}catch{}}}return p3}function cy(r){return typeof r.arrayBuffer=="function"?r.arrayBuffer():new Promise((t,i)=>{let a=new FileReader;a.readAsArrayBuffer(r),a.onload=a.onerror=({type:u})=>{a.onload=a.onerror=null,u==="load"?t(a.result||a):i(new Error("Failed to read the blob/file"))}})}function c3(r){let t=0;return new ReadableStream({type:"bytes",autoAllocateChunkSize:512*1024,pull(i){let a=i.byobRequest.view,u=r.slice(t,t+a.byteLength);return cy(u).then(c=>{let d=new Uint8Array(c),p=d.byteLength;t+=p,a.set(d),i.byobRequest.respond(p),t>=r.size&&i.close()})}})}function f3(r){let t=0;return new ReadableStream({pull(i){let a=r.slice(t,t+524288);return cy(a).then(u=>{t+=u.byteLength,i.enqueue(new Uint8Array(u)),t==r.size&&i.close()})}})}function d3(r){return new Response(r).body}function p3(){throw new Error("Blob#stream() is not supported and no fallback can be applied, include https://github.com/MattiasBuelens/web-streams-polyfill")}var fy=Bn(zu(),1),h3={stream:mi,event:rl,file:Ts,url:il,push:ol};function g3(r){try{return new URL(r,location.origin).origin===location.origin}catch{return!1}}function dy(r,t,i){let u=0;return(0,fy.default)(async function*(){let c=r.getReader(),d=Date.now();try{for(;;){let{done:p,value:m}=await c.read();if(p){await i({done:!0,elapsed:Date.now()-d,units:"bytes",completed:u,total:t});break}for(let w=0;w<m.length;w+=1048576){let x=w===0&&m.length-w<1048576?m:m.slice(w,w+1048576);u+=x.length,yield x,await i({done:!1,elapsed:Date.now()-d,units:"bytes",completed:u,total:t})}}}finally{c.releaseLock()}}).then(c=>({data:c,size:u}))}async function m3(r,t){let i=async(a,u)=>(await t.asyncSet({stage:a}),await u());try{let a=Date.now(),{stream:u,data:c,size:d,validateData:p}=await i("request",r),m=Date.now()-a,{data:w,size:x}=c||await i("receive",()=>dy(u,Number(d)||0,S=>t.asyncSet({stage:"receive",progress:S})));return typeof p=="function"&&p(w),await t.asyncSet({stage:"received"}),{data:w,size:x,payloadSize:Number(d)||0,time:Date.now()-a,requestTime:m}}catch(a){throw console.error("[Discovery] Error loading data:",a),await t.asyncSet({stage:"error",error:a}),a}}function mi(r,t,i){let a=new wn;return{state:a,result:m3(r,a).then(u=>({...u,...t(u.data)})),...i}}function Ts(r){return mi(()=>({stream:uy(r),size:r.size}),t=>({data:t,context:{name:r.name,createdAt:new Date(r.lastModified||Date.now()),data:t}}),{title:"Load data from file: "+r.name})}function rl(r){let t=r.dataTransfer||r.target,i=t&&t.files&&t.files[0];return r.stopPropagation(),r.preventDefault(),Ts(i)}function il(r,t){t=t||{};let i=typeof r=="string"?void 0:r,a=t.isResponseOk||(c=>c.ok),u=t.getContentSize||((c,d)=>g3(c)&&!d.headers.get("content-encoding")?d.headers.get("content-length"):d.headers.get("x-file-size"));return mi(async()=>{let c=await fetch(i?"data:application/json,{}":r,t.fetch);if(a(c))return i?{data:i}:{stream:c.body,size:u(r,c),validateData:t.validateData};let d=c.headers.get("content-type")||"",p=await c.text();if(d.toLowerCase().startsWith("application/json")){let m=JSON.parse(p);p=m.error||m}throw p=new Error(p),p.stack=null,p},c=>({data:t.dataField?c[t.dataField]:c,context:{name:"Discovery",createdAt:t.dataField&&c.createdAt?new Date(Date.parse(c.createdAt)):new Date,...t.dataField?c:{data:c}}}),{title:"Load data from url: "+(i?"[explicit data]":r)})}function ol(r,t){let i,a=new ReadableStream({start(u){i=u},cancel(){i=null}});return mi(()=>({size:r,stream:a}),u=>({data:u.data,context:{name:u.name||"Discovery",createdAt:t||u.createdAt||Date.now(),data:u.data}}),{push(u){i.enqueue(u)},finish(){i.close(),i=null}})}function df({result:r,state:t},i){return new Promise((a,u)=>{let c=t.subscribeSync(({stage:d,progress:p,error:m})=>{if(m){c(),u(m);return}return d==="received"&&(c(),a(r)),i.setState({stage:d,progress:p})})})}var sl=Object.assign(my(),{setup:my}),py=()=>{},hy=["primary","secondary","menu"],v3=new Map([["insert",0],["prepend",0],["append",0],["before",1],["after",1],["replace",1],["remove"]]);function gy({mode:r,value:t}){return r==="auto"?"auto":t?"dark":"light"}function my(r){return r=r||{},function(t){let i=null,a=py,u=r.hostId||nl(),c=window.parent,d=new Map,p=(x,S=null)=>{c.postMessage({from:"discoveryjs-app",id:u,type:x,payload:S},"*")},m=x=>{a=()=>{x!==null&&(a=py,x())}},w=x=>{let{id:S,type:T,payload:M}=x.data||{};if(S===u)switch(T){case"defineAction":{let O=M;t.action.define(O,(...L)=>new Promise((A,I)=>{let k=nl();d.set(k,{resolve:A,reject:I}),setTimeout(()=>{d.delete(k),I(new Error("Timeout"))},3e4),p("action",{callId:k,name:O,args:L})}));break}case"actionResult":{let{callId:O,value:L,error:A}=M;if(!d.has(O)){console.error(`[Discovery.js] Unknown action call id "${O}"`);break}let{resolve:I,reject:k}=d.get(O);A?k(A):I(L);break}case"setPageHash":{let{replace:O,hash:L}=M||{};t.setPageHash(L||"",O||!1);break}case"setPage":{let{replace:O,id:L,ref:A,params:I}=M||{};t.setPage(L,A,I,O);break}case"setPageRef":{let{replace:O,ref:L}=M||{};t.setPageRef(L,O);break}case"setPageParams":{let{replace:O,params:L}=M||{};t.setPageParams(L,O);break}case"setDarkmode":{let O=M,L=["auto","light","dark"];if(!L.includes(O)){console.warn(`[Discovery.js] Wrong value for darkmode "${O}", supported values: ${L.map(A=>JSON.stringify(A)).join(", ")}`);break}t.darkmode.set(O==="auto"?"auto":O==="dark");break}case"changeNavButtons":{let{section:O="primary",action:L="append",name:A,position:I,commands:k,config:_}=M||{};if(!hy.includes(O)){console.warn(`[Discovery.js] Wrong value for nav button place "${O}", supported values: ${hy.map(j=>JSON.stringify(j)).join(", ")}`);break}let P=k||{},R=JSON.parse(JSON.stringify(_),(j,B)=>P.includes(B)?()=>p("navMethod",B):B);switch(L){case"insert":t.nav[O].insert(R,I,A);break;case"prepend":case"append":t.nav[O][L](R);break;case"before":case"after":case"replace":t.nav[O][L](A,R);break;case"remove":t.nav[O].remove(A);break;default:console.warn(`[Discovery.js] Wrong value for nav button action "${L}", supported values: ${v3.map(j=>JSON.stringify(j)).join(", ")}`)}break}case"unloadData":{i=null,t.unloadData();break}case"startDataLoad":{let{request:O,size:L}=M;i=Object.assign(ol(L),{acceptToken:nl()}),p("readyForDataLoad",{request:O,acceptToken:i.acceptToken}),i.push('{"data":'),typeof t.trackLoadDataProgress=="function"?t.trackLoadDataProgress(i):i.result.then(({data:A,context:I})=>t.setData(A,I));break}case"dataChunk":{let{acceptToken:O,value:L,done:A}=M;if(i===null){console.warn("[Discovery.js] Loading data is not inited");break}if(i.acceptToken!==O){console.warn("[Discovery.js] Bad accept token");break}L&&i.push(L),A&&(i.push("}"),i.finish(),i=null);break}default:console.warn(`[Discovery.js] Got a post-message addressed to discovery app but with unknown "${T}" type`)}};c!==window&&(t.on("pageHashChange",x=>p("pageHashChanged",{replace:x,hash:t.pageHash||"#",id:t.pageId,ref:t.pageRef,params:t.pageParams})),t.on("startLoadData",x=>{a(),m(x(S=>p("loadingState",S)))}),t.on("startSetData",x=>{a(),m(x(S=>p("loadingState",S)))}),t.on("unloadData",()=>{a(),p("unloadData")}),t.on("data",()=>{p("data")}),t.darkmode.subscribe((x,S)=>p("darkmodeChanged",{mode:S,value:gy({mode:S,value:x})})),r.postponeMessages&&Promise.resolve().then(()=>{for(let x of r.postponeMessages)w({data:x})}),addEventListener("message",w,!1),addEventListener("unload",()=>p("destroy"),!1),p("ready",{page:{hash:t.pageHash||"#",id:t.pageId,ref:t.pageRef,params:t.pageParams},darkmode:{mode:t.darkmode.mode,value:gy(t.darkmode)}}))}}function al(r){r.setPageHash(location.hash),r.cancelScheduledRender(),window.addEventListener("hashchange",()=>r.setPageHash(location.hash),!1),r.on("pageHashChange",function(t){let i=r.pageHash||"#";i==="#"&&!location.hash||(t?location.replace(i):location.hash=i)})}var hf={request:{value:0,title:"Awaiting data"},receive:{value:.1,title:"Receiving data"},received:{value:.9,title:"Await app ready"},prepare:{value:.925,title:"Processing data (prepare)"},initui:{value:.975,title:"Rendering UI"},done:{value:1,title:"Done!"}};Object.values(hf).forEach((r,t,i)=>{r.duration=(t!==i.length-1?i[t+1].value:0)-r.value});var vy=r=>r|0,yy=r=>typeof r=="function"?r:()=>{},y3=async()=>{if(await new Promise(r=>setTimeout(r,1)),!document.hidden)return Promise.race([new Promise(requestAnimationFrame),new Promise(r=>setTimeout(r,8))])};function b3(r,t){let{value:i,title:a,duration:u}=hf[r],c=0,d=null;if(t){let{done:p,elapsed:m,units:w,completed:x,total:S}=t;S?(c=p?1:x/S,d=w==="bytes"?Math.round(c*100)+"%":`${x}/${S}`):(c=p?1:.1+Math.min(.9,m/2e4),d=w==="bytes"?(x/(1024*1024)).toFixed(1)+"MB":x)}return{stageTitle:a,progressValue:i+c*u,progressText:d,title:d?`${a} (${d})...`:r!=="done"?`${a}...`:a}}var vi=class extends wn{constructor({onTiming:t,onFinish:i,delay:a,domReady:u}){super({stage:null,progress:null,error:null}),this.finished=!1,this.awaitRepaint=null,this.lastStage="created",this.lastStageStart=null,this.timings=[],this.onTiming=yy(t),this.onFinish=yy(i),this.appearanceDelay=a===!0?200:Number(a)||0,this.domReady=u||Promise.resolve(),this.el=U("div","view-progress init",[U("div","title"),U("div","progress")])}recordTiming(t,i,a=performance.now()){let u={stage:t,title:hf[t].title,duration:vy(a-i)};this.timings.push(u),this.onTiming(u)}async setState(t){let{stage:i,progress:a,error:u}=t;if(this.finished)return;if(u){this.set("stage"in t?{stage:i,progress:a,error:u}:{...this.value,error:u});return}this.set(t);let c=i!==this.lastStage,d=performance.now();this.lastStage==="created"&&(this.startTime=d,this.domReady.then(()=>{let w=Math.max(0,this.appearanceDelay-vy(performance.now()-d));w&&this.el.style.setProperty("--appearance-delay",`${w}ms`),getComputedStyle(this.el).opacity,this.el.classList.remove("init")})),c&&(this.lastStageStart!==null&&this.recordTiming(this.lastStage,this.lastStageStart,d),this.lastStage=i,this.lastStageStart=d,this.awaitRepaint=d);let{title:p,progressValue:m}=b3(i,a);this.el.querySelector(".title").textContent=p,this.el.style.setProperty("--progress",m),(c||d-this.awaitRepaint>65&&d-this.lastStageStart>200)&&(await y3(),this.awaitRepaint=performance.now())}finish(){this.finished||(this.finished=!0,this.lastStageStart!==null&&this.recordTiming(this.lastStage,this.lastStageStart),this.recordTiming("done",this.startTime),this.onFinish(this.timings),this.set({stage:"done"}))}dispose(){this.finish(),this.el.remove()}};var uo=(r,t)=>r!==void 0?r:t,yi=class extends gi{constructor(t={}){let i=t.extensions?[t.extensions]:[];i.push(rc),uo(t.router,!0)&&i.push(al),t.mode!=="modelfree"&&(i.push(ec),i.push(tc)),uo(t.upload,!1)&&(i.push(tl.setup(t.upload)),i.push(nc)),uo(t.embed,!1)&&i.push(sl),uo(t.inspector,!0)&&i.push(ic),super({container:document.body,...t,extensions:i,darkmode:uo(t.darkmode,"auto"),darkmodePersistent:uo(t.darkmodePersistent,!0)}),this.mode=this.options.mode}setLoadingState(t,{error:i,progressbar:a}={}){let u=this.dom.loadingOverlay;switch(t){case"init":{if(u.classList.remove("error","done"),a.el.parentNode)return;u.innerHTML="",u.append(a.el),u.classList.add("init"),requestAnimationFrame(()=>u.classList.remove("init"));break}case"success":{u.classList.add("done");break}case"error":{u.classList.add("error"),u.innerHTML="",this.view.render(u,[{view:"block",className:"action-buttons",content:[{view:"preset/upload",when:this.preset.isDefined("upload")}]},i.renderContent||{view:"alert-danger",content:[{view:"h3",content:['badge:"Error"',"text:errorText"]},'text:"(see details in the console)"']}],{errorText:Lt(i.message||String(i)),errorStack:i.stack?Lt(i.stack).replace(/^Error:\s*(\S+Error:)/,"$1"):""},{actions:this.actions}).then(()=>{a?.setState({error:i})});break}}}async setDataProgress(t,i,a=this.progressbar({title:"Set data"})){try{this.setLoadingState("init",{progressbar:a}),await super.setDataProgress(t,i,a),this.setLoadingState("success")}catch(u){this.setLoadingState("error",{error:u,progressbar:a})}}progressbar(t){return new vi({delay:200,domReady:this.dom.ready,onFinish(i){console.groupCollapsed(`[Discovery] ${t.title||"Load data"} (${i[i.length-1].duration}ms)`);for(let a of i)console.log(`${a.title}: ${a.duration}ms`);console.groupEnd()},...t})}trackLoadDataProgress(t){let i=this.progressbar({title:t.title});return this.setLoadingState("init",{progressbar:i}),this.emit("startLoadData",i.subscribe.bind(i)),df(t,i).then(({data:a,context:u})=>this.setDataProgress(a,u,i),a=>this.setLoadingState("error",{error:a,progressbar:i})),t.result}loadDataFromStream(t,i){return this.trackLoadDataProgress(mi(()=>({stream:t,totalSize:i})))}loadDataFromEvent(t){return this.options.mode==="modelfree"&&this.defaultPageId!==this.reportPageId&&(this._defaultPageId=this.defaultPageId,this.defaultPageId=this.reportPageId,this.setPageHash(this.pageHash,!0),this.cancelScheduledRender()),this.trackLoadDataProgress(rl(t))}loadDataFromFile(t){return this.trackLoadDataProgress(Ts(t))}loadDataFromUrl(t,i){return this.trackLoadDataProgress(il(t,i))}unloadData(){this.dataLoaded&&this.options.mode==="modelfree"&&this._defaultPageId!==this.defaultPageId&&(this.defaultPageId=this._defaultPageId,this.setPageHash(this.pageHash,!0),this.cancelScheduledRender()),super.unloadData()}initDom(){super.initDom(),this.dom.container.append(this.dom.loadingOverlay=U("div","loading-overlay done"))}renderPage(){return document.title=this.getRenderContext().name||document.title,super.renderPage()}};var mf={};Ye(mf,{applyContainerStyles:()=>k3,rollbackContainerStyles:()=>S3});var w3={"font-family":"Tahoma, Verdana, Arial, sans-serif","font-size":"16px","line-height":"1.6","-webkit-text-size-adjust":"none","text-size-adjust":"none","background-color":"var(--discovery-background-color, white)",color:"var(--discovery-color, black)","transition-property":"background-color, color","transition-duration":".25s","transition-timing-function":"ease-in"},x3={"--discovery-background-color":"#242424","--discovery-color":"#cccccc"},gf=new WeakSet,bi=new WeakMap;function by(r,t,i){t in i||(i[t]=[r.style.getPropertyValue(t),r.style.getPropertyPriority(t)])}function k3(r,t){t=t||{},bi.has(r)||bi.set(r,Object.create(null));let i=gv(t.darkmode,t.darkmodePersistent),a=bi.get(r);for(let[u,c]of Object.entries(w3))(gf.has(r)||!/^transition/.test(u))&&(by(r,u,a),r.style.setProperty(u,c));for(let[u,c]of Object.entries(x3))by(r,u,a),i?r.style.setProperty(u,c):r.style.removeProperty(u);return gf.add(r),i}function S3(r){if(bi.has(r)){let t=bi.get(r);for(let[i,a]of Object.entries(t))r.style.setProperty(i,...a);bi.delete(bi),gf.delete(r)}}var wy={...mf,base64:Sa,...Pu,copyText:zn,...pf,debounce:Lr,...iu,...su,injectStyles:ms,...ju,...hu,pattern:Uu,persistent:Qu,...Su,progressbar:vi,safeFilterRx:rs,...Xu};function Q7(r,t,i,a){let u=location.pathname.endsWith("/index.html")?"/index.html":"",c=new yi(r);return c.apply(gp),c.apply(mp),a={...a,meta:r.meta},r.mode==="multi"&&c.nav.menu.append({name:"switch-model",data:{text:"Switch model",href:`..${u}`}}),i?c.setDataProgress(i,a,t):(c.context=a,c.renderPage())}export{Q7 as default};
